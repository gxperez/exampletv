/**
 * Copyright (c) 2014 Samsung Electronics Co., Ltd All Rights Reserved 
 * PROPRIETARY/CONFIDENTIAL
 *  
 * This software is the confidential and proprietary information of SAMSUNG 
 * ELECTRONICS ("Confidential Information"). You shall not disclose such 
 * Confidential Information and shall use it only in accordance with the terms of 
 * the license agreement you entered into with SAMSUNG ELECTRONICS. SAMSUNG make 
 * no representations or warranties about the suitability of the software, either 
 * express or implied, including but not limited to the implied warranties of 
 * merchantability, fitness for a particular purpose, or non-infringement. 
 * SAMSUNG shall not be liable for any damages suffered by licensee as a result 
 * of using, modifying or distributing this software or its derivatives.
 */

/*! CaphFramework v2.1.1-150302 @ 2015-03-02 12:42:07 */
(function(){"use strict";var t=caph.require("ui.base.component.Button"),e=caph.require("module.renderer.View"),i=caph.require("module.event.Manager"),n=caph.require("ui.base.Component");$class({$namespace:"caph.stripe.ui.component.Button",$extends:t,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.addClass("stripe")},setOption:function(t){this.setARIA({title:"button",role:"button"}),t||(t={}),t.contents||this._option.contents||(t.contents="Button"),t.align||this._option.align||(t.align="center"),this.$super(t)},setContent:function(t){if(t){var s=null;"string"==typeof t?("text"===this._option.buttonType?s=this._option.contents:(s=new e,s.addClass("text"),s.setAlign=this._setAlignText,s.setContent=this._setContentText),s.setContent(t),this._option.buttonType="text",this.hasClass("text")||this.addClass("text"),this.removeClass("icon")):t instanceof caph.ui.base.component.Icon?(s=new n({on:{focus:function(e){i.getInstance().sendTo(t,e)},blur:function(e){i.getInstance().sendTo(t,e)}}}),s.addChild(caph.clone(t)),s.addClass("icon"),s.setAlign=this._setAlignIcon,this._option.buttonType="icon",this.hasClass("icon")||this.addClass("icon"),this.removeClass("text")):t instanceof e&&(s=t._clone(),this._option.buttonType="view"),this.$super(s)}return this},_setContentText:function(t){this.setProperty({innerText:t})},_setAlignText:function(t,e){switch(e){case"top":case"bottom":case"middle":this.setStyle({verticalAlign:e});break;case"left":case"right":case"center":t.setStyle({textAlign:e})}},_setAlignIcon:function(t,e){var i=this.getChildren()[0];switch(e){case"top":case"bottom":case"middle":this.setStyle({verticalAlign:e});break;case"right":i.setStyle({marginLeft:"auto",marginRight:0});break;case"left":i.setStyle({marginLeft:0,marginRight:"auto"});break;case"center":i.setStyle({marginLeft:"auto",marginRight:"auto"})}}})})(this),function(){"use strict";var t=caph.require("ui.base.component.Checkbox"),e="disable";$class({$namespace:"caph.stripe.ui.component.Checkbox",$extends:t,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.addClass("stripe")},setEnable:function(t){this.$super(t),t===!0?this.removeClass(e):this.addClass(e)}})}(this),function(){"use strict";var t=caph.require("ui.base.component.Icon");$class({$namespace:"caph.stripe.ui.component.Icon",$extends:t,$constructor:function(t){this.$super(t),this.addClass("caph-stripe-icon")},$statics:{bgm:function(){return new caph.stripe.ui.component.Icon({type:"bgm"})},bgmOff:function(){return new caph.stripe.ui.component.Icon({type:"bgmoff"})},del:function(){return new caph.stripe.ui.component.Icon({type:"delete"})},equalizer:function(){return new caph.stripe.ui.component.Icon({type:"equalizer"})},favorite:function(){return new caph.stripe.ui.component.Icon({type:"favorite"})},ff:function(){return new caph.stripe.ui.component.Icon({type:"ff"})},folder:function(){return new caph.stripe.ui.component.Icon({type:"folder"})},helpB:function(){return new caph.stripe.ui.component.Icon({type:"help_b"})},helpG:function(){return new caph.stripe.ui.component.Icon({type:"help_g"})},helpR:function(){return new caph.stripe.ui.component.Icon({type:"help_r"})},helpY:function(){return new caph.stripe.ui.component.Icon({type:"help_y"})},lock:function(){return new caph.stripe.ui.component.Icon({type:"lock"})},movieClip:function(){return new caph.stripe.ui.component.Icon({type:"movieclip"})},music:function(){return new caph.stripe.ui.component.Icon({type:"music"})},next:function(){return new caph.stripe.ui.component.Icon({type:"next"})},pause:function(){return new caph.stripe.ui.component.Icon({type:"pause"})},photo:function(){return new caph.stripe.ui.component.Icon({type:"photo"})},play:function(){return new caph.stripe.ui.component.Icon({type:"play"})},prev:function(){return new caph.stripe.ui.component.Icon({type:"prev"})},rating:function(){return new caph.stripe.ui.component.Icon({type:"rating"})},ratingHalf:function(){return new caph.stripe.ui.component.Icon({type:"ratinghalf"})},record:function(){return new caph.stripe.ui.component.Icon({type:"record"})},repeat:function(){return new caph.stripe.ui.component.Icon({type:"repeat"})},repeatOff:function(){return new caph.stripe.ui.component.Icon({type:"repeatoff"})},repeatOne:function(){return new caph.stripe.ui.component.Icon({type:"repeatone"})},rew:function(){return new caph.stripe.ui.component.Icon({type:"rew"})},rotateLeft:function(){return new caph.stripe.ui.component.Icon({type:"rotateleft"})},rotateRight:function(){return new caph.stripe.ui.component.Icon({type:"rotateright"})},search:function(){return new caph.stripe.ui.component.Icon({type:"search"})},setting:function(){return new caph.stripe.ui.component.Icon({type:"setting"})},shuffle:function(){return new caph.stripe.ui.component.Icon({type:"shuffle"})},shuffleOff:function(){return new caph.stripe.ui.component.Icon({type:"shuffleoff"})},sound:function(){return new caph.stripe.ui.component.Icon({type:"sound"})},speaker:function(){return new caph.stripe.ui.component.Icon({type:"speaker"})},usb:function(){return new caph.stripe.ui.component.Icon({type:"usb"})},voice:function(){return new caph.stripe.ui.component.Icon({type:"voice"})},zoomIn:function(){return new caph.stripe.ui.component.Icon({type:"zoomin"})},zoomOut:function(){return new caph.stripe.ui.component.Icon({type:"zoomout"})},exit:function(){return new caph.stripe.ui.component.Icon({type:"exit"})},ret:function(){return new caph.stripe.ui.component.Icon({type:"return"})},sb:function(){return new caph.stripe.ui.component.Icon({type:"sb"})},sf:function(){return new caph.stripe.ui.component.Icon({type:"sf"})}},setSelected:function(t){return t?this.addClass("selected"):this.removeClass("selected"),this},onfocus:function(){this.addClass("focus")},onblur:function(){this.removeClass("focus")},onclick:function(){this.setSelected(!0)},onkeydown:function(t){t.key().enter&&this.setSelected(!0)},setOption:function(t){t.prefix=t.prefix||"caph-stripe-icon-",this.$super(t)}})}(this),function(){"use strict";$class({$namespace:"caph.stripe.ui.component.Indicator",$extends:caph.require("ui.base.component.Indicator"),$constructor:function(t){t.indicatorClass="caph-stripe-indicator",this.$super(t)}})}(this),function(){"use strict";var t=caph.require("stripe.ui.component.Button"),e=caph.require("module.renderer.View");$class({$namespace:"caph.stripe.ui.component.Popup",$extends:caph.require("ui.base.component.Popup"),$constructor:function(e){e._Button=t,e._dimOpacity=.6,e._dimColor="#000000",e._popupOpacity=.95,e._popupColor="#0a233d",e._fillWidth=!0,this.$super(e)},onpostrender:function(){this.$super();var t=this._useTitleArea?this.popupTitleBox.size():this.popupMessageBox.size(),e=this._useButtonArea?this.popupButtonBox.size():[0,0],i=(this._width-t[0])/2;if(this._useTitleArea&&(this.popupTitleBox.x(i),this.popupTitleUnderline.size([t[0],1]).x(i).y(t[1])),this.popupMessageBox.x(i),this.popupMessageBox.y(1*this.popupMessageBox.getStyle("top").replace("px","")),this.popupMessageBox.setStyle({top:"initial"}),this.popupMessageBox.size([void 0,this._height-this.popupMessageBox.y()-e[1]]),this._useButtonArea){this.popupButtonBox.x(i),this.popupButtonBox.y(this._height-e[1]);var n=this._buttons.length;if(n>0){var s=this._buttons[0].size()[0],o=1*this._buttons[0].getStyle("margin-right").replace("px",""),r=(t[0]-(s*n+o*(n-1)))/2;this._buttons.forEach(function(t,e){t.x(r+(s+o)*e),t.y(1*t.getStyle("top").replace("px","")),t.setStyle({top:"initial"})})}}},_create:function(t){this.$super(t),this.popupOuter.addChild(new e({dom:{style:{backgroundColor:"#ffffff",opacity:.1}}}).size([this._width,1])),this.popupOuter.addChild((new e).size([this._width]).y(this._height).addClass("popup-stripe-bg-shadow")),this._useTitleArea?(this.popupTitleBox.addClass("popup-stripe-title-area"),this.popupOuter.addChild(this.popupTitleUnderline=new e({dom:{style:{backgroundColor:"#ffffff",opacity:.3}}}))):this.popupMessageBox.addClass("popup-stripe-no-title-area"),this.popupMessageBox.addClass("popup-stripe-message-area"),this._useButtonArea&&(this.popupButtonBox.addClass("popup-stripe-button-area"),this._buttons.forEach(function(t){t.addClass("popup-stripe-button")}))}})}(this),function(){"use strict";var t=caph.require("ui.base.component.Inputbox");$class({$namespace:"caph.stripe.ui.component.Inputbox",$extends:t,$constructor:function(t){this.$super(t)},setOption:function(t){t.className=t.className||"caph-stripe-inputbox",this.$super(t)}})}(this),function(){"use strict";var t=caph.require("ui.base.component.Label");$class({$namespace:"caph.stripe.ui.component.Label",$extends:t,$constructor:function(t){this.$super(t)}})}(this),function(){"use strict";var t=caph.require("ui.base.component.ProgressBar");$class({$namespace:"caph.stripe.ui.component.ProgressBar",$extends:t,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.addClass("caph-progressbar-stripe-body-normal"),this.label.addClass("caph-progressbar-stripe-label-normal"),this.body.addClass("caph-progressbar-stripe-progressingbar-normal")},setOption:function(t){this.$super(t)}})}(this),function(){"use strict";var t=caph.require("ui.base.component.RadioButton");$class({$namespace:"caph.stripe.ui.component.RadioButton",$extends:t,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.addClass("stripe")}})}(this),function(){"use strict";var t=caph.require("ui.base.component.Rating");$class({$namespace:"caph.stripe.ui.component.Rating",$extends:t,$constructor:function(t){this.$super(t)},setOption:function(t){t.className=t.className||"caph-stripe-rating",this.$super(t)}})}(this),function(){"use strict";$class({$namespace:"caph.stripe.ui.component.Slider",$extends:caph.require("ui.base.component.Slider"),$constructor:function(t){t._isBarImgSplit=!1,t._sliderBarClass="caph-stripe-slider-bar-",t._sliderFocusClass="caph-stripe-slider-active-",this.$super(t)}})}(this),function(){"use strict";$class({$namespace:"caph.stripe.ui.component.Loading",$extends:caph.ui.base.component.Sprite,$constructor:function(t){this.$super(t)},$statics:{SMALL:function(t){var e=caph.require("stripe.ui.component.Loading");return new e({type:"small",color:t||"dark"})},MEDIUM:function(t){var e=caph.require("stripe.ui.component.Loading");return new e({type:"medium",color:t||"dark"})},LARGE:function(t){var e=caph.require("stripe.ui.component.Loading");return new e({type:"large",color:t||"dark"})}},_initialize:function(){this.$super(),this._option._isRendered=!1,this.addClass("caph-loading stripe"),this.requestPostRender()},setOption:function(t){this.$super(t),this._option.type=t.type||this._option.type||"medium",this._option.color=t.color||this._option.color||"bright",this.addClass(this._option.type),this.addClass(this._option.color),this._option._isRendered===!0&&this._setLoadingFrame()},_setLoadingFrame:function(){var t=this.size(),e=63;this.removeFrame(),this.addFrame({x:0,y:0,width:t[0],height:t[1],number:e,direction:"vertical"})},onpostrender:function(){this._option._isRendered=!0,this._setLoadingFrame()}})}(this),function(){"use strict";var t=caph.require("ui.base.component.Button"),e=caph.require("ui.base.Component"),i=caph.require("ui.base.component.Icon"),n=caph.require("module.renderer.View"),s=caph.require("module.event.Manager");$class({$namespace:"caph.stripe.ui.component.ToggleButton",$extends:t,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.addClass("stripe"),this._option.contents={}},setOption:function(t){this.setARIA({title:"button",role:"button"}),t||(t={}),t.contents||this._option.contents||(t.contents={on:"On",off:"Off"}),t.align||this._option.align||(t.align="center"),this.$super(t),"on"===t.state?this._turnOn():this._turnOff()},setContent:function(t){t&&(this._option.contents.on instanceof n&&this.removeChild(this._option.contents.on),this._option.contents.off instanceof n&&this.removeChild(this._option.contents.off),t.on instanceof i?(this.addClass("icon"),this._option.contents.on=this._setContent(t.on,"icon"),this._option.contents.off=this._setContent(t.off,"icon")):"string"==typeof t.on&&(this.addClass("text"),this._option.contents.on=this._setContent(t.on,"text"),this._option.contents.off=this._setContent(t.off,"text")),"on"===this._option.state?this._turnOn():"off"===this._option.state&&this._turnOff(),this.addChild(this._option.contents.on),this.addChild(this._option.contents.off))},_setContent:function(t,i){var o=new n;return"text"===i?(o.setAlign=this._setAlignText,o.setContent=this._setContentText,o.setContent(t)):"icon"===i&&(o=new e({on:{focus:function(e){s.getInstance().sendTo(t,e)},blur:function(e){s.getInstance().sendTo(t,e)}}}),o.addChild(caph.clone(t)),o.setAlign=this._setAlignIcon),o.addClass(i),o},setAlign:function(t){if(t&&(t=t.replace(/\s+/g,""),this._option.align=t,this._option.contents.on&&caph.isFunction(this._option.contents.on.setAlign)))for(var e=t.split("|"),i=0;e.length>i;i++)this._option.contents.on.setAlign(this,e[i]),this._option.contents.off.setAlign(this,e[i]);return this},_turnOn:function(){this._option.state="on";var t=this._option.contents;t.on&&(t.on.setStyle({display:"table-cell"}),t.off.setStyle({display:"none"})),this.addClass("select")},_turnOff:function(){this._option.state="off";var t=this._option.contents;t.on&&(t.on.setStyle({display:"none"}),t.off.setStyle({display:"table-cell"})),this.removeClass("select")},toggle:function(){return this.isEnable()&&("on"===this._option.state?this._turnOff():"off"===this._option.state&&this._turnOn()),this},isTurnedOn:function(){return"on"===this._option.state},_setContentText:function(t){this.setProperty({innerText:t})},_setAlignText:function(t,e){switch(e){case"top":case"bottom":this.setStyle({verticalAlign:e});break;case"left":case"right":t.setStyle({textAlign:e});break;case"center":this.setStyle({verticalAlign:"middle"}),t.setStyle({textAlign:"center"})}},_setAlignIcon:function(t,e){var i=this.getChildren()[0];switch(e){case"top":case"bottom":case"middle":this.setStyle({verticalAlign:e});break;case"right":i.setStyle({marginLeft:"auto",marginRight:0});break;case"left":i.setStyle({marginLeft:0,marginRight:"auto"});break;case"center":i.setStyle({marginLeft:"auto",marginRight:"auto"})}},setEnable:function(t){return this.$super(t),t===!0?this.removeClass("disable"):this.addClass("disable"),this},onkeydown:function(t){t.key().enter&&this.toggle()},onmousedown:function(){this.isEnable()&&this.toggle()},onfocus:function(t){if(this.addClass("focus"),this._option.contents.on instanceof caph.ui.base.Component&&this._option.contents.off instanceof caph.ui.base.Component){var e=s.getInstance(),i={detail:t.detail,type:"focus",bubbles:!1};e.sendTo(this._option.contents.on,i),e.sendTo(this._option.contents.off,i)}},onblur:function(t){if(this.removeClass("focus"),this._option.contents.on instanceof caph.ui.base.Component&&this._option.contents.off instanceof caph.ui.base.Component){var e=s.getInstance(),i={detail:t.detail,type:"blur",bubbles:!1};e.sendTo(this._option.contents.on,i),e.sendTo(this._option.contents.off,i)}},onkeyup:function(){},onmouseup:function(){}})}(this),function(){"use strict";var t=caph.require("ui.base.component.Tooltip");$class({$namespace:"caph.stripe.ui.component.Tooltip",$extends:t,$constructor:function(t){this.$super(t)},setOption:function(t){t.textClassName=t.textClassName||"caph-stripe-tooltip-text",t.tailClassPrefixName=t.tailClassPrefixName||"caph-stripe-tooltip-tail-",this.$super(t)}})}(this),function(){"use strict";var t=caph.require("ui.base.component.Spinner");$class({$namespace:"caph.stripe.ui.component.Spinner",$extends:t,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.addClass("stripe"),this._upIcon.addClass("stripe"),this._innerText.inputbox.addClass("caph-stripe-inputbox"),this._innerText.inputbox.addClass("stripe"),this._innerText.inputbox.addClass("normal"),this._downIcon.addClass("stripe")}})}(this),function(){"use strict";$class({$namespace:"caph.stripe.ui.component.Scrollbar",$extends:caph.ui.base.component.Scrollbar,$constructor:function(t){this.$super(t)},setOption:function(t){t.className=t.className||"caph-stripe-scrollbar",this.$super(t)}})}(this),function(){"use strict";var t=caph.require("stripe.ui.component.Checkbox"),e=caph.require("stripe.ui.component.RadioButton");$class({$namespace:"caph.stripe.ui.component.ListText",$extends:caph.require("ui.base.component.ListText"),$constructor:function(i){i.themeCheckbox=t,i.themeRadiobutton=e,i.className="caph-stripe-listtext",i.wrapperClassName="caph-stripe-listtext-wrapper",i.defaultClassName="caph-stripe-listtext-default",this.$super(i)}})}(this),function(){"use strict";var t=caph.require("stripe.ui.component.ListText"),e=caph.require("ui.base.component.ListMenu");$class({$namespace:"caph.stripe.ui.component.ListMenu",$extends:e,setOption:function(e){e._ListText=t,this.$super(e)},_getListText:function(t){return this.$super(t).addClass("stripe")},_getArrow:function(t,e){return this.$super(t,e).addClass("stripe")}})}(this),function(){"use strict";var t=caph.require("stripe.ui.component.ListMenu"),e=caph.require("module.renderer.View");$class({$namespace:"caph.stripe.ui.component.SubList",$extends:t,$constructor:function(t){this.$super(t),this.visibility(!1)},onpostrender:function(){this.$super();var t=this.size();this._background.size(t),this._scene.size(t),this._border.size(t),this._shadow.y(t[1])},_create:function(){this._background||this.addChild(this._background=new e({dom:{style:{backgroundColor:"#0f1826"}}})),this._scene||this.addChild(this._scene=new e({dom:{style:{backgroundColor:"#ffffff",opacity:.2}}})),this._border||this.addChild(this._border=new e({dom:{style:{boxSizing:"border-box",opacity:.1}}}).addClass("caph-stripe-sublist-border")),this._shadow||this.addChild(this._shadow=(new e).addClass("caph-stripe-sublist-shadow").size([this.width])),this.$super()},_getListText:function(t){return this.$super(t).addClass("popupmenu")}})}(this),function(){"use strict";var t=caph.require("ui.base.component.ListText"),e=caph.require("stripe.ui.component.ListText"),i=caph.require("stripe.ui.component.SubList"),n=caph.require("module.event.Manager"),s=caph.require("module.renderer._VDomLookUpTable");$class({$namespace:"caph.stripe.ui.component.PopupMenu",$extends:e,$constructor:function(t){this.$super(t),this.size([this.width]),caph.window.bind("click",function(t){if(this._subList&&this._subList.visibility()){for(var e=s.getInstance().getVDom(t.target);e&&e!==this._subList;)e=e.getParent();e||this.hide()}}.bind(this))},setOption:function(e){this.$super(e),this.width=e.width||this.width,this.items=e.items,this.subListType=e.subListType||t.SELECTBOX,this.subListWidth=caph.isBlank(e.subListWidth)?this.width:e.subListWidth,this.subListSelectedIndex=caph.isBlank(e.subListSelectedIndex)?0:e.subListSelectedIndex},size:function(t){return caph.isBlank(t)?this.$super():(this.width===this.subListWidth&&(this.subListWidth=t[0]),this.width=t[0],this.$super(t))},addItem:function(t){return this._subList?this._subList.addItem(t):this.items=this.items.concat(t),this},getSelectedItem:function(){return this._subList?this._subList.getSelectedItem():null},show:function(){return this._subList||this._createSubList(),this.setEnable(!1),this.focusable(!1),this._subList.show(),this._selectedItem=this.getSelectedItem(),n.getInstance().sendTo(this,{type:"showmenu"}),this},hide:function(){return this._subList&&this._subList.hide(),this.setEnable(!0),this.focusable(!0),this.setChecked(!1),this.focus(),n.getInstance().sendTo(this,{type:"hidemenu"}),this},onselected:function(){this.show()},onchanged:function(t){t.detail=this._selectedItem},_createSubList:function(){var t=this;this._subList=new i({type:this.subListType,width:this.subListWidth,position:[this.x()+this.width,this.y()],selectedIndex:this.subListSelectedIndex,items:this.items,on:{selected:function(e){var i=e.detail.item;t._selectedItem!==i&&(t._selectedItem=i,n.getInstance().sendTo(t,{type:"changed"})),t.hide()},keydown:function(e){var i=e.key();(i.left||i.right)&&(t.hide(),e.stopPropagation())}}}),this.getParent().addChild(this._subList)}})}(this),function(){"use strict";var t=caph.require("ui.base.Component"),e=caph.require("ui.base.component.Label"),i=caph.require("ui.base.component.ListText"),n=caph.require("module.event.Manager"),s=caph.require("module.renderer._VDomLookUpTable"),o=caph.require("module.renderer.View"),r=$class({$extends:caph.require("stripe.ui.component.SubList"),_create:function(){this.$super(),this._border.setStyle({borderTopWidth:"0px"})}});$class({$namespace:"caph.stripe.ui.component.DropdownList",$extends:t,$constructor:function(t){this.$super(t),this._create(),this.focusable(!0),this.requestPostRender(),caph.window.bind("click",function(t){if(this._subList&&this._subList.visibility()){for(var e=s.getInstance().getVDom(t.target);e&&e!==this._subList;)e=e.getParent();e||this.hide()}}.bind(this))},setOption:function(t){this.$super(t),this.width=t.width,this.text=t.text,this.subListType=t.subListType||i.DEFAULT,this.items=t.items},addItem:function(t){return this._subList?this._subList.addItem(t):this.items=this.items.concat(t),this},setEnable:function(t){return this.$super(t),t?(this.removeClass("disable"),this._label&&this._label.removeClass("disable"),this._button&&this._button.removeClass("disable")):(this.addClass("disable"),this._label&&this._label.addClass("disable"),this._button&&this._button.addClass("disable")),this},getSelectedItem:function(){return this._subList?this._subList.getSelectedItem():null},show:function(){return this._subList||this._createSubList(),this.setEnable(!1),this.focusable(!1),this.addClass("selected"),this._label.addClass("selected"),this._button.addClass("selected"),this._subList.show(),this._selectedItem=this.getSelectedItem(),this},hide:function(){return this.removeClass("selected"),this._label.removeClass("selected"),this._button.removeClass("selected"),this._subList&&this._subList.hide(),this.setEnable(!0),this.focusable(!0),this.focus(),this},onfocus:function(){this.addClass("focus"),this._label.addClass("focus"),this._button.addClass("focus")},onblur:function(){this.removeClass("focus"),this._label.removeClass("focus"),this._button.removeClass("focus")},onclick:function(){this.show()},onkeydown:function(t){var e=t.key();e.enter&&(t.stopPropagation(),this.show())},onchanged:function(t){t.detail=this._selectedItem},_create:function(){this._label=new e({size:[this.width],text:this.text,align:{horizontal:"left"}}).addClass("caph-stripe-dropdownlist-label"),this._button=(new o).addClass("caph-stripe-dropdownlist-button"),this.addChild(this._label),this.addChild(this._button),this.addClass("caph-stripe-dropdownlist")},_createSubList:function(){var t=this,e=this.size();this._subList=new r({type:this.subListType,width:e[0],position:[this.x(),this.y()+e[1]],selectedIndex:0,items:this.items,on:{selected:function(e){var i=e.detail.item;t._selectedItem!==i&&(t._selectedItem=i,n.getInstance().sendTo(t,{type:"changed"})),t.hide()},keydown:function(e){var i=e.key();(i.left||i.right)&&(t.hide(),e.stopPropagation())}}}),this.getParent().addChild(this._subList)}})}(this),function(){"use strict";$class({$namespace:"caph.stripe.ui.widget.audioPlayer",$constructor:function(){},$statics:{getPlayerInstance:function(t,e){var i=caph.require("stripe.ui.widget.audioPlayer.html5");return new i(t,e)}}})}(this),function(){"use strict";$class({$namespace:"caph.stripe.ui.widget.videoPlayer",$constructor:function(){},$statics:{getPlayerInstance:function(t){var e=null;return t=t||{},e=new caph.stripe.ui.widget.videoPlayer.html5(t)}}})}(this),function(window){"use strict";var View=caph.require("module.renderer.View"),ComponentBase=caph.require("ui.base.Component"),VDomLookUpTable=caph.require("module.renderer._VDomLookUpTable"),Icon=caph.require("stripe.ui.component.Icon"),Button=caph.require("stripe.ui.component.Button"),CheckBox=caph.require("stripe.ui.component.Checkbox"),Label=caph.require("ui.base.component.Label"),FocusManager=caph.require("module.focus.Manager"),Tooltip=caph.require("stripe.ui.component.Tooltip"),Slider=caph.require("stripe.ui.component.Slider"),Popup=caph.require("stripe.ui.component.Popup"),AudioPlayer=caph.require("stripe.ui.widget.audioPlayer"),Language=caph.require("base.resource.Language"),timelinePlayer=null,timeline1=null,timeline2=null,animatingDiv=null,visibleDiv=null,cacheImage=[],MAX_CACHE_LEN=5,cacheIdx=0,self=null,_KEY_CODE={RETURN:0,RETURN_TV:10009,RETURN_ORSAY:88},_IMAGE_VIEWER_STATE={STATE_STOPPED:0,STATE_PLAYING:1,STATE_PAUSED:2},_SLIDESHOW_SPEED={SLOW:8e3,NORMAL:5e3,FAST:3e3},_SLIDESHOW_SPEED_TEXT=null,_SLIDESHOW_EFFECT={CORNER_WIPE:"_cornerWipe",FADE_IN_STILL:"_fadeInStill",FADE_IN_LEFT:"_fadeInLeft",FADE_IN_RIGHT:"_fadeInRight",FADE_IN_DOWN:"_fadeInDown",FADE_IN_TOP:"_fadeInTop",SPIN_FADE_IN:"_spinFadeIn"},_SLIDESHOW_EFFECT_TEXT=null,_ANIMATION_STATE={RUNNING:0,COMPLETE:1},_ZOOM_STATE={NORMAL:1,ZOOM_2X:2,ZOOM_4X:4},_RESOLUTION=null,IMAGEVIEWER_DIMENSION={1080:{SETTING_MENU_BUTTON:{POSITION:[0,60,0],SIZE:[500,60],FONT_SIZE:30,LINE_HEIGHT:60},CHECKLIST_CONTAINER:{FONT_SIZE:30,TOP:5,LEFT:5},CHECKLIST_SPEED:{POSITION:[0,52,0],SIZE:[180,35]},CHECKLIST_LABEL:{POSITION:[0,0,0],SIZE:[60,50]},CHECKLIST_EFFECT:{POSITION:[0,52,0],SIZE:[300,52]},MENU_FRAME:{POSITION:[1665,180,999],SIZE:[180,52],PADDING:0},EFFECT_FRAME:{POSITION:[1550,240,999],SIZE:[300,52],PADDING:0},SLIDER:{WIDTH:1650,POSITION:[80,15,0],THUMB_COUNT:12},IMAGE_SLIDER_CONTAINER:{POSITION:[0,120,999],SIZE:[1900,35]},MUSIC_INFO:{POSITION:[1300,880,999],SIZE:[550,50],FONT_SIZE:26,LINE_HEIGHT:50,PADDING:10},SETTING_FRAME:{POSITION:[1405,124,998],SIZE:[500,300],PADDING:0},ZOOMROTATE_FRAME:{POSITION:[100,800,999],SIZE:[340,270]},ZOOM_PANEL:{POSITION:[74,0,2],SIZE:[200,200]},MINIMAP_POINTER:{BORDER_WIDTH:1,POSITION:[0,0,2],SIZE:[200,200]},POINTER_BOX:{POSITION:[50,50,2],SIZE:[100,100]},ARROW_TOP:{POSITION:[90,22,2],SIZE:[25,20]},ARROW_DOWN:{POSITION:[90,158,2],SIZE:[25,20]},ARROW_LEFT:{POSITION:[22,90,2],SIZE:[20,25]},ARROW_RIGHT:{POSITION:[161,90,2],SIZE:[20,25]},ZOOMROTATE_PANEL:{POSITION:[0,210,9],SIZE:[365,60]},ZOOM_IN:{POSITION:[0,0],SIZE:[60,60]},ZOOM_OUT:{POSITION:[60,0],SIZE:[60,60]},RESET:{POSITION:[120,0],SIZE:[125,60]},ROTATE_LEFT:{POSITION:[245,0],SIZE:[60,60]},ROTATE_RIGHT:{POSITION:[305,0],SIZE:[60,60]},INFOMAIN_DIV:{POSITION:[0,0,1e3],SIZE:[1920,680]},TOOLTIP:{POSITION:[30,0,0],SIZE:[80,60],FONT_SIZE:'20pt "Samsung SVD_Medium"'},PLAY:{POSITION:[10,0],SIZE:[54,54],TOOLTIP_FOCUS_POS:[2,65]},PAUSE:{POSITION:[10,0],SIZE:[54,54],TOOLTIP_FOCUS_POS:[2,65]},BGM_ICON:{POSITION:[1790,0],SIZE:[54,54],TOOLTIP_FOCUS_POS:[1770,65]},SETTING_ICON:{POSITION:[1855,0],SIZE:[54,54],TOOLTIP_FOCUS_POS:[1805,65]},THUMBNAIL_DIMENSIONS:{WIDTH:140,HEIGHT:170,PADDING:10}},720:{SETTING_MENU_BUTTON:{POSITION:[0,40,0],SIZE:[334,40],FONT_SIZE:20,LINE_HEIGHT:40},CHECKLIST_CONTAINER:{FONT_SIZE:20,TOP:3,LEFT:3},CHECKLIST_SPEED:{POSITION:[0,35,0],SIZE:[120,35]},CHECKLIST_LABEL:{POSITION:[0,0,0],SIZE:[40,33]},CHECKLIST_EFFECT:{POSITION:[0,35,0],SIZE:[200,35]},MENU_FRAME:{POSITION:[1110,120,999],SIZE:[120,35],PADDING:0},EFFECT_FRAME:{POSITION:[1033,160,999],SIZE:[200,35],PADDING:0},SLIDER:{WIDTH:1100,POSITION:[53,10,0],THUMB_COUNT:12},IMAGE_SLIDER_CONTAINER:{POSITION:[0,80,999],SIZE:[1267,35]},MUSIC_INFO:{POSITION:[867,587,999],SIZE:[367,33],FONT_SIZE:17,LINE_HEIGHT:33,PADDING:7},SETTING_FRAME:{POSITION:[936,83,665],SIZE:[334,200],PADDING:0},ZOOMROTATE_FRAME:{POSITION:[67,533,999],SIZE:[227,180]},ZOOM_PANEL:{POSITION:[55,0,2],SIZE:[133,133]},MINIMAP_POINTER:{BORDER_WIDTH:1,POSITION:[0,0,2],SIZE:[133,133]},POINTER_BOX:{POSITION:[33,33,2],SIZE:[67,67]},ARROW_TOP:{POSITION:[60,15,2],SIZE:[17,13]},ARROW_DOWN:{POSITION:[60,105,2],SIZE:[17,13]},ARROW_LEFT:{POSITION:[15,60,2],SIZE:[13,17]},ARROW_RIGHT:{POSITION:[107,60,2],SIZE:[13,17]},ZOOMROTATE_PANEL:{POSITION:[0,140,9],SIZE:[250,40]},ZOOM_IN:{POSITION:[0,0,2],SIZE:[40,40]},ZOOM_OUT:{POSITION:[40,0,2],SIZE:[40,40]},RESET:{POSITION:[80,0,2],SIZE:[90,40]},ROTATE_LEFT:{POSITION:[170,0,2],SIZE:[40,40]},ROTATE_RIGHT:{POSITION:[210,0,2],SIZE:[40,40]},INFOMAIN_DIV:{POSITION:[0,0,1e3],SIZE:[1280,454]},TOOLTIP:{POSITION:[0,0,0],SIZE:[60,40],FONT_SIZE:'16pt "Samsung SVD_Medium"'},PLAY:{POSITION:[7,0,0],SIZE:[36,36],TOOLTIP_FOCUS_POS:[0,45]},PAUSE:{POSITION:[7,0],SIZE:[36,36],TOOLTIP_FOCUS_POS:[0,45]},BGM_ICON:{POSITION:[1190,0],SIZE:[36,36],TOOLTIP_FOCUS_POS:[1180,45]},SETTING_ICON:{POSITION:[1235,0],SIZE:[36,36],TOOLTIP_FOCUS_POS:[1193,45]},THUMBNAIL_DIMENSIONS:{WIDTH:93,HEIGHT:113,PADDING:7}}},no_imageAvaialable_url=null,MenuButton=null,CheckListContainer=null,language=null,log=function(t){console.log(t)};$class({$namespace:"caph.stripe.ui.widget.imageViewer",$extends:ComponentBase,$constructor:function(t){log("Image viewer constructor"),t=t||{},self=this,this.$super(t),language=Language.getInstance(),this.focusManager=FocusManager.getInstance(),VDomLookUpTable=VDomLookUpTable.getInstance(),language.getSupportLanguageCodeSet()||language.setLanguage(["en"],"en"),_RESOLUTION=1080>window.innerHeight?{WIDTH:1280,HEIGHT:720}:{WIDTH:1920,HEIGHT:1080},no_imageAvaialable_url="../../../build/2.0.0/stripe/"+_RESOLUTION.HEIGHT+"/broken_image.png",this.dimension=IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT],this.currZoomState=_ZOOM_STATE.NORMAL,this.VISIBLE_THUMB=this.dimension.SLIDER.THUMB_COUNT,this.sliderWidth=this.dimension.SLIDER.WIDTH,this.sliderInterval=this.sliderWidth/(this._playList.list.length-1),this.animTransObj=new caph.animation.Transform,this.visibleTransObj=new caph.animation.Transform,this.animationState=_ANIMATION_STATE.COMPLETE,this.prevState=_IMAGE_VIEWER_STATE.STATE_STOPPED,this._setSlideshowState(_IMAGE_VIEWER_STATE.STATE_STOPPED),this._setSpeed(_SLIDESHOW_SPEED.NORMAL),this._setEffect(_SLIDESHOW_EFFECT.CORNER_WIPE),this.settingItems=[language.getMessage().imageViewer.menuItem.slideshowSpeed.title,language.getMessage().imageViewer.menuItem.slideshowEffect.title,language.getMessage().imageViewer.menuItem.zoomRotate.title,language.getMessage().imageViewer.menuItem.music.title,language.getMessage().imageViewer.menuItem.information.title],_SLIDESHOW_EFFECT_TEXT={CORNER_WIPE:language.getMessage().imageViewer.menuItem.slideshowEffect.options.cornerWipe,FADE_IN_STILL:language.getMessage().imageViewer.menuItem.slideshowEffect.options.fadeInStill,FADE_IN_LEFT:language.getMessage().imageViewer.menuItem.slideshowEffect.options.fadeInLeft,FADE_IN_RIGHT:language.getMessage().imageViewer.menuItem.slideshowEffect.options.fadeInRight,FADE_IN_DOWN:language.getMessage().imageViewer.menuItem.slideshowEffect.options.fadeInDown,FADE_IN_TOP:language.getMessage().imageViewer.menuItem.slideshowEffect.options.fadeInTop,SPIN_FADE_IN:language.getMessage().imageViewer.menuItem.slideshowEffect.options.spinFadeIn},_SLIDESHOW_SPEED_TEXT={SLOW:language.getMessage().imageViewer.menuItem.slideshowSpeed.options.slow,NORMAL:language.getMessage().imageViewer.menuItem.slideshowSpeed.options.normal,FAST:language.getMessage().imageViewer.menuItem.slideshowSpeed.options.fast},this._initCustomComponents(),this._createElement()},_initialize:function(){this.$super(),this.addClass("caph-imageviewer"),this.focusable(!0),this._playList.currentImageIndex=0,this.dimension=null,this.settingDom=null,this.speedContextMenu=null,this.effectContextMenu=null,this.zoomRotateArea=null,this.zoomPanel=null,this.miniMapImg=null,this.zoomRotatePanel=null,this.miniMapPointer=null,this.pointerBox=null,this.isEnter=!1,this.arrowTop=null,this.arrowDown=null,this.arrowLeft=null,this.arrowRight=null,this.currZoomState=null,this.calbackQueueTimer=null,this.infoPopup=null,this.infoPopupTimer=null,this.msgOkBtn=null,this.imgSlider=null,this.VISIBLE_THUMB=null,this.slideIndex=0,this.frontImageDom=null,this.backImageDom=null,this.frontImage=null,this.backImage=null,this.swichDomFlag=0,this.animTransObj=null,this.visibleTransObj=null,this.animationState=null,this.infoView=null,this.tooltip=null,this.playIcon=null,this.pauseIcon=null,this.settingIcon=null,this.playerIcon=null,this.playerOffIcon=null,this.slider=null,this.audioPlayer=null,this.musicInfo=null,this.settingItems=null,this.prevState=null,this.sliderWidth=null,this.sliderInterval=null,this.hideMenuTimer=null,this.hideSliderTimer=null
},setOption:function(t){if(void 0===t&&(t={}),!(void 0!==t.itemList&&t.hasOwnProperty("itemList")&&caph.isObject(t.itemList)&&t.itemList.hasOwnProperty("items")&&caph.isObject(t.itemList.items)))throw"Error: Items are not found ..Please provide items.";if(!t.itemList.items.length)throw"Error: Items are empty.";this.callback=void 0!==t.callback&&caph.isFunction(t.callback)?t.callback:function(){log("No CallBack provided!!")},this._playList.list=t.itemList.items,this.audioList=t.audioList,this.$super(t)},_initCustomComponents:function(){MenuButton=$class({$extends:Button,$constructor:function(t){this.$super(t),this.setProperty({id:t.id,style:{border:"1px solid rgba(255,255,255,.1)",width:IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT].SETTING_MENU_BUTTON.SIZE[0]+"px",fontSize:IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT].SETTING_MENU_BUTTON.FONT_SIZE+"px",lineHeight:IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT].SETTING_MENU_BUTTON.LINE_HEIGHT+"px",color:"rgba(255, 255, 255, 0.6)"}})},onfocus:function(){this.focus&&(this.addClass("submenuFocus"),this._children[0].setStyle({color:"#464646"}))},onblur:function(){this.removeClass("submenuFocus"),this._children[0].setStyle({color:"rgba(255, 255, 255, 0.6)"})},onclick:function(t){this._update(t)},onkeydown:function(t){var e=this.getProperty("innerText").split(":")[0];t.key().enter&&this._update(t),t.key().up&&e===self.settingItems[0]&&t.stopPropagation(),t.key().down&&e===self.settingItems[4]&&t.stopPropagation(),(t.key().left||t.key().right)&&t.stopPropagation()},_update:function(){self._hideContextMenu();var t=this.getProperty("innerText").split(":")[0];switch(t){case self.settingItems[0]:self.speedContextMenu.visibility(!0),self.focusManager.focus(self.speedContextMenu._children[0]);break;case self.settingItems[1]:self.effectContextMenu.visibility(!0),self.focusManager.focus(self.effectContextMenu._children[0]);break;case self.settingItems[2]:self.prevState=self._getSlideshowState(),self.pauseIcon.visibility()&&self.pauseIcon._onclick(),self.zoomRotateArea.visibility()||(self._setZoom(),self.zoomRotateArea.visibility(!0),self.settingDom.visibility(!1),self.focusManager.focus(self.zoomRotatePanel._children[0]));break;case self.settingItems[3]:if(self.playerIcon.visibility()||self.playerOffIcon.visibility())self.audioPlayer.stop();else{if(caph.isNull(self.audioPlayer)){var e={playList:self.audioList,audioControls:!1,deviceProfile:0};self.audioPlayer=AudioPlayer.getPlayerInstance(e,{position:[0,0]}),self.audioPlayer.setRepeatMode("all"),self.audioPlayer.addListener("statechanged",function(t){switch(t){case"playing":self.playerIcon.visibility(!0),self.playerIcon.focusable(!0),self.playerOffIcon.visibility(!1),self.playerOffIcon.focusable(!1);var e=self.audioPlayer.getCurItem(),i=e.title||"track info not provided";self.musicInfo.visibility(!0),self.musicInfo.setProperty({innerHTML:language.getMessage().imageViewer.menuItem.music.options.nowPlaying+" : "+i});break;case"paused":self.playerIcon.visibility(!1),self.playerIcon.focusable(!1),self.playerOffIcon.visibility(!0),self.playerOffIcon.focusable(!0);break;case"stopped":self.playerIcon.visibility(!1),self.playerIcon.focusable(!1),self.playerOffIcon.visibility(!1),self.playerOffIcon.focusable(!1),self.musicInfo.visibility(!1);break;default:}})}self.settingDom.visibility(!1),self.focusManager.focus(self.playerIcon),self.audioPlayer.play()}break;case self.settingItems[4]:self._showInfoPopup();break;default:}}}),CheckListContainer=$class({$extends:ComponentBase,$constructor:function(t){this.$super(t),this.focusable(!0),this.focus=t.focus||!1,this.text=t.text,this._createContainer(t),this.setProperty({id:t.id,itemIndex:t.itemIndex,style:{border:"1px solid rgba(255,255,255,0.1)",width:t.width+"px",fontSize:IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT].CHECKLIST_CONTAINER.FONT_SIZE+"px"}})},_createContainer:function(t){var e=this;e.checkbox=new CheckBox({hasBox:t.hasBox,checked:t.checked,dom:{style:{marginTop:IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT].CHECKLIST_CONTAINER.TOP+"px",marginLeft:IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT].CHECKLIST_CONTAINER.LEFT+"px",position:"relative","float":"left"}}}),e.checkbox.on({statechange:function(){e._change()}}),e.label=new Label({text:t.text,align:{horizontal:"left",vertical:"middle"},size:[t.width-IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT].CHECKLIST_LABEL.SIZE[0],IMAGEVIEWER_DIMENSION[_RESOLUTION.HEIGHT].CHECKLIST_LABEL.SIZE[1]],dom:{style:{position:"relative",color:"white"}}}),e.addChild(this.checkbox),e.addChild(this.label)},_change:function(){this.state=this.text+" State : "+this.checkbox.isChecked()},_update:function(){this.isEnable&&(this._toggleGroup(),this.checkbox.setChecked(!0),this._updateValue())},_updateValue:function(){var id=this.getProperty("id"),splitArr=id.split("_"),group=splitArr.shift(),text=splitArr.join("_").toUpperCase();switch(group){case"effect":self._setEffect(eval("_SLIDESHOW_EFFECT."+text)),self.settingDom._children[1].setContent(self.settingItems[1]+":"+self._getEffectName()),self.effectContextMenu.visibility(!1),self.focusManager.focus(self.settingDom._children[1]);break;case"speed":self._setSpeed(eval("_SLIDESHOW_SPEED."+text)),VDomLookUpTable.getDom(self.infoView._children[1]).innerText=self._getSpeedText(),self.settingDom._children[0].setContent(self.settingItems[0]+":"+self._getSpeedText()),self.speedContextMenu.visibility(!1),self.focusManager.focus(self.settingDom._children[0]);break;default:}},_toggleGroup:function(){var t,e=this._parent,i=e.getChildren(),n=i.length;for(t=0;n>t;t++){var s=i[t].getChildren();s.length&&s[0].setChecked(!1)}},onfocus:function(){this.focus&&(this.addClass("submenuFocus"),this.label.setStyle({color:"#464646"}))},onblur:function(){this.removeClass("submenuFocus"),this.label.setStyle({color:"rgba(255, 255, 255, 0.6)"})},onkeydown:function(t){var e=this.getProperty("itemIndex");t.key().enter&&this.isEnable()&&this._update(),t.key().up&&0===e&&t.stopPropagation(),t.key().down&&e===this._parent._children.length-1&&t.stopPropagation(),(t.key().left||t.key().right)&&t.stopPropagation()},onclick:function(){this.focus&&this._update()}})},onkeydown:function(t){var e=t.detail.keyCode;switch(log("KEYDOWN>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),log("Image viewer onkeydown>> "+e),self.zoomRotateArea.visibility()||"none"!==self._children[0].getStyle("display")||(self._showControllerMenu(),t.stopPropagation()),e){case _KEY_CODE.RETURN:case _KEY_CODE.RETURN_ORSAY:case _KEY_CODE.RETURN_TV:self.speedContextMenu.visibility()?(self.speedContextMenu.visibility(!1),self.focusManager.focus(self.settingDom._children[0])):self.effectContextMenu.visibility()?(self.effectContextMenu.visibility(!1),self.focusManager.focus(self.settingDom._children[1])):self.zoomRotateArea.visibility()?(self.zoomRotateArea.visibility(!1),self.focusManager.focus(self.settingDom._children[2])):self.infoPopup.visibility()?self._hideInfoPopup():self.imgSlider.visibility()?(self._hideImageSlider(),self.focusManager.focus(self.slider)):self.settingDom.visibility()?(self.settingDom.visibility(!1),self.focusManager.focus(self.settingIcon)):(log("Destroy and Return"),self._close()),t.preventDefault();break;default:}},onclick:function(t){log("Image viewer onclick"),"none"===self._children[0].getStyle("display")&&(self._showControllerMenu(),t.stopPropagation())},_createElement:function(){log("Image viewer _createElement"),this.position(0,0,999);var t=this._createMenu(),e=this._createSlideShowDom();this.imgSlider=this._createImageSlider(),this.settingDom=this._createSettingsFrame(),this.speedContextMenu=this._createSpeedContextMenu(),this.effectContextMenu=this._createEffectContextMenu(),this.zoomRotateArea=this._createZoomRotateArea(),this.infoPopup=this._createinfoPopup(),this.musicInfo=new ComponentBase({position:self.dimension.MUSIC_INFO.POSITION,size:self.dimension.MUSIC_INFO.SIZE,dom:{id:"nowPlayingArea",style:{padding:self.dimension.MUSIC_INFO.PADDING+"px",fontSize:self.dimension.MUSIC_INFO.FONT_SIZE+"px",lineHeight:self.dimension.MUSIC_INFO.LINE_HEIGHT+"px",color:"#FFF",visibility:"hidden",opacity:.6}}}),this.addChild([t,e,this.musicInfo,this.settingDom,this.speedContextMenu,this.effectContextMenu,this.infoPopup,this.zoomRotateArea,this.imgSlider])},_createMenu:function(){log("Image viewer _createMenu");var t=new View;t.position(0,0,999),t.addClass("caph-imageviewer-view"),this.infoView=this._createInfoView();var e=this._createControllerView();return t.addChild([this.infoView,e]),t},_createInfoView:function(){log("Image viewer _createInfoView");var t=new View,e=new View,i=new View,n=new View,s=new View;return e.addClass("fileinfo"),i.addClass("dateinfo"),n.addClass("speedinfo"),s.addClass("filecountinfo"),t.addChild([e,n,i,s]),t.addClass("caph-imageviewer-info-view"),t},_createControllerView:function(){log("Image viewer _createControllerView");var t=new View({dom:{id:"controllerMenu"}});return this.tooltip=new Tooltip({text:language.getMessage().imageViewer.tooltip.play,direction:caph.ui.base.component.Tooltip.TOP,align:caph.ui.base.component.Tooltip.CENTER,size:self.dimension.TOOLTIP.SIZE}),this.tooltip.setTextFont(self.dimension.TOOLTIP.FONT_SIZE),this.tooltip.setTailDirection(caph.ui.base.component.Tooltip.TOP),this.tooltip.setTailAlign(caph.ui.base.component.Tooltip.CENTER),this.playIcon=new Button({size:self.dimension.PLAY.SIZE,position:self.dimension.PLAY.POSITION,contents:Icon.play(),on:{click:function(){self._callBackOnAnimationComplete(function(){self._startSlideshow()})},focus:function(){self.tooltip.position(self.dimension.PLAY.TOOLTIP_FOCUS_POS[0],self.dimension.PLAY.TOOLTIP_FOCUS_POS[1]),self.tooltip.setTailAlign(caph.ui.base.component.Tooltip.CENTER),self.tooltip.setText(language.getMessage().imageViewer.tooltip.play),self.tooltip.show()},blur:function(){self.tooltip.hide()},keydown:function(t){"block"===self._children[0].getStyle("display")&&(self._resetControllerMenuTimer(),t.key().enter&&self._callBackOnAnimationComplete(function(){self._startSlideshow()}),(t.key().up||t.key().down)&&t.stopPropagation())}}}),this.playIcon.addClass("custom-icon"),this.pauseIcon=new Button({size:self.dimension.PAUSE.SIZE,position:self.dimension.PAUSE.POSITION,contents:Icon.pause(),dom:{style:{visibility:"hidden"}},on:{click:function(){self._stopSlideshow(),self.focusManager.focus(self.playIcon)},focus:function(){self.tooltip.position(self.dimension.PAUSE.TOOLTIP_FOCUS_POS[0],self.dimension.PAUSE.TOOLTIP_FOCUS_POS[1]),self.tooltip.setTailAlign(caph.ui.base.component.Tooltip.CENTER),self.tooltip.setText(language.getMessage().imageViewer.tooltip.pause),self.tooltip.show()},blur:function(){self.tooltip.hide()},keydown:function(t){"block"===self._children[0].getStyle("display")&&(self._resetControllerMenuTimer(),t.key().enter&&(self._stopSlideshow(),self.focusManager.focus(self.playIcon)),(t.key().up||t.key().down)&&t.stopPropagation())}}}),this.pauseIcon.addClass("custom-icon"),this.pauseIcon.visibility(!1),this.pauseIcon.focusable(!1),this.slider=new Slider({width:self.sliderWidth,position:self.dimension.SLIDER.POSITION,value:0,dom:{id:"sliderComp"}}),this.slider.on({click:function(t){self.slider._isEnter&&(self._stopSlideshow(),self.imgSlider.visibility()||(self.slider._setEnterStatus(!1),self._callBackOnAnimationComplete(self._showImageSlider),t.stopPropagation()))},keydown:function(t){"block"===self._children[0].getStyle("display")?(t.key().enter&&self.slider._isEnter&&(self._stopSlideshow(),self.imgSlider.visibility()||(self.slider._setEnterStatus(!1),self._callBackOnAnimationComplete(self._showImageSlider),t.stopPropagation())),t.key().left&&self.slider._isEnter&&self.imgSlider.visibility()&&self._moveSlider(t),t.key().right&&self.slider._isEnter&&self.imgSlider.visibility()&&self._moveSlider(t),t.key().down&&self.slider._isEnter&&self.imgSlider.visibility()&&(self.imgSlider._children[0]._children[self._playList.currentImageIndex].focus(),t.stopPropagation())):(self._showControllerMenu(),t.stopPropagation())}}),this.playerIcon=new Button({size:self.dimension.BGM_ICON.SIZE,position:self.dimension.BGM_ICON.POSITION,contents:Icon.bgm(),dom:{style:{visibility:"hidden"}},on:{click:function(){self._pauseMusic(),self.focusManager.focus(self.playerOffIcon)},keydown:function(t){"block"===self._children[0].getStyle("display")&&(self._resetControllerMenuTimer(),(t.key().up||t.key().down)&&t.stopPropagation(),t.key().enter&&(self._pauseMusic(),self.focusManager.focus(self.playerOffIcon)))},focus:function(){self.tooltip.position(self.dimension.BGM_ICON.TOOLTIP_FOCUS_POS[0],self.dimension.BGM_ICON.TOOLTIP_FOCUS_POS[1]),self.tooltip.setTailAlign(caph.ui.base.component.Tooltip.CENTER),self.tooltip.setText(language.getMessage().imageViewer.tooltip.play),self.tooltip.show()},blur:function(){self.tooltip.hide()}}}),this.playerIcon.addClass("custom-icon"),this.playerIcon.focusable(!1),this.playerOffIcon=new Button({size:self.dimension.BGM_ICON.SIZE,position:self.dimension.BGM_ICON.POSITION,contents:Icon.bgmOff(),dom:{style:{visibility:"hidden"}},on:{click:function(){self._resumeMusic(),self.focusManager.focus(self.playerIcon)},keydown:function(t){"block"===self._children[0].getStyle("display")&&(self._resetControllerMenuTimer(),(t.key().up||t.key().down)&&t.stopPropagation(),t.key().enter&&(self._resumeMusic(),self.focusManager.focus(self.playerIcon)))},focus:function(){self.tooltip.position(self.dimension.BGM_ICON.TOOLTIP_FOCUS_POS[0],self.dimension.BGM_ICON.TOOLTIP_FOCUS_POS[1]),self.tooltip.setTailAlign(caph.ui.base.component.Tooltip.CENTER),self.tooltip.setText(language.getMessage().imageViewer.tooltip.pause),self.tooltip.show()},blur:function(){self.tooltip.hide()}}}),this.playerOffIcon.addClass("custom-icon"),this.playerOffIcon.visibility(!1),this.playerOffIcon.focusable(!1),this.settingIcon=new Button({size:self.dimension.SETTING_ICON.SIZE,position:self.dimension.SETTING_ICON.POSITION,contents:Icon.setting(),on:{click:function(){self._toggleOptionsMenu()},focus:function(){self.tooltip.position(self.dimension.SETTING_ICON.TOOLTIP_FOCUS_POS[0],self.dimension.SETTING_ICON.TOOLTIP_FOCUS_POS[1]),self.tooltip.setTailAlign(caph.ui.base.component.Tooltip.RIGHT),self.tooltip.setText(language.getMessage().imageViewer.tooltip.options),self.tooltip.show()},blur:function(){self.tooltip.hide()},keydown:function(t){"block"===self._children[0].getStyle("display")&&(self._resetControllerMenuTimer(),(t.key().up||t.key().down)&&t.stopPropagation(),t.key().enter&&self._toggleOptionsMenu())}}}),this.settingIcon.addClass("custom-icon"),t.addChild([this.playIcon,this.tooltip,this.pauseIcon,this.slider,this.playerIcon,this.playerOffIcon,this.settingIcon]),t.addClass("caph-imageviewer-controller-view"),t},_createSlideShowDom:function(){log("Image viewer _createSlideShowDom");var t=new View({id:"slideshowDom"});return t.addClass("caph-ui-imageslideshow"),this.frontImageDom=new ComponentBase,this.frontImageDom.setProperty({id:"frontImageDomId",innerHTML:'<img id="frontImage" width="100%" height="100%"></img>',style:{height:_RESOLUTION.HEIGHT+"px",width:_RESOLUTION.WIDTH+"px"}}),this.frontImageDom.addClass("caph-ui-imageslideshow"),this.backImageDom=new ComponentBase,this.backImageDom.setProperty({id:"backImageDomId",innerHTML:'<img id="backImage" width="100%" height="100%"></img>',style:{height:_RESOLUTION.HEIGHT+"px",width:_RESOLUTION.WIDTH+"px"}}),this.backImageDom.addClass("caph-ui-imageslideshow"),t.addChild([this.backImageDom,this.frontImageDom]),t},_createSettingsFrame:function(){log("Image viewer _createSettingsFrame");var t,e=new View({dom:{id:"settingFrameContainer",style:{outline:"2px solid rgba(24,29,35,.95)",border:"2px solid rgba(89,107,129,.9)",padding:self.dimension.SETTING_FRAME.PADDING+"px",boxShadow:"inset 2px 2px 2px rgba(89,107,129,.95),inset -2px 2px 2px rgba(89,107,129,.95),inset 2px -2px 2px rgba(89,107,129,.95),inset -2px -2px 2px rgba(89,107,129,.95)",backgroundColor:"#1f2b3d"}}});for(t=0;5>t;t++)switch(t){case 0:e.addChild(this._createSettingItem(t,this.settingItems[t]+":"+self._getSpeedText()));break;case 1:e.addChild(this._createSettingItem(t,this.settingItems[t]+":"+self._getEffectName()));break;default:e.addChild(this._createSettingItem(t,this.settingItems[t]))}return e.size(self.dimension.SETTING_FRAME.SIZE),e.position(self.dimension.SETTING_FRAME.POSITION[0],self.dimension.SETTING_FRAME.POSITION[1],self.dimension.SETTING_FRAME.POSITION[2]),e.visibility(!1),e},_createSettingItem:function(t,e){log("Image viewer _createSettingItem");var i=new MenuButton({type:"button",size:self.dimension.SETTING_MENU_BUTTON.SIZE,dom:{id:"item"+t,itemIndex:t+1}});return i.addClass("settingFrameButton"),i.y(self.dimension.SETTING_MENU_BUTTON.POSITION[1]*t),i.setContent(e),i},_createSpeedContextMenu:function(){log("Image viewer _createSpeedContextMenu");var t,e=new View({dom:{id:"speedContextMenu",style:{outline:"2px solid rgba(24,29,35,.95)",border:"2px solid rgba(89,107,129,.9)",padding:self.dimension.MENU_FRAME.PADDING+"px",boxShadow:"inset 2px 2px 2px rgba(89,107,129,.95),inset -2px 2px 2px rgba(89,107,129,.95),inset 2px -2px 2px rgba(89,107,129,.95),inset -2px -2px 2px rgba(89,107,129,.95)",backgroundColor:"#1f2b3d"}}}),i=0,n=this._getSpeedText();for(t in _SLIDESHOW_SPEED_TEXT){var s=new CheckListContainer({focus:!0,width:self.dimension.CHECKLIST_SPEED.SIZE[0],position:[self.dimension.CHECKLIST_SPEED.POSITION[0],self.dimension.CHECKLIST_SPEED.POSITION[1]*i],text:_SLIDESHOW_SPEED_TEXT[t],hasBox:!1,id:"speed_"+caph.toCamelCase(t),itemIndex:i,checked:n===_SLIDESHOW_SPEED_TEXT[t]?!0:!1});e.addChild(s),i++}return e.size([self.dimension.MENU_FRAME.SIZE[0],self.dimension.MENU_FRAME.SIZE[1]*i]),e.position(self.dimension.MENU_FRAME.POSITION[0],self.dimension.MENU_FRAME.POSITION[1],self.dimension.MENU_FRAME.POSITION[2]),e.visibility(!1),e},_createEffectContextMenu:function(){log("Image viewer _createEffectContextMenu");var t=new View({dom:{id:"effectContextMenu",style:{outline:"2px solid rgba(24,29,35,.95)",border:"2px solid rgba(89,107,129,.9)",padding:self.dimension.EFFECT_FRAME.PADDING+"px",boxShadow:"inset 2px 2px 2px rgba(89,107,129,.95),inset -2px 2px 2px rgba(89,107,129,.95),inset 2px -2px 2px rgba(89,107,129,.95),inset -2px -2px 2px rgba(89,107,129,.95)",backgroundColor:"#1f2b3d"}}}),e=0,i=this._getEffectName();for(var n in _SLIDESHOW_EFFECT_TEXT){var s=new CheckListContainer({focus:!0,width:self.dimension.CHECKLIST_EFFECT.SIZE[0],position:[self.dimension.CHECKLIST_EFFECT.POSITION[0],self.dimension.CHECKLIST_EFFECT.POSITION[1]*e],text:_SLIDESHOW_EFFECT_TEXT[n],hasBox:!1,id:"effect_"+caph.toCamelCase(n),itemIndex:e,checked:i===_SLIDESHOW_EFFECT_TEXT[n]?!0:!1});t.addChild(s),e++}return t.size([self.dimension.EFFECT_FRAME.SIZE[0],self.dimension.EFFECT_FRAME.SIZE[1]*e]),t.position(self.dimension.EFFECT_FRAME.POSITION[0],self.dimension.EFFECT_FRAME.POSITION[1],self.dimension.EFFECT_FRAME.POSITION[2]),t.visibility(!1),t},_createZoomRotateArea:function(){log("Image viewer _createZoomRotateArea");var t=new View({dom:{id:"zoomRotateFrameContainer",style:{padding:"0px"}}});return t.size(self.dimension.ZOOMROTATE_FRAME.SIZE),t.position(self.dimension.ZOOMROTATE_FRAME.POSITION[0],self.dimension.ZOOMROTATE_FRAME.POSITION[1],self.dimension.ZOOMROTATE_FRAME.POSITION[2]),this.zoomPanel=this._createZoomPanel(),this.zoomRotatePanel=this._createZoomRotatePanel(),t.addChild([this.zoomPanel,this.zoomRotatePanel]),t.visibility(!1),t},_createZoomPanel:function(){log("Image viewer _createZoomPanel");var t=new ComponentBase({dom:{id:"zoomPointerContainer"}}),e=new ComponentBase({dom:{innerHTML:'<img height="100%" width="100%" id="zoomMinimapImg"></img>'}});return e.setStyle({height:"100%",width:"100%"}),t.addChild(e),this.miniMapPointer=this._createMinimapPointer(),t.addChild(this.miniMapPointer),t.addClass("caph-ui-imageslideshow-zoompanel"),t.size(self.dimension.ZOOM_PANEL.SIZE),t.position(self.dimension.ZOOM_PANEL.POSITION[0],self.dimension.ZOOM_PANEL.POSITION[1],self.dimension.ZOOM_PANEL.POSITION[2]),t},_createMinimapPointer:function(){log("Image viewer _createMinimapPointer");var t=new ComponentBase({dom:{id:"miniMapPointer"},on:{click:function(){self.isEnter||(self.isEnter=!0,self._hideShowPointerArrow(!0))},focus:function(){self.pointerBox.addClass("focused")},blur:function(){self.pointerBox.removeClass("focused"),self.isEnter=!1,self._resetAnimatingDom(),self.miniMapPointer.position(0,0,0),self._hideShowPointerArrow(!1)},keydown:function(t){var e=self._getDomList(self.swichDomFlag),i=e.visible,n=e.animating,s=e.visImg,o=self.currZoomState;if(i.scale(),t.key().enter&&(self.isEnter||(self.isEnter=!0,self._hideShowPointerArrow(!0))),t.key().up){if(!self.isEnter)return t.stopPropagation(),void 0;var r=-self.pointerBox.y();if(o!==_ZOOM_STATE.NORMAL&&self.miniMapPointer.y()>r){var a=parseFloat((s.height*self.currZoomState-s.height)/10,10),h=parseFloat(self.miniMapPointer.size()[1]/self.pointerBox.size()[1]*self.pointerBox.size()[1]/(10*self.currZoomState),10);log("moveUpminiPix>>> "+h),h=h>self.miniMapPointer.y()-r?self.miniMapPointer.y()-r:h,self.miniMapPointer.translate(0,-h,0),new caph.animation.Transform(VDomLookUpTable.getDom(i)).move(0,a,1).set(),log("self.miniMapPointer.y()>>> "+self.miniMapPointer.y())}}if(t.key().down){if(!self.isEnter)return self._hideShowPointerArrow(!1),self.focusManager.focus(self.zoomRotatePanel._children[2]),t.stopPropagation(),void 0;var u=self.pointerBox.y()-self.dimension.MINIMAP_POINTER.BORDER_WIDTH;if(log("down toMove_Max"+u),o!==_ZOOM_STATE.NORMAL&&u>self.miniMapPointer.y()){var c=parseFloat((s.height*self.currZoomState-s.height)/10,10),l=parseFloat(self.miniMapPointer.size()[1]/self.pointerBox.size()[1]*self.pointerBox.size()[1]/(10*self.currZoomState),10);log("moveUpminiPix"+l),l=l>u-self.miniMapPointer.y()?u-self.miniMapPointer.y():l,self.miniMapPointer.translate(0,l,0),new caph.animation.Transform(VDomLookUpTable.getDom(i)).move(0,-c,1).set(),log("self.miniMapPointer.y()"+self.miniMapPointer.y())}}if(t.key().left){if(!self.isEnter)return t.stopPropagation(),void 0;if(r=-self.pointerBox.x(),log("key code left toMove_Max"+u),o!==_ZOOM_STATE.NORMAL&&self.miniMapPointer.x()>r){var c=parseFloat((s.width*self.currZoomState-s.width)/10,10),p=parseFloat(self.miniMapPointer.size()[1]/self.pointerBox.size()[1]*self.pointerBox.size()[1]/(10*self.currZoomState),10);log("moveUpminiPix"+p),p=p>self.miniMapPointer.x()-r?self.miniMapPointer.x()-r:p,self.miniMapPointer.translate(-p,0,0),new caph.animation.Transform(VDomLookUpTable.getDom(i)).move(c,0,1).set(),log("self.miniMapPointer.y()"+self.miniMapPointer.y())}}if(t.key().right){if(!self.isEnter)return t.stopPropagation(),void 0;if(u=self.pointerBox.x()-self.dimension.MINIMAP_POINTER.BORDER_WIDTH,log("right toMove_Max"+u),o!==_ZOOM_STATE.NORMAL&&u>self.miniMapPointer.x()){var c=parseFloat((s.width*self.currZoomState-s.width)/10,10),d=parseFloat(self.miniMapPointer.size()[1]/self.pointerBox.size()[1]*self.pointerBox.size()[1]/(10*self.currZoomState),10);log("moveUpminiPix"+d),d=d>u-self.miniMapPointer.x()?u-self.miniMapPointer.x():d,self.miniMapPointer.translate(d,0,0),new caph.animation.Transform(VDomLookUpTable.getDom(i)).move(-c,0,1).set(),log("self.miniMapPointer.y()"+self.miniMapPointer.y())}}switch(t.detail.keyCode){case _KEY_CODE.RETURN:case _KEY_CODE.RETURN_ORSAY:case _KEY_CODE.RETURN_TV:self.isEnter?(self.isEnter=!1,self._hideShowPointerArrow(!1),new caph.animation.Transform(VDomLookUpTable.getDom(i)).move(0,0,1).set(),new caph.animation.Transform(VDomLookUpTable.getDom(n)).move(0,0,0).set(),self.miniMapPointer.position(0,0,0)):(self.zoomRotateArea.visibility(!1),self._resetAnimatingDom(),self._resetSlideshowState()),t.preventDefault();break;default:}t.stopPropagation()}}});return self.pointerBox=new ComponentBase({dom:{id:"pointerBox",style:{border:"2px solid #ffffff"}}}),self.pointerBox.size(self.dimension.POINTER_BOX.SIZE),self.pointerBox.position(self.dimension.POINTER_BOX.POSITION[0],self.dimension.POINTER_BOX.POSITION[1],self.dimension.POINTER_BOX.POSITION[2]),self.arrowTop=new ComponentBase,self.arrowTop.size(self.dimension.ARROW_TOP.SIZE),self.arrowTop.position(self.dimension.ARROW_TOP.POSITION[0],self.dimension.ARROW_TOP.POSITION[1],self.dimension.ARROW_TOP.POSITION[2]),self.arrowTop.addClass("caph-ui-imageslideshow-arrow-top"),self.arrowDown=new ComponentBase,self.arrowDown.size(self.dimension.ARROW_DOWN.SIZE),self.arrowDown.position(self.dimension.ARROW_DOWN.POSITION[0],self.dimension.ARROW_DOWN.POSITION[1],self.dimension.ARROW_DOWN.POSITION[2]),self.arrowDown.addClass("caph-ui-imageslideshow-arrow-down"),self.arrowLeft=new ComponentBase,self.arrowLeft.size(self.dimension.ARROW_LEFT.SIZE),self.arrowLeft.position(self.dimension.ARROW_LEFT.POSITION[0],self.dimension.ARROW_LEFT.POSITION[1],self.dimension.ARROW_LEFT.POSITION[2]),self.arrowLeft.addClass("caph-ui-imageslideshow-arrow-left"),self.arrowRight=new ComponentBase,self.arrowRight.size(self.dimension.ARROW_RIGHT.SIZE),self.arrowRight.position(self.dimension.ARROW_RIGHT.POSITION[0],self.dimension.ARROW_RIGHT.POSITION[1],self.dimension.ARROW_RIGHT.POSITION[2]),self.arrowRight.addClass("caph-ui-imageslideshow-arrow-right"),t.addChild([self.pointerBox,self.arrowTop,self.arrowDown,self.arrowLeft,self.arrowRight]),t.size(self.dimension.MINIMAP_POINTER.SIZE),t.position(self.dimension.MINIMAP_POINTER.POSITION[0],self.dimension.MINIMAP_POINTER.POSITION[1],self.dimension.MINIMAP_POINTER.POSITION[2]),t.addClass("caph-ui-imageslideshow-minimapPointer"),t.focusable(!0),t},_hideShowPointerArrow:function(t){log("Image viewer _hideShowPointerArrow"),self.arrowTop.visibility(t),self.arrowDown.visibility(t),self.arrowLeft.visibility(t),self.arrowRight.visibility(t)},_createZoomRotatePanel:function(){log("Image viewer _createZoomRotatePanel");var t=new ComponentBase({dom:{id:"zoomRotateControl",style:{padding:"0px",background:"rgb(31, 43, 61)"}},on:{keydown:function(t){switch(t.detail.keyCode){case _KEY_CODE.RETURN:case _KEY_CODE.RETURN_ORSAY:case _KEY_CODE.RETURN_TV:self.zoomRotateArea.visibility(!1),self._resetAnimatingDom(),self._resetSlideshowState(),t.preventDefault(),t.stopPropagation();break;default:}}}}),e=new Button({size:self.dimension.ZOOM_IN.SIZE,position:self.dimension.ZOOM_IN.POSITION,contents:Icon.zoomIn(),on:{click:function(){self._zoomInSlideshowImage()},keydown:function(t){t.key().enter&&self._zoomInSlideshowImage(),t.key().left&&t.stopPropagation(),t.key().up&&(self.focusManager.focus(self.miniMapPointer),t.stopPropagation())}}}),i=new Button({size:self.dimension.ZOOM_OUT.SIZE,position:self.dimension.ZOOM_OUT.POSITION,contents:Icon.zoomOut(),on:{click:function(){self._zoomOutSlideshowImage()},keydown:function(t){t.key().enter&&self._zoomOutSlideshowImage(),t.key().up&&(self.focusManager.focus(self.miniMapPointer),t.stopPropagation())}}}),n=new Button({size:self.dimension.RESET.SIZE,position:self.dimension.RESET.POSITION,contents:language.getMessage().imageViewer.menuItem.zoomRotate.options.reset,on:{click:function(){self._callBackOnAnimationComplete(function(){self._setSlideshowState(_IMAGE_VIEWER_STATE.STATE_PAUSED),self._resetAnimatingDom()})},focus:function(t){t.stopPropagation()},blur:function(){},keydown:function(t){t.key().enter&&self._callBackOnAnimationComplete(function(){self._setSlideshowState(_IMAGE_VIEWER_STATE.STATE_PAUSED),self._resetAnimatingDom()}),t.key().up&&(self.focusManager.focus(self.miniMapPointer),t.stopPropagation())}}}),s=new Button({size:self.dimension.ROTATE_LEFT.SIZE,position:self.dimension.ROTATE_LEFT.POSITION,contents:Icon.rotateLeft(),on:{click:function(){self._rotateLeftSlideshowImage()},keydown:function(t){t.key().enter&&self._rotateLeftSlideshowImage(),t.key().up&&(self.focusManager.focus(self.miniMapPointer),t.stopPropagation())}}}),o=new Button({size:self.dimension.ROTATE_RIGHT.SIZE,position:self.dimension.ROTATE_RIGHT.POSITION,contents:Icon.rotateRight(),on:{click:function(){self._rotateRightSlideshowImage()},keydown:function(t){t.key().enter&&self._rotateRightSlideshowImage(),t.key().up&&(self.focusManager.focus(self.miniMapPointer),t.stopPropagation()),t.key().right&&t.stopPropagation()}}});return e.addClass("custom-icon"),i.addClass("custom-icon"),o.addClass("custom-icon"),s.addClass("custom-icon"),t.addChild([e,i,n,s,o]),t.size(self.dimension.ZOOMROTATE_PANEL.SIZE),t.position(self.dimension.ZOOMROTATE_PANEL.POSITION[0],self.dimension.ZOOMROTATE_PANEL.POSITION[1],self.dimension.ZOOMROTATE_PANEL.POSITION[2]),t},_setZoom:function(){if(log("Image viewer _setZoom"),self.miniMapImg=document.getElementById("zoomMinimapImg"),self._hideShowPointerArrow(!1),self.miniMapImg){var t=self._getDomList(self.swichDomFlag),e=this.animationState===_ANIMATION_STATE.COMPLETE?t.visImg:t.animImg;self.miniMapImg.src=e.src}},_zoomInSlideshowImage:function(){if(log("Image viewer _zoomInSlideshowImage"),self.animationState===_ANIMATION_STATE.COMPLETE){var t=self._getDomList(self.swichDomFlag),e=t.visible,i=self.currZoomState;switch(i){case _ZOOM_STATE.NORMAL:self.currZoomState=_ZOOM_STATE.ZOOM_2X,new caph.animation.Transform(VDomLookUpTable.getDom(e)).scale(2,2,1).set();break;case _ZOOM_STATE.ZOOM_2X:self.currZoomState=_ZOOM_STATE.ZOOM_4X,new caph.animation.Transform(VDomLookUpTable.getDom(e)).scale(4,4,1).set();break;case _ZOOM_STATE.ZOOM_4X:break;default:log("no Zoom status matched check implementation code")}}},_zoomOutSlideshowImage:function(){if(log("Image viewer _zoomOutSlideshowImage"),self.animationState===_ANIMATION_STATE.COMPLETE){var t=self._getDomList(self.swichDomFlag),e=t.visible,i=self.currZoomState;switch(i){case _ZOOM_STATE.ZOOM_2X:self.currZoomState=_ZOOM_STATE.NORMAL,new caph.animation.Transform(VDomLookUpTable.getDom(e)).scale(.5,.5,1).set();break;case _ZOOM_STATE.ZOOM_4X:self.currZoomState=_ZOOM_STATE.ZOOM_2X,new caph.animation.Transform(VDomLookUpTable.getDom(e)).scale(.25,.25,1).set();break;case _ZOOM_STATE.NORMAL:break;default:log("no Zoom status matched check implementation code")}}},_rotateLeftSlideshowImage:function(){if(log("Image viewer _rotateLeftSlideshowImage"),self.animationState===_ANIMATION_STATE.COMPLETE){var t=self._getDomList(self.swichDomFlag),e=t.visible,i=t.animating;caph.dom._style.set(VDomLookUpTable.getDom(i),"opacity",0),new caph.animation.Transform(VDomLookUpTable.getDom(e)).rotateZ(90).set(),new caph.animation.Transform(self.miniMapImg).rotateZ(90).set()}},_rotateRightSlideshowImage:function(){if(log("Image viewer _rotateRightSlideshowImage"),self.animationState===_ANIMATION_STATE.COMPLETE){var t=self._getDomList(self.swichDomFlag),e=t.visible,i=t.animating;caph.dom._style.set(VDomLookUpTable.getDom(i),"opacity",0),new caph.animation.Transform(VDomLookUpTable.getDom(e)).rotateZ(-90).set(),new caph.animation.Transform(self.miniMapImg).rotateZ(-90).set()}},_resetSlideshowState:function(){log("Image viewer _rotateRightSlideshowImage"),self.prevState===_IMAGE_VIEWER_STATE.STATE_PLAYING?self._startSlideshow():self.focusManager.focus(self.playIcon)},_callBackOnAnimationComplete:function(t){switch(log("Image viewer _callBackOnAnimationComplete"),self.calbackQueueTimer&&(clearTimeout(self.calbackQueueTimer),self.calbackQueueTimer=null),self.animationState){case _ANIMATION_STATE.COMPLETE:t();break;case _ANIMATION_STATE.RUNNING:self.calbackQueueTimer=setTimeout(function(){self._callBackOnAnimationComplete(t)},10);break;default:}},_resetAnimatingDom:function(){log("Image viewer _resetAnimatingDom");var t=self._getDomList(self.swichDomFlag),e=t.visible,i=t.animating;caph.animation.util.initCurrentMatrix(VDomLookUpTable.getDom(e)),caph.animation.util.initCurrentOpacity(VDomLookUpTable.getDom(e)),caph.dom._style.set(VDomLookUpTable.getDom(e),"transform",""),caph.dom._style.set(VDomLookUpTable.getDom(e),"-webkit-transform",""),caph.animation.util.initCurrentMatrix(VDomLookUpTable.getDom(i)),caph.animation.util.initCurrentOpacity(VDomLookUpTable.getDom(i)),caph.dom._style.set(VDomLookUpTable.getDom(i),"transform",""),caph.dom._style.set(VDomLookUpTable.getDom(i),"-webkit-transform",""),new caph.animation.Transform(VDomLookUpTable.getDom(e)).stop().clear().move(0,0,1).set(),new caph.animation.Transform(VDomLookUpTable.getDom(i)).stop().clear().move(0,0,0).set(),caph.dom._style.set(VDomLookUpTable.getDom(e),"opacity",1),caph.dom._style.set(VDomLookUpTable.getDom(i),"opacity",1),self.currZoomState=_ZOOM_STATE.NORMAL,self.miniMapImg&&(caph.animation.util.initCurrentMatrix(self.miniMapImg),caph.animation.util.initCurrentOpacity(self.miniMapImg),caph.dom._style.set(self.miniMapImg,"transform",""),caph.dom._style.set(self.miniMapImg,"-webkit-transform",""),new caph.animation.Transform(self.miniMapImg).stop().clear().set())
},_createinfoPopup:function(){log("Image viewer _createinfoPopup");var t=new Popup({popupType:"ALERT",buttonContent:language.getMessage().defaultButtons.ok,bgType:"MessagePopup",isBgAlphaType:!1,height:self.dimension.INFOMAIN_DIV.SIZE[1],callback:function(){self._hideInfoPopup()}});t.setProperty({id:"infoMainDiv"}),t.setTitle("Information");var e=new View({dom:{id:"infoSubDiv",innerHTML:'<div class="caph-video-popup-message"><div class="caph-ui-imageView-leftInfoControl"><div class="caph-ui-imageView-popup-infoText">'+language.getMessage().imageViewer.menuItem.information.options.title+"</div>"+'<div class="caph-ui-imageView-popup-infoText">'+language.getMessage().imageViewer.menuItem.information.options.createdDate+"</div>"+'<div class="caph-ui-imageView-popup-infoText">'+language.getMessage().imageViewer.menuItem.information.options.format+"</div>"+'<div class="caph-ui-imageView-popup-infoText">'+language.getMessage().imageViewer.menuItem.information.options.size+"</div>"+'<div class="caph-ui-imageView-popup-infoText">'+language.getMessage().imageViewer.menuItem.information.options.resolution+"</div>"+'<div class="caph-ui-imageView-popup-infoText">'+language.getMessage().imageViewer.menuItem.information.options.location+"</div>"+"</div>"+'<div class="caph-ui-imageView-rightInfoControl">'+'<div id="infoTitleDetails" class="caph-ui-imageView-popup-infoText"></div>'+'<div id="infoLastSavedDateDetails" class="caph-ui-imageView-popup-infoText"></div>'+'<div id="infoFormatDetails" class="caph-ui-imageView-popup-infoText"></div>'+'<div id="infoSizeDetails" class="caph-ui-imageView-popup-infoText"></div>'+'<div id="infoResolutionDetails" class="caph-ui-imageView-popup-infoText"></div>'+'<div id="infoLocationDetails" class="caph-ui-imageView-popup-infoText"></div>'+"</div>"+"</div>"}});return e.addClass("caph-ui-imageViewer-popup-messageContainer"),t.addChild(e),t.addClass("caph-ui-imageViewer-popup-bgFog"),t.position(self.dimension.INFOMAIN_DIV.POSITION[0],self.dimension.INFOMAIN_DIV.POSITION[1],self.dimension.INFOMAIN_DIV.POSITION[2]),t.visibility(!1),t},_showInfoPopup:function(){log("Image viewer _showInfoPopup"),self.infoPopup.show(),self.infoPopupTimer=setTimeout(function(){self._hideInfoPopup()},5e3)},_hideInfoPopup:function(){log("Image viewer _hideInfoPopup"),clearTimeout(self.infoPopupTimer),self.infoPopup.close(),self.focusManager.focus(self.settingDom._children[4])},_createImageSlider:function(){log("Image viewer _createImageSlider");var t,e=this._playList.list.length,i=new View({dom:{id:"imageSliderBox",style:{overflow:"hidden",padding:"10px",visibility:"hidden"}}}),n=new View({dom:{id:"imageSlider"}});for(n.size([e*(self.dimension.THUMBNAIL_DIMENSIONS.WIDTH+self.dimension.THUMBNAIL_DIMENSIONS.PADDING),self.dimension.THUMBNAIL_DIMENSIONS.HEIGHT]),n.position(0,0,9),t=0;e>t;t++){var s=this._playList.list[t].thumb||"../../../build/2.0.0/stripe/"+_RESOLUTION.HEIGHT+"/broken_image_thumb.png",o=new ComponentBase({position:[t*(self.dimension.THUMBNAIL_DIMENSIONS.WIDTH+self.dimension.THUMBNAIL_DIMENSIONS.PADDING),0,0],size:[self.dimension.THUMBNAIL_DIMENSIONS.WIDTH,self.dimension.THUMBNAIL_DIMENSIONS.HEIGHT],dom:{id:"image_"+t,itemIndex:t+1,style:{background:"url("+s+") no-repeat",border:"2px solid #FFF",backgroundSize:"100% 100%"}},on:{keydown:function(t){t.key().up&&(self.focusManager.focus(self.slider),t.stopPropagation()),t.key().left&&self._moveSlider(t),t.key().right&&self._moveSlider(t)}}});o.focusable(!0),n.addChild(o)}return i.addChild(n),i.size([self.dimension.IMAGE_SLIDER_CONTAINER.SIZE[0],self.dimension.THUMBNAIL_DIMENSIONS.WIDTH+4*self.dimension.THUMBNAIL_DIMENSIONS.PADDING]),i.position(self.dimension.IMAGE_SLIDER_CONTAINER.POSITION[0],self.dimension.IMAGE_SLIDER_CONTAINER.POSITION[1],self.dimension.IMAGE_SLIDER_CONTAINER.POSITION[2]),i},_showImageSlider:function(){log("Image viewer _showImageSlider"),self._hideContextMenu(),self._resetAnimatingDom(),self._resetImageSliderTimer(),self.imgSlider._children[0].position(-(self.slideIndex*self.dimension.THUMBNAIL_DIMENSIONS.WIDTH),0,9),self.imgSlider._children[0]._children[self._playList.currentImageIndex].addClass("focused"),self.slider._setEnterStatus(!0),self.imgSlider.visibility(!0);var t=self._getDomList(self.swichDomFlag),e=t.animImg;e.src="",e.onerror=null},_resetImageSliderTimer:function(){self.hideSliderTimer&&(clearTimeout(self.hideSliderTimer),self.hideSliderTimer=null),self.hideSliderTimer=setTimeout(function(){self._hideImageSlider()},2e3)},_hideImageSlider:function(){if(log("Image viewer _hideImageSlider"),clearTimeout(self.hideSliderTimer),self.hideSliderTimer=null,self.slider._setEnterStatus(!1),self.imgSlider._children[0]._children.length)for(var t in self.imgSlider._children[0]._children){var e=self.imgSlider._children[0]._children[t];e.removeClass("focused")}self.imgSlider.visibility(!1),self.settingDom.visibility()?self.focusManager.focus(self.settingDom._children[0]):self.focusManager.focus(self.slider)},_moveSlider:function(t){log("Image viewer _moveSlider"),self._resetImageSliderTimer(),self._resetControllerMenuTimer();var e=this.imgSlider._children[0],i=this._playList.list.length;if(t.key().left&&(self.slideIndex&&0===this._playList.currentImageIndex-self.slideIndex&&(e.translate(self.dimension.THUMBNAIL_DIMENSIONS.WIDTH,0,0),self.slideIndex--),self.imgSlider._children[0]._children[self._playList.currentImageIndex].removeClass("focused"),self._playList.decrementIndex(),self.slider.setSelectedValue(self._playList.currentImageIndex*self.sliderInterval),self.imgSlider._children[0]._children[self._playList.currentImageIndex].addClass("focused")),t.key().right){var n=this._playList.currentImageIndex+1;i>n&&n>=self.VISIBLE_THUMB+self.slideIndex&&(e.translate(-self.dimension.THUMBNAIL_DIMENSIONS.WIDTH,0,0),self.slideIndex++),self.imgSlider._children[0]._children[self._playList.currentImageIndex].removeClass("focused"),self._playList.incrementIndex(),self.slider.setSelectedValue(self._playList.currentImageIndex*self.sliderInterval),self.imgSlider._children[0]._children[self._playList.currentImageIndex].addClass("focused")}self._setImage(self._playList.getItem(this._playList.currentImageIndex).url),self._setImageInfo(self._playList.getItem(this._playList.currentImageIndex))},_startSlideshow:function(){log("Image viewer _startSlideshow"),self.animationState!==_ANIMATION_STATE.RUNNING&&(this._hideContextMenu(),this.settingDom.visibility(!1),this.playIcon.visibility(!1),this.playIcon.focusable(!1),this.pauseIcon.visibility(!0),this.pauseIcon.focusable(!0),self.focusManager.focus(self.pauseIcon),self._resetAnimatingDom(),this._setSlideshowState(_IMAGE_VIEWER_STATE.STATE_PLAYING),this._prepareNext())},_stopSlideshow:function(){return log("Image viewer _stopSlideshow"),self.nState===_IMAGE_VIEWER_STATE.STATE_STOPPED||self.nState===_IMAGE_VIEWER_STATE.STATE_PAUSED||self.animationState===_ANIMATION_STATE.COMPLETE?!1:(this._hideContextMenu(),this.settingDom.visibility(!1),this.pauseIcon.visibility(!1),this.pauseIcon.focusable(!1),this.playIcon.visibility(!0),this.playIcon.focusable(!0),self._callBackOnAnimationComplete(self._resetAnimatingDom),this._setSlideshowState(_IMAGE_VIEWER_STATE.STATE_STOPPED),void 0)},_toggleOptionsMenu:function(){log("Image viewer _toggleOptionsMenu"),this.settingDom.visibility()?this.settingDom.visibility(!1):(this.settingDom.visibility(!0),this.focusManager.focus(this.settingDom._children[0])),this._hideContextMenu()},_resumeMusic:function(){log("Image viewer _resumeMusic"),this._hideContextMenu(),this.settingDom.visibility(!1),this.audioPlayer.resume()},_pauseMusic:function(){log("Image viewer _pauseMusic"),this._hideContextMenu(),this.settingDom.visibility(!1),this.audioPlayer.pause()},initSlideshow:function(){log("Image viewer initSlideshow"),this.focusManager.focus(this.playIcon),this.frontImage=document.getElementById("frontImage"),this.backImage=document.getElementById("backImage");var t=this._playList.getItem(this._playList.currentImageIndex);this._cacheImage(t.url,function(){}),this._showControllerMenu(),this._setImage(t.url),this._setImageInfo(t)},_showControllerMenu:function(){log("Image viewer _showControllerMenu"),this._resetControllerMenuTimer(),this._children[0].setStyle({display:"block"}),self.zoomRotateArea.visibility()?self.focusManager.focus(self.zoomRotatePanel._children[0]):this.playIcon.visibility()?this.focusManager.focus(this.playIcon):this.pauseIcon.visibility()&&this.focusManager.focus(this.pauseIcon)},_resetControllerMenuTimer:function(){this.hideMenuTimer&&(clearTimeout(this.hideMenuTimer),this.hideMenuTimer=null),this.hideMenuTimer=setTimeout(function(){self._hideControllerMenu()},5e3)},_hideControllerMenu:function(){return log("Image viewer _hideControllerMenu"),this.settingDom.visibility()||this.imgSlider.visibility()?(clearTimeout(this.hideMenuTimer),this.hideMenuTimer=null,this.hideMenuTimer=setTimeout(function(){self._hideControllerMenu()},5e3),void 0):(clearTimeout(this.hideMenuTimer),this.hideMenuTimer=null,this._children[0].setStyle({display:"none"}),void 0)},_setSlideshowState:function(t){log("Image viewer _setSlideshowState"),this.nState=t},_getSlideshowState:function(){return log("Image viewer _getSlideshowState"),this.nState},_setImage:function(t){log("Image viewer _setImage");var e=self._getDomList(self.swichDomFlag);e.visImg.src=t},_setImageInfo:function(t){log("Image viewer _setImageInfo"),VDomLookUpTable.getDom(this.infoView._children[0]).innerText=t.title||"Unknown",VDomLookUpTable.getDom(this.infoView._children[1]).innerText=this._getSpeedText(),VDomLookUpTable.getDom(this.infoView._children[2]).innerText=t.date||"Unknown",VDomLookUpTable.getDom(this.infoView._children[3]).innerText=this._playList.currentImageIndex+1+" | "+this._playList.list.length,caph.dom.getElement("#infoTitleDetails").$[0].innerText=": "+(t.title||"Unknown"),caph.dom.getElement("#infoLastSavedDateDetails").$[0].innerText=": "+(t.date||"Unknown"),caph.dom.getElement("#infoFormatDetails").$[0].innerText=": "+(t.format||"Unknown"),caph.dom.getElement("#infoSizeDetails").$[0].innerText=": "+(t.size||"Unknown"),caph.dom.getElement("#infoResolutionDetails").$[0].innerText=": "+(t.resolution||"Unknown"),caph.dom.getElement("#infoLocationDetails").$[0].innerText=": "+(t.location||"Unknown"),this.slider.setSelectedValue(this._playList.currentImageIndex*this.sliderInterval)},_setSpeed:function(t){log("Image viewer _setSpeed"),this.slideshowSpeed=t},_setEffect:function(t){log("Image viewer _setEffect"),this.slideshowEffect=t},_getSpeed:function(){return log("Image viewer _getSpeed"),this.slideshowSpeed},_getSpeedText:function(){log("Image viewer _getSpeedText");var t=this._getSpeed(),e="";switch(t){case _SLIDESHOW_SPEED.SLOW:e=_SLIDESHOW_SPEED_TEXT.SLOW;break;case _SLIDESHOW_SPEED.NORMAL:e=_SLIDESHOW_SPEED_TEXT.NORMAL;break;case _SLIDESHOW_SPEED.FAST:e=_SLIDESHOW_SPEED_TEXT.FAST;break;default:}return e},_getEffect:function(){return log("Image viewer _getEffect"),this.slideshowEffect},_getEffectName:function(){log("Image viewer _getEffectName");var t=this._getEffect(),e="";switch(t){case _SLIDESHOW_EFFECT.CORNER_WIPE:e=_SLIDESHOW_EFFECT_TEXT.CORNER_WIPE;break;case _SLIDESHOW_EFFECT.FADE_IN_STILL:e=_SLIDESHOW_EFFECT_TEXT.FADE_IN_STILL;break;case _SLIDESHOW_EFFECT.FADE_IN_LEFT:e=_SLIDESHOW_EFFECT_TEXT.FADE_IN_LEFT;break;case _SLIDESHOW_EFFECT.FADE_IN_RIGHT:e=_SLIDESHOW_EFFECT_TEXT.FADE_IN_RIGHT;break;case _SLIDESHOW_EFFECT.FADE_IN_DOWN:e=_SLIDESHOW_EFFECT_TEXT.FADE_IN_DOWN;break;case _SLIDESHOW_EFFECT.FADE_IN_TOP:e=_SLIDESHOW_EFFECT_TEXT.FADE_IN_TOP;break;case _SLIDESHOW_EFFECT.SPIN_FADE_IN:e=_SLIDESHOW_EFFECT_TEXT.SPIN_FADE_IN;break;default:}return e},_prepareNext:function(){if(log("Image viewer _prepareNext"),self.nState===_IMAGE_VIEWER_STATE.STATE_STOPPED||self.nState===_IMAGE_VIEWER_STATE.STATE_PAUSED)return!1;var t=self._playList.getNextItem();if(-1!==t)this._playList.currentImageIndex+1<this._playList.list.length&&this._playList.currentImageIndex+1>=self.VISIBLE_THUMB&&self.slideIndex++,this._playList.currentImageIndex<self.VISIBLE_THUMB&&(self.slideIndex=0),self._cacheImage(t.url,function(){});else{self._playList.currentImageIndex=0,self.slideIndex=0;var e=self._playList.getCurItem();self._cacheImage(e.url,function(){})}self.nState===_IMAGE_VIEWER_STATE.STATE_PLAYING&&(self.animationState=_ANIMATION_STATE.RUNNING,self._startEffect())},_playList:{currentImageIndex:0,list:[],incrementIndex:function(){log("Image viewer _playList incrementIndex");var t=this.list.length;t-1>this.currentImageIndex&&this.currentImageIndex++},decrementIndex:function(){log("Image viewer _playList decrementIndex"),this.currentImageIndex>0&&this.currentImageIndex--},getNextItem:function(){log("Image viewer _playList getNextItem");var t=this.list.length;return t-1>this.currentImageIndex?this.list[++this.currentImageIndex]:-1},getCurItem:function(){return log("Image viewer _playList getCurItem"),this.list[this.currentImageIndex]},getItem:function(t){return log("Image viewer _playList getItem"),log("getItem index "+t),this.list[t]}},_startEffect:function(){log("Image viewer _startEffect");var effectNm=this._getEffect(),fn=eval("this."+effectNm);if(caph.isFunction(fn)){var url=this._playList.getCurItem().url;fn.call(this,url,function(){self._setImageInfo(self._playList.getCurItem()),self._resume()})}else log("[EffectStart] error")},_resume:function(){log("Image viewer _resume"),this.nState===_IMAGE_VIEWER_STATE.STATE_PLAYING&&this._prepareNext()},_getDomList:function(t){log("Image viewer _getDomList");var e=t?{visible:self.backImageDom,animating:self.frontImageDom,animImg:self.frontImage,visImg:self.backImage}:{visible:self.frontImageDom,animating:self.backImageDom,animImg:self.backImage,visImg:self.frontImage};return e},_cornerWipe:function(t,e){log("on image Load cornerWipe ");var i=self._getSpeed(),n=self.swichDomFlag,s=self._getDomList(n),o=s.animImg,r=s.visible,a=s.animating;timeline1=null,timeline2=null,timelinePlayer=null,animatingDiv=VDomLookUpTable.getDom(a),visibleDiv=VDomLookUpTable.getDom(r),o.src=t,o.onerror=function(){log("on image Load error "),o.src=no_imageAvaialable_url},o.onload=function(){new caph.animation.Transform(animatingDiv).setMultiply(!1).move(0,0,1,0,"ease-in").set(),new caph.animation.Transform(visibleDiv).setMultiply(!1).move(0,0,0,0,"ease-in").set(),timeline1=new caph.animation.Timeline,timeline2=new caph.animation.Timeline,timeline1.add({transition:caph.animation.transition.move(-_RESOLUTION.WIDTH,-_RESOLUTION.HEIGHT,1),duration:0,ease:caph.animation.ease.easeInOut,delay:0}),timeline1.add({transition:caph.animation.transition.move(_RESOLUTION.WIDTH,_RESOLUTION.HEIGHT,0),duration:i,ease:caph.animation.ease.easeInOut,delay:0,callback:function(){log("cornerwipe callback"+self.swichDomFlag),self._toggleSwitchFlag(),self.animationState=_ANIMATION_STATE.COMPLETE,o.onload=null,e()}}),timelinePlayer=new caph.animation.Player,timelinePlayer.add(animatingDiv,timeline1),timelinePlayer.play()}},_fadeInStill:function(t,e){log("on image Load fadeInStill");var i=self._getSpeed(),n=self.swichDomFlag,s=self._getDomList(n),o=s.animImg,r=s.visible,a=s.animating;timeline1=null,timeline2=null,timelinePlayer=null,animatingDiv=VDomLookUpTable.getDom(a),visibleDiv=VDomLookUpTable.getDom(r),o.src=t,o.onerror=function(){o.src=no_imageAvaialable_url},o.onload=function(){caph.dom._style.set(animatingDiv,"opacity",0),new caph.animation.Transform(animatingDiv).setMultiply(!1).move(0,0,1,0,"ease-in").set(),new caph.animation.Transform(visibleDiv).setMultiply(!1).move(0,0,0,0,"ease-in").set(),timeline1=new caph.animation.Timeline,timeline2=new caph.animation.Timeline,timeline1.add({transition:caph.animation.transition.move(0,0,1),duration:0,ease:caph.animation.ease.easeIn,delay:0}),timeline1.add({transition:caph.animation.transition.move(0,0,0),duration:i,ease:caph.animation.ease.easeIn,opacity:caph.animation.transition.opacity(0,1),delay:0,callback:function(){self._toggleSwitchFlag(),self.animationState=_ANIMATION_STATE.COMPLETE,o.onload=null,e()}}),timelinePlayer=new caph.animation.Player,timelinePlayer.add(animatingDiv,timeline1),timelinePlayer.play()}},_fadeInRight:function(t,e){log("on image Load fadeInRight");var i=self._getSpeed(),n=self.swichDomFlag,s=self._getDomList(n),o=s.animImg,r=s.visible,a=s.animating;timeline1=null,timeline2=null,timelinePlayer=null,animatingDiv=VDomLookUpTable.getDom(a),visibleDiv=VDomLookUpTable.getDom(r),o.src=t,o.onerror=function(){o.src=no_imageAvaialable_url},o.onload=function(){caph.dom._style.set(animatingDiv,"opacity",0),new caph.animation.Transform(animatingDiv).setMultiply(!1).move(0,0,1,0,"ease-in").set(),new caph.animation.Transform(visibleDiv).setMultiply(!1).move(0,0,0,0,"ease-in").set(),timeline1=new caph.animation.Timeline,timeline2=new caph.animation.Timeline,timeline1.add({transition:caph.animation.transition.move(-_RESOLUTION.WIDTH,0,1),duration:0,ease:caph.animation.ease.easeInOut,delay:0}),timeline1.add({transition:caph.animation.transition.move(_RESOLUTION.WIDTH,0,0),duration:i,ease:caph.animation.ease.easeInOut,opacity:caph.animation.transition.opacity(0,1),delay:0,callback:function(){self._toggleSwitchFlag(),self.animationState=_ANIMATION_STATE.COMPLETE,o.onload=null,e()}}),timelinePlayer=new caph.animation.Player,timelinePlayer.add(animatingDiv,timeline1),timelinePlayer.play()}},_fadeInLeft:function(t,e){log("on image Load fadeInLeft");var i=self._getSpeed(),n=self.swichDomFlag,s=self._getDomList(n),o=s.animImg,r=s.visible,a=s.animating;timeline1=null,timeline2=null,timelinePlayer=null,animatingDiv=VDomLookUpTable.getDom(a),visibleDiv=VDomLookUpTable.getDom(r),o.src=t,o.onerror=function(){o.src=no_imageAvaialable_url},o.onload=function(){caph.dom._style.set(animatingDiv,"opacity",0),new caph.animation.Transform(animatingDiv).setMultiply(!1).move(0,0,1,0,"ease-in").set(),new caph.animation.Transform(visibleDiv).setMultiply(!1).move(0,0,0,0,"ease-in").set(),timeline1=new caph.animation.Timeline,timeline2=new caph.animation.Timeline,timeline1.add({transition:caph.animation.transition.move(_RESOLUTION.WIDTH,0,1),duration:0,ease:caph.animation.ease.easeIn,delay:0}),timeline1.add({transition:caph.animation.transition.move(-_RESOLUTION.WIDTH,0,0),duration:i,ease:caph.animation.ease.easeIn,opacity:caph.animation.transition.opacity(0,1),delay:0,callback:function(){self._toggleSwitchFlag(),self.animationState=_ANIMATION_STATE.COMPLETE,o.onload=null,e()}}),timelinePlayer=new caph.animation.Player,timelinePlayer.add(animatingDiv,timeline1),timelinePlayer.play()}},_spinFadeIn:function(t,e){log("on image Load spinFadeIn");var i=self._getSpeed(),n=self.swichDomFlag,s=self._getDomList(n),o=s.animImg,r=s.visible,a=s.animating;timeline1=null,timeline2=null,timelinePlayer=null,animatingDiv=VDomLookUpTable.getDom(a),visibleDiv=VDomLookUpTable.getDom(r),o.src=t,o.onerror=function(){o.src=no_imageAvaialable_url},o.onload=function(){caph.dom._style.set(animatingDiv,"opacity",0),new caph.animation.Transform(animatingDiv).setMultiply(!1).move(0,0,1,0,"ease-in").set(),new caph.animation.Transform(visibleDiv).setMultiply(!1).move(0,0,0,0,"ease-in").set(),timeline1=new caph.animation.Timeline,timeline2=new caph.animation.Timeline;var t=new caph.animation.Timeline;timeline1.add({transition:caph.animation.transition.move(0,0,1),duration:0,ease:caph.animation.ease.easeIn,opacity:caph.animation.transition.opacity(0,0),delay:0}),timeline1.add({transition:caph.animation.transition.move(0,0,0),duration:i,ease:caph.animation.ease.easeIn,delay:0}),timeline2.add({transition:caph.animation.transition.rotateZ(360),duration:i,ease:caph.animation.ease.easeIn,opacity:caph.animation.transition.opacity(0,1),delay:0}),t.add({transition:caph.animation.transition.scale(.2,.2,1),duration:0,ease:caph.animation.ease.easeIn,opacity:caph.animation.transition.opacity(0,0),delay:0}),t.add({transition:caph.animation.transition.scale(5,5,1),duration:i,ease:caph.animation.ease.easeIn,delay:0,callback:function(){self._toggleSwitchFlag(),self.animationState=_ANIMATION_STATE.COMPLETE,o.onload=null,e()}}),timelinePlayer=new caph.animation.Player,timelinePlayer.add(animatingDiv,timeline1),timelinePlayer.add(animatingDiv,timeline2),timelinePlayer.add(animatingDiv,t),timelinePlayer.play()}},_fadeInDown:function(t,e){log("on image Load fadeInDown");var i=self._getSpeed(),n=self.swichDomFlag,s=self._getDomList(n),o=s.animImg,r=s.visible,a=s.animating;timeline1=null,timeline2=null,timelinePlayer=null,animatingDiv=VDomLookUpTable.getDom(a),visibleDiv=VDomLookUpTable.getDom(r),o.src=t,o.onerror=function(){o.src=no_imageAvaialable_url},o.onload=function(){new caph.animation.Transform(animatingDiv).setMultiply(!1).move(0,0,1,0,"ease-in").set(),new caph.animation.Transform(visibleDiv).setMultiply(!1).move(0,0,0,0,"ease-in").set(),timeline1=new caph.animation.Timeline,timeline2=new caph.animation.Timeline,timeline1.add({transition:caph.animation.transition.move(0,-_RESOLUTION.HEIGHT,1),duration:0,ease:caph.animation.ease.easeIn,delay:0}),timeline1.add({transition:caph.animation.transition.move(0,_RESOLUTION.HEIGHT,0),duration:i,ease:caph.animation.ease.easeIn,opacity:caph.animation.transition.opacity(0,1),delay:0,callback:function(){self._toggleSwitchFlag(),self.animationState=_ANIMATION_STATE.COMPLETE,o.onload=null,e()}}),timelinePlayer=new caph.animation.Player,timelinePlayer.add(animatingDiv,timeline1),timelinePlayer.play()}},_fadeInTop:function(t,e){log("on image Load fadeInTop");var i=self._getSpeed(),n=self.swichDomFlag,s=self._getDomList(n),o=s.animImg,r=s.visible,a=s.animating;timeline1=null,timeline2=null,timelinePlayer=null,animatingDiv=VDomLookUpTable.getDom(a),visibleDiv=VDomLookUpTable.getDom(r),o.src=t,o.onerror=function(){o.src=no_imageAvaialable_url},o.onload=function(){new caph.animation.Transform(animatingDiv).setMultiply(!1).move(0,0,1,0,"ease-in").setOpacity(0).set(),new caph.animation.Transform(visibleDiv).setMultiply(!1).move(0,0,0,0,"ease-in").set(),timeline1=new caph.animation.Timeline,timeline2=new caph.animation.Timeline,timeline1.add({transition:caph.animation.transition.move(0,_RESOLUTION.HEIGHT,1),duration:0,ease:caph.animation.ease.easeIn,delay:0}),timeline1.add({transition:caph.animation.transition.move(0,-_RESOLUTION.HEIGHT,0),duration:i,ease:caph.animation.ease.easeIn,opacity:caph.animation.transition.opacity(0,1),delay:0,callback:function(){self._toggleSwitchFlag(),self.animationState=_ANIMATION_STATE.COMPLETE,o.onload=null,e()}}),timelinePlayer=new caph.animation.Player,timelinePlayer.add(animatingDiv,timeline1),timelinePlayer.play()}},_toggleSwitchFlag:function(){log("Image viewer _toggleSwitchFlag"),this.swichDomFlag=0===this.swichDomFlag?1:0},_cacheImage:function(t,e){log("Image viewer _cacheImage"),cacheImage.length&&void 0!==cacheImage[cacheIdx]?(e(),cacheImage[cacheIdx].src=t,cacheIdx=(cacheIdx+1)%MAX_CACHE_LEN):(cacheImage[cacheIdx]=document.createElement("img"),e(),cacheImage[cacheIdx].src=t,cacheIdx=(cacheIdx+1)%MAX_CACHE_LEN)},_hideContextMenu:function(){log("Image viewer _hideContextMenu"),self.speedContextMenu.visibility(!1),self.effectContextMenu.visibility(!1),self.zoomRotateArea.visibility(!1),self.infoPopup.visibility(!1)},_close:function(){log("Image viewer _close");try{self.audioPlayer&&self.audioPlayer.close(),timelinePlayer&&timelinePlayer.clear(),self.hideMenuTimer&&(clearTimeout(self.hideMenuTimer),self.hideMenuTimer=null),self.hideSliderTimer&&(clearTimeout(self.hideSliderTimer),self.hideSliderTimer=null),self.calbackQueueTimer&&(clearTimeout(self.calbackQueueTimer),self.calbackQueueTimer=null),self.infoPopup.destroy(),setTimeout(function(){self.visibility(!1),self.callback("Image viewer object is going to be removed from view!!"),self.destroy()},1e3)}catch(t){console.log(t)}}})}(this),function(){"use strict";function t(t){}var e,i=caph.require("module.event.Manager"),n=caph.require("stripe.ui.component.Button"),s=caph.require("ui.base.Component"),o=caph.require("module.focus.Manager"),r=o.getInstance(),a=caph.require("event.key"),h=caph.require("stripe.ui.component.Icon"),u=caph.require("stripe.ui.component.Tooltip"),c=caph.require("stripe.ui.component.Scrollbar"),l=caph.module.renderer._VDomLookUpTable.getInstance(),p=caph.require("stripe.ui.component.Popup"),d=caph.require("base.resource.Language"),f={1080:{PLAY:{POSITION:[523,100,0],SIZE:[54,54]},PAUSE:{POSITION:[523,100,0],SIZE:[54,54]},NEXT:{POSITION:[626,100,0],SIZE:[54,54]},PREV:{POSITION:[420,100,0],SIZE:[54,54]},REPEAT:{POSITION:[892,100,0],SIZE:[54,54]},SHUFFLE:{POSITION:[993,100,0],SIZE:[54,54]},SETTING:{POSITION:[53,100,0],SIZE:[54,54]},PROGRESSBAR:{POSITION:[40,0,0],SIZE:[995,54]},SCROLLBAR:{POSITION:[790,67,0],SIZE:[935,54]},TOOLTIP:{PLAY:{POSITION:[510,995,10]},NEXT:{POSITION:[612,995,10]},PREV:{POSITION:[410,995,10]},SETTING:{POSITION:[47,995,10]},REPEAT:{POSITION:[887,995,10]},SHUFFLE:{POSITION:[987,995,10]},SIZE:[80,55],FONT_SIZE:'20pt "Samsung SVD_Medium"'},PLAYLIST:{WIDTH:200,HEIGHT:85,ITEMS:11}},720:{PLAY:{POSITION:[349,65,0],SIZE:[36,36]},PAUSE:{POSITION:[349,65,0],SIZE:[36,36]},NEXT:{POSITION:[417,65,0],SIZE:[36,36]},PREV:{POSITION:[280,65,0],SIZE:[36,36]},REPEAT:{POSITION:[595,65,0],SIZE:[36,36]},SHUFFLE:{POSITION:[662,65,0],SIZE:[36,36]},SETTING:{POSITION:[35,65,0],SIZE:[36,36]},PROGRESSBAR:{POSITION:[27,0,0],SIZE:[663,54]},SCROLLBAR:{POSITION:[527,45,0],SIZE:[624,54]},TOOLTIP:{PLAY:{POSITION:[340,663,10]},NEXT:{POSITION:[405,663,10]},PREV:{POSITION:[273,663,10]},SETTING:{POSITION:[30,663,10]},REPEAT:{POSITION:[590,663,10]},SHUFFLE:{POSITION:[657,663,10]},SIZE:[60,45],FONT_SIZE:'16pt "Samsung SVD_Medium"'},PLAYLIST:{HEIGHT:56,WIDTH:133,ITEMS:11}}},m={ENTER:"enter",PAUSE:"pause",LEFT:"left",UP:"up",RIGHT:"right",DOWN:"down",N0:"n0",N1:"n1",N2:"n2",N3:"n3",N4:"n4",N5:"n5",N6:"n6",N7:"n7",N8:"n8",N9:"n9",RED:"red",green:"green",YELLOW:"yellow",BLUE:"blue",POWER:"power",REWIND:"rewind",STOP:"stop",PLAY:"play",REC:"rec",FF:"ff",CHDOWN:"chDown",CHUP:"chUp",VOLDOWN:"voldown",VOLUP:"volup",MUTE:"mute",INFO:"info",GUIDE:"guide",RETURN:"return",HOME:"home",SOURCE:"source",CHLIST:"chList",MENU:"menu",TOOLS:"tools",HDMI:"hdmi",EXIT:"exit",PRECH:"preCh",TTXMIX:"ttxMix",RETURN_ORSAY:88},_={BUFFERINGSTART:"bufferingstart",BUFFERINGPROGRESS:"bufferingprogress,",BUFFERINGCOMPLETE:"bufferingcomplete",STREAMINFOREADY:"streaminfoready",CURRENTPLAYTIME:"currentplaytime",STREAMCOMPLETED:"streamcompleted",STATECHANGED:"statechanged",ERROR:"error",PLAYING:"playing",PAUSE:"paused",PLAY:"play",SEEKED:"seeked",CANPLAY:"canplay"},g={ON:!0,OFF:!1},v={NO:"norepeat",ONE:"one",ALL:"all"},y={PLAYING:"playing",PAUSED:"paused",STOPPED:"stopped",ERROR:"error",ONSTREAMCOMPLETED:"onstreamcompleted"},b={HEIGHT:85,WIDTH:200,ITEMS:11};$class({$namespace:"caph.stripe.ui.widget.audioPlayer.base",$extends:s,$mixins:[caph.module.mixins.event.Observer,caph.module.mixins.focus.Focusable],$constructor:function(t,i){i=i||{},this.options=void 0!==t?t:null,this.$super(t);var n=d.getInstance();n.getSupportLanguageCodeSet()||n.setLanguage(["en"],"en"),this.languageText=n,this.isAudioControlsReq=void 0===this.options.audioControls?!1:this.options.audioControls,e=this,t.audioControls===!0&&(1080>window.innerHeight?(this.resolution=720,b={HEIGHT:f[720].PLAYLIST.HEIGHT,WIDTH:f[720].PLAYLIST.WIDTH,ITEMS:f[720].PLAYLIST.ITEMS}):(this.resolution=1080,b={HEIGHT:f[1080].PLAYLIST.HEIGHT,WIDTH:f[1080].PLAYLIST.WIDTH,ITEMS:f[1080].PLAYLIST.ITEMS}),this._createElement(),this.bindListeners())},_initialize:function(){this.$super(),this.AVPlay=null,this.messageTimer=null,this.curState=y.STOPPED,this.currentPos=0,this.preState=y.STOPPED,this.playList=[],this.listeners={},this.owner=null,this.shuffleMode=g.OFF,this.index=0,this.repeatMode=v.NO,this.progressBar=null,this.scrollBar=null,this.topItemIndex=0,this.baseCssClass="caph-wui-widget-AudioPlayer",this.errorPopup=null,this.hasLoaded=!1,this.isErrorPopup=!1,this.networkInterfaceType=null,this.isPopupOpen=!1,this.controls=null,this.playButton=null,this.resolution=null,this.pauseButton=null,this.itemScrolled=0},setOption:function(e){this.items=e.playList?e.playList:[],this._extractPlaylist(),this.callback=void 0!==e.callback&&caph.isFunction(e.callback)?e.callback:function(){t("No CallBack provided !!")}},getCurrentState:function(){return this.curState},getCurrentPosition:function(){return this._timeToString(this.currentPos)},clearItems:function(){this.items=[],this.playList=[],this.index=0},getRepeatMode:function(){return this.repeatMode},setRepeatMode:function(e){this.repeatMode!==e&&(e===v.NO||e===v.ONE||e===v.ALL?this.repeatMode=e:t("Error : :  Repeat mode can not be set."))},getShuffleMode:function(){return this.shuffleMode},setShuffleMode:function(e){this.shuffleMode!==e&&(this.shuffleMode=e,e===g.ON?this._shuffleOn(this):e===g.OFF?this._shuffleOff(this):t("Error : : Shuffle mode can be set."))},setCurIndex:function(t){this.items.length>t&&t>=0&&(this.index=t)},getCurIndex:function(){return this.index},getCurItem:function(){return this.playList[this.index]},getItem:function(t){return caph.isNumber(t)===!0?this.playList[t]||null:this.items},close:function(){try{this.stop();var i;for(i in _)t(i),this.removeListener(i);this.visibility(!1),this.AVPlay=null,setTimeout(function(){e.destroy()},500)}catch(n){console.log(n.message)}},_shuffleOff:function(t){t.shuffleMode=g.OFF},_shuffleOn:function(t){t.shuffleMode=g.ON},_onbufferingstart:function(){this.preState=this.getCurrentState(),this._onstatechange(_.BUFFERINGSTART),t("AudioPlayer :: _onbufferingstart")},_onbufferingcomplete:function(){this.preState!==y.STOPPED?(this._onstatechange(this.preState),this.preState=null):(this.preState===y.STOPPED||this.preState===y.PAUSED)&&(this._onstatechange(y.PLAYING),this.preState=null),this._onstatechange(_.BUFFERINGCOMPLETE),t("AudioPlayer :: _onBufferingComplete")},_onstatechange:function(e,i,n){e!==this.curState&&(this.curState=e,this.curState===_.PAUSE&&0===this.currentPos&&(this.curState=y.STOPPED),this.trigger(_.STATECHANGED,this.curState,i,n),t("AudioPlayer :: _onstatechange"+this.curState))},_oncurrentposition:function(e,i){return this.currentPos=e,this.duration=i?i:this.getDuration(),this.trigger(_.CURRENTPLAYTIME,this.currentPos,this.duration),t("AudioPlayer :: _oncurrentposition"),!0},_onstreamcompleted:function(){this._onstatechange(_.STREAMCOMPLETED),this.next(),t("AudioPlayer :: _onstreamcompleted")},_onerror:function(e,i){(this.getCurrentState()!==y.PAUSED||this.getCurrentState()!==y.STOPPED)&&this.stop(),this._onstatechange(_.ERROR,e,i),this.getRepeatMode()===v.ONE&&(this.index=this.index<this.playList.length-1?this.index=this.index+1:this.index-1),t("AudioPlayer :: _onerror")},addListener:function(t,e,i){this.listeners.hasOwnProperty(t)||(this.listeners[t]=[]);var n={handler:e,context:i||null,id:10*Date.now()+parseInt(10*Math.random(),10)};return this.listeners[t].push(n),n.id},removeListener:function(t,e){if(this.listeners.hasOwnProperty(t)){if(caph.isUndefined(e))this.listeners[t]=[];else if(caph.isFunction(e)||caph.isNumber(e))for(var i=this.listeners[t].length-1;i>=0;i--)(caph.isFunction(e)&&this.listeners[t][i].handler===e||caph.isNumber(e)&&this.listeners[t][i].id===e)&&this.listeners[t].splice(i,1)}else 0===arguments.length&&(this.listeners={})},trigger:function(e){if(!caph.isString(e))return!1;var i=Array.prototype.slice.call(arguments),n=[];if(this.listeners.hasOwnProperty(e)){var s,o;for(s=0,o=this.listeners[e].length;o>s;s+=1)if(caph.isFunction(this.listeners[e][s].handler)){var r=this.listeners[e][s].handler.apply(this.listeners[e][s].context||this.owner||null,i.slice(1));n.push(r)}else t("ERROR: invalid type of handler: "+typeof this.listeners[e][s].handler+": "+this.listeners[e][s].handler)}return n},_extractPlaylist:function(){if(this.items.length>0)for(var t,e,i=0,n=this.items.length;n>i;i++)t={},e=this.items[i],t.pic=e.pic?e.pic:"./resource/image/beats.png",t.artist=e.artist?e.artist:"Unknown",t.title=e.title?e.title:"Unknown",t.album=e.album?e.album:"Unknown",t.year=e.year?e.year:"Unknown",t.comment=e.comment?e.comment:"Unknown",t.track=e.track?e.track:"Unknown",t.genre=e.genre?e.genre:"Unknown",t.url=e.url?e.url:"Unknown",t.isValid="Unknown"===t.ur?!1:!0,t.index=i,this.playList.push(t)
},next:function(){switch(this.repeatMode){case v.ONE:break;case v.NO:case v.ALL:var t=this.playList.length;if(t>0)if(this.getShuffleMode()===g.OFF)if(this.index===t-1){if(this.repeatMode===v.NO)return null;this.repeatMode===v.ALL&&(this.index=0)}else this.index++;else{var e=Math.floor(Math.random()*t);this.index=e}}return this.playList[this.index].isValid?(this.play(),this.playList[this.index]):(this._onerror(this.languageText.getMessage().audioPlayer.error.fileError.title,this.languageText.getMessage().audioPlayer.error.fileError.message),void 0)},prev:function(){var t,e=this.playList.length;switch(this.repeatMode){case v.ONE:break;case v.NO:case v.ALL:if(e>0)if(this.getShuffleMode()===g.OFF)if(0===this.index){if(this.repeatMode===v.NO)return null;this.repeatMode===v.ALL&&(this.index=e-1)}else this.index--;else t=Math.floor(Math.random()*e),this.index=t;break;default:}return this.playList[this.index].isValid?(this.play(),this.playList[this.index]):(this._onerror(this.languageText.getMessage().audioPlayer.error.fileError.title,this.languageText.getMessage().audioPlayer.error.fileError.message),void 0)},_timeToString:function(t){var e=Math.floor(t/3600);t=Math.floor(t-3600*e);var i=Math.floor(t/60);t=Math.floor(t-60*i);var n=Math.floor(t/1),s="";return 10>i&&(s+="0"),s+=""+i+":",10>n&&(s+="0"),s+=""+n},bindListeners:function(){for(var t in _){var i=_[t];this.removeListener(i),this.addListener(i,function(t){return function(){switch(t){case _.CURRENTPLAYTIME:e._updateProgressBar(arguments[0],arguments[1]);break;case _.BUFFERINGCOMPLETE:break;case _.BUFFERINGPROGRESS:break;case _.BUFFERINGSTART:break;case _.ERROR:break;case _.STATECHANGED:e._setState(arguments[0],arguments[1],arguments[2]);break;case _.STREAMCOMPLETED:e._setState(arguments[0],arguments[1]);break;case _.STREAMINFOREADY:break;default:}}}(i))}},_setState:function(t,e){switch(t){case _.PLAYING:this._setItemInfo(e),this._showMusicEqualizer(),this._scrollPlaylist(),this.curState=y.PLAYING;break;case _.STREAMCOMPLETED:this.preIndex=this.index,this._hideMusicEqualizer();break;case _.PLAY:this.playButton.visibility(!1),this.playButton.focusable(!1),this.pauseButton.visibility(!0),this.pauseButton.focusable(!0),this.curState=y.PLAY;break;case _.CANPLAY:this.playButton.visibility(!1),this.playButton.focusable(!1),this.pauseButton.visibility(!0),this.pauseButton.focusable(!0),this.curState=y.CANPLAY;break;case _.PAUSE:this.playButton.visibility(!0),this.pauseButton.focusable(!1),this.pauseButton.visibility(!1),this.playButton.focusable(!0),this.curState=y.PAUSED;break;case _.ERROR:this._scrollPlaylist(),this.playlistContainer._children[this.index].addClass("caph-service-audioPlayer-invalid-audio"),this.playList[this.index].isValid=!1,this.popupConfirm.setTitle(arguments[1]),this.popupConfirm.setMessageText(arguments[2]),this.popupConfirm.show(),this.curState=_.ERROR,this.playButton.visibility(!0),this.pauseButton.focusable(!1),this.pauseButton.visibility(!1),this.playButton.focusable(!0);break;case _.SEEKED:this.curState=_.SEEKED;break;default:}},_setItemInfo:function(t){caph.dom.getElement(".audioPoster").$[0].style.backgroundImage="url('"+t.pic+"')",caph.dom.getElement(".audioTitle").$[0].innerText=t.title,caph.dom.getElement(".audioAlbum").$[0].innerText=t.album},_scrollPlaylist:function(){var t=this.itemScrolled+b.ITEMS-1,e=t-(b.ITEMS-1),i=this.index>t?this.index-t:e>this.index?e-this.index:0,n=this.index>t?"UP":e>this.index?"DOWN":!1;"UP"===n?(this.playlistContainer.position(0,this.playlistContainer.position()[1]-i*b.HEIGHT,0),this.itemScrolled=this.itemScrolled+i,this.scrollBar.moveTo(this.itemScrolled+1)):"DOWN"===n&&(this.playlistContainer.position(0,this.playlistContainer.position()[1]+i*b.HEIGHT,0),this.itemScrolled=this.itemScrolled-i,this.scrollBar.moveTo(this.itemScrolled+1)),caph.dom.getElement(".moveUp").style("opacity",1),caph.dom.getElement(".moveDown").style("opacity",1),0===this.itemScrolled?caph.dom.getElement(".moveUp").style("opacity",.3):this.itemScrolled===this.playList.length-b.ITEMS&&caph.dom.getElement(".moveDown").style("opacity",.3)},_createElement:function(){this._registerKeys(),this.addClass("caph-wui-widget-AudioPlayer");var t=this._createMessagePopup(),n=this._createLeftPanel(),s=this._createRightPanel(),o=this._createMessagePopup();this.addChild([n,s,t,o]),i.getInstance().addObserver(n),i.getInstance().addObserver(s),setTimeout(function(){e.playButton.focus(),caph.dom.getElement(".moveUp").style("opacity",.3)},150)},_createLoading:function(){},_createMessagePopup:function(){var t=new p({popupType:"ALERT",buttonContent:this.languageText.getMessage().defaultButtons.ok,bgType:"MessagePopup",isBgAlphaType:!1,width:600,height:400,callback:function(){e.next(),setTimeout(function(){y.PLAYING===e.getCurrentState()?e.pauseButton.focus():e.playButton.focus()},100)}});return t.z(1),t.setMessageText("This is message popup"),this.popupConfirm=t,t},_createLeftPanel:function(){var t=new s,e=this._createPlayingArea(),i=this._createPlayerControls();return t.addClass("caph-audio-player-leftPanel"),t.addChild([e,i]),this.controls=i,t},_createRightPanel:function(){var t=new s,e=new s,i=this._createPlaylist();return t.addClass("caph-audio-player-rightPanel"),e.addClass("caph-AudioPlayer-item-count"),e.setProperty({innerText:this.items.length+" "+this.languageText.getMessage().audioPlayer.totalAudioCount.song}),t.addChild([e,i]),t},_createPlayingArea:function(){var t=new s;return t.setProperty({innerHTML:'<div class="audioPoster"></div><div class="audioTitle caph-ellipsis">Sample Audio</div><div class="audioAlbum caph-ellipsis">Sample Album</div>'}),t.addClass("audioDetails"),t},_createProgressBar:function(){var i=caph.require("stripe.ui.component.Slider"),n=new i({width:f[e.resolution].PROGRESSBAR.SIZE[0]});return n.position(f[e.resolution].PROGRESSBAR.POSITION[0],f[e.resolution].PROGRESSBAR.POSITION[1],f[e.resolution].PROGRESSBAR.POSITION[2]),n.addClass("bar"),n.on({click:function(e){t(e)},focus:function(e){t(e)},keydown:function(t){var i=t.key().type;switch(i){case m.ENTER:if(e.getCurrentState()===y.STOPPED&&m.ENTER===i)return t.stopPropagation(),n._setEnterStatus(!1),void 0;break;case m.LEFT:n._isEnter&&e.rewind();break;case m.RIGHT:n._isEnter&&e.forward();break;case m.UP:break;case m.DOWN:break;default:}}}),this.progressBar=n,n},_updateProgressBar:function(t,e){var i;i=e>0?this.progressBar.width/e:0,caph.isNumber(t)&&t>=0&&(this.progressBar.setSelectedValue(i*t),caph.dom.getElement("#curTime").$[0].innerText=this._timeToString(t)),caph.isNumber(e)&&e>=0&&(caph.dom.getElement("#durTime").$[0].innerText=this._timeToString(e))},_hideMusicEqualizer:function(){var t=l.getDom(this.playlistContainer._children[this.index]),e=t.childNodes[0].childNodes[1];e.style.display="none"},_showMusicEqualizer:function(){var t=l.getDom(this.playlistContainer._children[this.index]),e=t.childNodes[0].childNodes[1],i=t.childNodes[0].childNodes[0];caph.dom._css.hasClass(i,"thumbnail")||caph.dom._css.hasClass(e,"music-equalizer")||caph.dom._css.addClass(e,"music-equalizer"),e.style.display="inline"},_createPlaylist:function(){var e=new s,n=new s,o=new s,a=this,h=new s,u=new s,p=new c({direction:caph.ui.base.component.Scrollbar.VERTICAL,currentThumbPosition:1,maxThumbPosition:this.playList.length-10,sizeValue:f[a.resolution].SCROLLBAR.SIZE[0],interval:1,position:f[a.resolution].SCROLLBAR.POSITION});p.focusable(!1),e.addClass("caph-audio-playlist-container"),o.addClass("caph-audio-playlist"),h.addClass("move-up-down-arrow"),u.addClass("move-up-down-arrow"),h.addClass("moveUp"),u.addClass("moveDown"),u.focusable(!0),h.focusable(!0),u.on({click:function(){t("click"),a.playList.length>=b.ITEMS&&a.itemScrolled<a.playList.length-b.ITEMS&&(n.position(0,n.position()[1]-b.HEIGHT,0),a.itemScrolled++,p.moveNext()),caph.dom.getElement(".moveUp").style("opacity",1),caph.dom.getElement(".moveDown").style("opacity",1),0===a.itemScrolled?caph.dom.getElement(".moveUp").style("opacity",.3):a.itemScrolled===a.playList.length-b.ITEMS&&caph.dom.getElement(".moveDown").style("opacity",.3)}}),h.on({click:function(){a.playList.length>=b.ITEMS&&a.itemScrolled>0&&(n.position(0,n.position()[1]+b.HEIGHT,0),a.itemScrolled--,p.movePrev()),caph.dom.getElement(".moveUp").style("opacity",1),caph.dom.getElement(".moveDown").style("opacity",1),0===a.itemScrolled?caph.dom.getElement(".moveUp").style("opacity",.3):a.itemScrolled===a.playList.length-b.ITEMS&&caph.dom.getElement(".moveDown").style("opacity",.3)}}),e.addChild(h);for(var d,_=$class({$extends:s,$constructor:function(t){this.$super(),this._innerHTML='<div class="left-panel" id="leftPanel"><div class="left-space-no-equalizer"></div><div class="music-equalizer"></div><div class="title title-normal caph-ellipsis title">'+a.playList[t].title+"</div>"+"</div>"+'<div class="right-panel album caph-ellipsis album">'+a.playList[t].album+"</div>",this.addClass("playlist"),this.itemIndex=t,this.setProperty({innerHTML:this._innerHTML,id:"list"+t,itemIndex:t}),i.getInstance().addObserver(e)},onfocus:function(){t("onfocus"),this.addClass("focused");var e=l.getDom(this).childNodes[0];e.childNodes[1].style.display="inline",caph.dom._css.addClass(e.childNodes[0],"thumbnail"),caph.dom._style.set(e.childNodes[0],"background-image","url('"+a.playList[this.itemIndex].pic+"')"),caph.dom._css.addClass(e.childNodes[1],"music-equalizer-blank"),e.childNodes[2].innerHTML.length>17&&(caph.dom._css.addClass(e.childNodes[2],"caph-marquee"),caph.dom._css.removeClass(e.childNodes[2],"caph-ellipsis")),caph.dom._css.removeClass(e.childNodes[1],"music-equalizer")},onblur:function(){t("blur"),this.removeClass("focused");var e=l.getDom(this).childNodes[0];caph.dom._css.removeClass(e.childNodes[0],"thumbnail"),caph.dom._style.set(e.childNodes[0],"background-image","url('')"),caph.dom._css.removeClass(e.childNodes[2],"caph-marquee"),caph.dom._css.addClass(e.childNodes[2],"caph-ellipsis"),caph.dom._css.removeClass(e.childNodes[1],"music-equalizer-blank"),this.itemIndex!==a.index||a.getCurrentState()!==y.PLAYING&&a.getCurrentState()!==y.PAUSED||a._showMusicEqualizer()},onclick:function(){t(this),a._hideMusicEqualizer(),a.index=this.getProperty("itemIndex"),a.play()},onkeydown:function(e){var i=e.key().type;switch(i){case m.ENTER:a._hideMusicEqualizer(),a.index=this.getProperty("itemIndex"),a.play();break;case m.LEFT:a.shuffleButton.focusable()?r.focus(a.shuffleButton):r.focus(a.shuffleButtonOff),e.stopPropagation();break;case m.DOWN:a.playList.length>b.ITEMS&&this.position()[1]===b.HEIGHT*(10+a.itemScrolled)&&this.itemIndex<a.playList.length-1&&(this._parent.position(0,this._parent.position()[1]-b.HEIGHT,0),a.itemScrolled++,p.moveNext()),caph.dom.getElement(".moveUp").style("opacity",1),caph.dom.getElement(".moveDown").style("opacity",1),0===a.itemScrolled?caph.dom.getElement(".moveUp").style("opacity",.3):a.itemScrolled===a.playList.length-b.ITEMS&&caph.dom.getElement(".moveDown").style("opacity",.3);break;case m.UP:this.itemIndex>0&&a.playList.length>b.ITEMS&&this.itemIndex===a.itemScrolled&&(this._parent.position(0,this._parent.position()[1]+b.HEIGHT,0),a.itemScrolled--,p.movePrev()),caph.dom.getElement(".moveUp").style("opacity",1),caph.dom.getElement(".moveDown").style("opacity",1),0===a.itemScrolled?caph.dom.getElement(".moveUp").style("opacity",.3):a.itemScrolled===a.playList.length-b.ITEMS&&caph.dom.getElement(".moveDown").style("opacity",.3),0===this.itemIndex&&e.stopPropagation();break;case m.RIGHT:e.stopPropagation(),t("playlist right keydown");break;default:}}}),g=0,v=this.playList.length;v>g;g++)d=new _(g),d.focusable(!0),d.position(0,g*b.HEIGHT,0),n.addChild(d);return n.addClass("caph-Audioplayer-playlistContainer"),o.addChild(n),e.addChild(o),e.addChild(u),e.addChild(p),this.playlistContainer=n,this.scrollBar=p,e},_createPlayerControls:function(){var t=new s,i=new n({contents:h.play(),position:f[e.resolution].PLAY.POSITION,size:f[e.resolution].PLAY.SIZE}),o=new n({contents:h.pause(),position:f[e.resolution].PAUSE.POSITION,size:f[e.resolution].PLAY.SIZE}),c=new n({contents:h.next(),position:f[e.resolution].NEXT.POSITION,size:f[e.resolution].PLAY.SIZE}),l=new n({contents:h.prev(),position:f[e.resolution].PREV.POSITION,size:f[e.resolution].PLAY.SIZE}),p=new n({contents:h.repeatOne(),position:f[e.resolution].REPEAT.POSITION,size:f[e.resolution].PLAY.SIZE}),d=new n({contents:h.repeatOff(),position:f[e.resolution].REPEAT.POSITION,size:f[e.resolution].PLAY.SIZE}),_=new n({contents:h.repeat(),position:f[e.resolution].REPEAT.POSITION,size:f[e.resolution].PLAY.SIZE}),T=new n({contents:h.setting(),position:f[e.resolution].SETTING.POSITION,size:f[e.resolution].PLAY.SIZE}),E=new n({contents:h.shuffle(),position:f[e.resolution].SHUFFLE.POSITION,size:f[e.resolution].PLAY.SIZE}),I=new n({contents:h.shuffleOff(),position:f[e.resolution].SHUFFLE.POSITION,size:f[e.resolution].PLAY.SIZE}),C=this._createProgressBar();this.tooltip=new u({text:this.languageText.getMessage().audioPlayer.tooltip.play,direction:"top",timeout:2e3,size:f[e.resolution].TOOLTIP.SIZE}),this.tooltip.setTextFont(f[e.resolution].TOOLTIP.FONT_SIZE),this.tooltip.setTailDirection(caph.ui.base.component.Tooltip.TOP),this.tooltip.setTailAlign(caph.ui.base.component.Tooltip.CENTER),this.addChild(this.tooltip),t.addClass("caph-ui-component-audio-player");var w=new s,x=new s;w.addClass("caph-service-playerprgsbar-curtime"),x.addClass("caph-service-playerprgsbar-durtime"),w.setProperty({innerHTML:'<div id= "curTime" >00:00</div>'}),x.setProperty({innerHTML:'<div id= "durTime" >00:00</div>'}),t.addChild([w,x]);var S={PLAY:function(t){a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type?(e.curState===y.STOPPED?e.play():e.resume(),r.focus(o)):o.removeClass("focused")},PAUSE:function(t){a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type?(r.focus(i),e.pause()):i.removeClass("focused")},NEXT:function(t){(a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type)&&(e.index===e.playList.length-1&&e.getRepeatMode()!==v.ALL?null:e._hideMusicEqualizer(),e.index=e.getRepeatMode()===v.ONE&&e.index<e.playList.length-1?e.index=e.index+1:e.index,e.next())},PREV:function(t){a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type?(0===e.index&&e.getRepeatMode()!==v.ALL?null:e._hideMusicEqualizer(),e.index=e.getRepeatMode()===v.ONE&&e.index>0?e.index=e.index-1:e.index,e.prev()):a.getType(t.detail.keyCode)===m.LEFT&&r.focus(e.progressBar)},REPEAT:{ON:function(t){a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type?(this.visibility(!1),this.focusable(!1),p.focusable(!0),d.focusable(!1),p.visibility(!0),r.focus(p),e.setRepeatMode(v.ONE)):p.removeClass("focused")},ONE:function(t){a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type?(this.visibility(!1),this.focusable(!1),d.focusable(!0),_.focusable(!1),d.visibility(!0),r.focus(d),e.setRepeatMode(v.NO)):d.addClass("focused")},OFF:function(t){a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type?(this.visibility(!1),this.focusable(!1),_.focusable(!0),p.focusable(!1),_.visibility(!0),r.focus(_),e.setRepeatMode(v.ALL)):_.removeClass("focused")}},SETTING:function(){},SHUFFLE:{ON:function(t){a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type?(this.visibility(!1),this.focusable(!1),I.focusable(!0),I.visibility(!0),r.focus(I),e.setShuffleMode(g.OFF)):(a.getType(t.detail.keyCode)===m.RIGHT&&(this.removeClass("focused"),r.focus(e.playlistContainer._children[e.itemScrolled+b.ITEMS-1]),t.stopPropagation()),I.removeClass("focused"))},OFF:function(t){a.getType(t.detail.keyCode)===m.ENTER||"click"===t.type?(this.visibility(!1),this.focusable(!1),E.focusable(!0),E.visibility(!0),r.focus(E),e.setShuffleMode(g.ON)):(a.getType(t.detail.keyCode)===m.RIGHT&&(this.removeClass("focused"),r.focus(e.playlistContainer._children[e.itemScrolled+b.ITEMS-1]),t.stopPropagation()),E.removeClass("focused"))}}},P={SHOW:function(t,i){switch(i.stopPropagation(),t){case"play":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.play),e.tooltip.position(f[e.resolution].TOOLTIP.PLAY.POSITION[0],f[e.resolution].TOOLTIP.PLAY.POSITION[1],f[e.resolution].TOOLTIP.PLAY.POSITION[2]);break;case"pause":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.pause),e.tooltip.position(f[e.resolution].TOOLTIP.PLAY.POSITION[0],f[e.resolution].TOOLTIP.PLAY.POSITION[1],f[e.resolution].TOOLTIP.PLAY.POSITION[2]);break;case"prev":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.previous),e.tooltip.position(f[e.resolution].TOOLTIP.PREV.POSITION[0],f[e.resolution].TOOLTIP.PREV.POSITION[1],f[e.resolution].TOOLTIP.PREV.POSITION[2]);break;case"next":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.next),e.tooltip.position(f[e.resolution].TOOLTIP.NEXT.POSITION[0],f[e.resolution].TOOLTIP.NEXT.POSITION[1],f[e.resolution].TOOLTIP.NEXT.POSITION[2]);break;case"shuffleoff":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.shuffleOff),e.tooltip.position(f[e.resolution].TOOLTIP.SHUFFLE.POSITION[0],f[e.resolution].TOOLTIP.SHUFFLE.POSITION[1],f[e.resolution].TOOLTIP.PLAY.POSITION[2]);break;case"shuffle":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.shuffle),e.tooltip.position(f[e.resolution].TOOLTIP.SHUFFLE.POSITION[0],f[e.resolution].TOOLTIP.SHUFFLE.POSITION[1],f[e.resolution].TOOLTIP.PLAY.POSITION[2]);break;case"repeat":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.repeat),e.tooltip.position(f[e.resolution].TOOLTIP.REPEAT.POSITION[0],f[e.resolution].TOOLTIP.REPEAT.POSITION[1],f[e.resolution].TOOLTIP.REPEAT.POSITION[2]);break;case"repeatone":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.repeatOne),e.tooltip.position(f[e.resolution].TOOLTIP.REPEAT.POSITION[0],f[e.resolution].TOOLTIP.REPEAT.POSITION[1],f[e.resolution].TOOLTIP.REPEAT.POSITION[2]);break;case"repeatoff":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.repeatOff),e.tooltip.position(f[e.resolution].TOOLTIP.REPEAT.POSITION[0],f[e.resolution].TOOLTIP.REPEAT.POSITION[1],f[e.resolution].TOOLTIP.REPEAT.POSITION[2]);break;case"setting":e.tooltip.setText(e.languageText.getMessage().audioPlayer.tooltip.setting),e.tooltip.position(f[e.resolution].TOOLTIP.SETTING.POSITION[0],f[e.resolution].TOOLTIP.SETTING.POSITION[1],f[e.resolution].TOOLTIP.SETTING.POSITION[2]);break;default:}e.tooltip.show()},HIDE:function(){e.tooltip.hide()}};return i.on({click:S.PLAY,keydown:S.PLAY,focus:function(t){P.SHOW("play",t)},blur:P.HIDE}),o.on({click:S.PAUSE,keydown:S.PAUSE,focus:function(t){P.SHOW("pause",t)},blur:P.HIDE}),c.on({click:S.NEXT,keydown:S.NEXT,focus:function(t){P.SHOW("next",t)},blur:P.HIDE}),l.on({click:S.PREV,keydown:S.PREV,focus:function(t){P.SHOW("prev",t)},blur:P.HIDE}),_.on({click:S.REPEAT.ON,keydown:S.REPEAT.ON,focus:function(t){P.SHOW("repeat",t)},blur:P.HIDE}),p.on({click:S.REPEAT.ONE,keydown:S.REPEAT.ONE,focus:function(t){P.SHOW("repeatone",t)},blur:P.HIDE}),d.on({click:S.REPEAT.OFF,keydown:S.REPEAT.OFF,focus:function(t){P.SHOW("repeatoff",t)},blur:P.HIDE}),I.on({click:S.SHUFFLE.OFF,keydown:S.SHUFFLE.OFF,focus:function(t){P.SHOW("shuffleoff",t)},blur:P.HIDE}),E.on({click:S.SHUFFLE.ON,keydown:S.SHUFFLE.ON,focus:function(t){P.SHOW("shuffle",t)},blur:P.HIDE}),T.on({click:S.SETTING,keydown:S.SETTING,focus:function(t){P.SHOW("setting",t)},blur:P.HIDE}),t.addChild([C,l,i,c,o,_,d,p,E,I]),o.visibility(!1),p.visibility(!1),_.visibility(!1),E.visibility(!1),p.focusable(!1),_.focusable(!1),E.focusable(!1),r.focus(i),this.playButton=i,this.pauseButton=o,this.shuffleButton=E,this.shuffleButtonOff=I,r.focus(i),t},onkeydown:function(t){var e=t.key().type;switch(e){case m.ENTER:break;case m.REWIND:(this.getCurrentState()!==y.STOPPED||this.getCurrentState()!==y.ERROR)&&this.rewind();break;case m.FF:(this.getCurrentState()!==y.STOPPED||this.getCurrentState()!==y.ERROR)&&this.forward();break;case m.PLAY:this.getCurrentState()!==y.STOPPED?this.resume():this.play(),this.pauseButton.focus();break;case m.PAUSE:this.pause(),this.playButton.focus();break;case m.STOP:this.stop(),this.playButton.visibility(!0),this.pauseButton.focusable(!1),this.pauseButton.visibility(!1),this.playButton.focusable(!0),this.playButton.focus(),this.curState=y.STOPPED,this._hideMusicEqualizer();break;case m.RETURN:case m.RETURN_ORSAY:try{this.callback(),this.popupConfirm.destroy(),this.close()}catch(i){console.log(i.message)}break;default:}},_registerKeys:function(){var t=null;try{t=tizen.tvinputdevice.getSupportedKeys();for(var e=0;t.length>e;e++)switch(t[e].name){case"MediaPlay":case"MediaPause":case"MediaRewind":case"MediaFastForward":case"MediaStop":tizen.tvinputdevice.registerKey(t[e].name);break;default:}}catch(i){console.log("Error :"+i.message)}}})}(this),function(t){"use strict";$class({$namespace:"caph.stripe.ui.widget.audioPlayer.html5",$extends:caph.stripe.ui.widget.audioPlayer.base,$constructor:function(t,e){this.$super(t,e),this._initilizePlayer()},play:function(){if(this.index>=0){var t=this.playList[this.index];try{this.AVPlay.src=t.url,this.AVPlay.play()}catch(e){console.log(e.message)}}},pause:function(){try{return this.AVPlay.pause(),!0}catch(t){return!1}},resume:function(){try{return this.AVPlay.play(),!0}catch(t){return!1}},stop:function(){try{return this.AVPlay.currentTime=0,this.AVPlay.pause(),!0}catch(t){return!1}},rewind:function(){try{this.AVPlay.currentTime=this.AVPlay.currentTime-10}catch(t){return!1}},forward:function(){try{this.AVPlay.currentTime=this.AVPlay.currentTime+10}catch(t){return!1}},getDuration:function(){var e=Math.floor(this.AVPlay.duration);try{return new t.PlayTime(e)}catch(i){console.log(i)}},_initilizePlayer:function(){var t=this;this.AVPlay=new Audio,this.AVPlay.addEventListener("timeupdate",function(){null!==t.AVPlay&&t._oncurrentposition(t.AVPlay.currentTime,t.AVPlay.duration)}),this.AVPlay.addEventListener("play",function(){t._onstatechange.call(t,"play")}),this.AVPlay.addEventListener("pause",function(){t._onstatechange.call(t,"paused")}),this.AVPlay.addEventListener("ended",function(){t._onstreamcompleted.apply(t,arguments)}),this.AVPlay.addEventListener("playing",function(){t._onstatechange.call(t,"playing",t.playList[t.index])}),this.AVPlay.addEventListener("loadstart",function(){t._onstatechange.call(t,"loadstart")}),this.AVPlay.addEventListener("seeked",function(){t._onstatechange.call(t,"seeked")}),this.AVPlay.addEventListener("canplay",function(){t._onstatechange.call(t,"canplay")}),this.AVPlay.addEventListener("error",function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:t._onerror(t.languageText.getMessage().audioPlayer.error.aborted.title,t.languageText.getMessage().audioPlayer.error.aborted.message);break;case e.target.error.MEDIA_ERR_NETWORK:t._onerror(t.languageText.getMessage().audioPlayer.error.networkError.title,t.languageText.getMessage().audioPlayer.error.networkError.message);break;case e.target.error.MEDIA_ERR_DECODE:t._onerror(t.languageText.getMessage().audioPlayer.error.mediaDecode.title,t.languageText.getMessage().audioPlayer.error.mediaDecode.message);break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:t._onerror(t.languageText.getMessage().audioPlayer.error.srcNotSupported.title,t.languageText.getMessage().audioPlayer.error.srcNotSupported.message);break;default:t._onerror(t.languageText.getMessage().audioPlayer.error.unknown.title,t.languageText.getMessage().audioPlayer.error.unknown.message)}})}})}(this),function(t){"use strict";var e=caph.require("module.renderer.View"),i=(caph.require("module.event.Manager"),caph.require("module.focus.Manager")),n=caph.require("stripe.ui.component.Button"),s=caph.require("stripe.ui.component.Checkbox"),o=caph.require("ui.base.component.Label"),r=caph.require("stripe.ui.component.Icon"),a=caph.require("stripe.ui.component.Slider"),h=caph.require("stripe.ui.component.Popup"),u=caph.require("stripe.ui.component.Indicator"),c=caph.require("ui.base.Component"),l=caph.require("base.resource.Language"),p=null,d={HEIGHT:1080,WIDTH:1920,WIDTH_16:420,WIDTH_43:1440,LEFT_43:240},f=null,m={1080:{PREV:{POSITION:[726,101,0],SIZE:[78,80]},PLAY:{POSITION:[882,101,0],SIZE:[78,80]},REW:{POSITION:[804,101,0],SIZE:[78,80]},FF:{POSITION:[960,101,0],SIZE:[78,80]},NEXT:{POSITION:[1038,101,0],SIZE:[78,80]},REPEAT:{POSITION:[1116,101,0],SIZE:[78,80]},SETTING:{POSITION:[1838,101,0],SIZE:[78,80]},STATUSBTN:{POSITION:[34,178,0],SIZE:[52,26]},RETURN:{POSITION:[0,2,1],SIZE:[78,99]},BANNER_TRIGGER_BTN:{POSITION:[992,101,0],SIZE:[54,54]},PROGRESSBAR:{POSITION:[1480,100,100],SIZE:[204,189]},LOADING:{POSITION:[920,500,0],SIZE:[935,54]},SETTING_FRAME:{TOP:200,WIDTH:350,HEIGHT:211,PADDING:4},INFOPOPUP:{HEIGHT:680},TOOLTIPWIDTH:{SIZE:[180,50]},TOOLTIPFONT:{FONT_SIZE:'20pt "Samsung SVD_Medium"'},TOOLTIP:{PREV:{POSITION:[710,195,10]},PLAY:{POSITION:[866,195,10]},FF:{POSITION:[944,195,10]},REW:{POSITION:[788,195,10]},NEXT:{POSITION:[1022,195,10]},SETTING:{POSITION:[1795,195,10]},REPEAT:{POSITION:[1100,195,10]},SIZE:[120,50]},PICTURE_FRAME:{POSITION:[-222,200,1],WIDTH:384,HEIGHT:70,PADDING:4},SETTING_MENU_BUTTON:{WIDTH:350,HEIGHT:69,FONTSIZE:30,LINEHEIGHT:70},SETTING_MENU_ITEM:{WIDTH:388,HEIGHT:70,FONTSIZE:30,LINEHEIGHT:70},SETTING_MENU_ITEM_DIFF:{FIRST:4,SECOND:8},CHECK_CONTAINER:{WIDTH:350,HEIGHT:70,FONTSIZE:30,MARGINTOP:16,MARGINLEFT:10},LABEL_SIZE:{WIDTH:250,HEIGHT:70,FONTSIZE:30,LINEHEIGHT:50,LEFT:15,TOP:0},SUBTITLE_POPUP:{POSITION:[0,0,0],SIZE:[1920,1080]},SUBTILE_POPUP_TITLE:{POSITION:[0,0,1],SIZE:[1122,96]},SUBTILE_INDICATOR_UP:{WIDTH:366,HEIGHT:43},SUBTILE_INDICATOR_DOWN:{WIDTH:366,HEIGHT:16},SUBTILE_BUTTON_OK:{POSITION:[20,150,0],SIZE:[270,66]},SUBTILE_BUTTON_CANCEL:{POSITION:[20,232,0],SIZE:[270,66]},SUBTILE_DWONARROW:{POSITION:[0,87,1]},SUBTILE_OPTION_CONTAINER:{POSITION:[0,87,1]},SUBTILE_POPUP_TEXT:{POSITION:[0,0,1],SIZE:[782,145]},SUBTILE_ROW_ITEM:{HEIGHT:72},SUBTILE_LEFT_SUBITEM:{POSITION:[0,0,1],SIZE:[381,72]},SUBTILE_RIGHT_SUBITEM:{POSITION:[413,0,1],SIZE:[381,72]},SUBTILE_POPULATE_SUBLIS:{WIDTH:310,POSITION:[470,0,0],SIZE:[250,70]},SUBTILE_SETTING_POSITION:{POSITION:[0,336,0]},SUBLIST_UP_DOWN_ARROW_HEIGHT:58,PICTURE_SIZE:{SCREEN_FIT:[1920,1080,0,0],SMART_VIEW_1:[1020,880,450,100],SMART_VIEW_2:[550,380,650,350],_16_9:[1920,1080,0,0],_4_3:[1440,1080,240,0]}},720:{PREV:{POSITION:[484,67,0],SIZE:[52,53]},PLAY:{POSITION:[588,67,0],SIZE:[52,53]},REW:{POSITION:[536,67,0],SIZE:[52,53]},FF:{POSITION:[640,67,0],SIZE:[52,53]},NEXT:{POSITION:[692,67,0],SIZE:[52,53]},REPEAT:{POSITION:[744,67,0],SIZE:[52,53]},SETTING:{POSITION:[1225,67,0],SIZE:[52,53]},BANNER_TRIGGER_BTN:{POSITION:[661,67,0],SIZE:[36,36]},STATUSBTN:{POSITION:[22,118,0],SIZE:[34,17]},RETURN:{POSITION:[0,2,1],SIZE:[52,66]},PROGRESSBAR:{POSITION:[987,67,67],SIZE:[136,126]},LOADING:{POSITION:[613,333,0],SIZE:[935,54]},SETTING_FRAME:{TOP:133,WIDTH:233,HEIGHT:140,PADDING:2},INFOPOPUP:{HEIGHT:453},TOOLTIPWIDTH:{SIZE:[120,33]},TOOLTIPFONT:{FONT_SIZE:'15pt "Samsung SVD_Medium"'},TOOLTIP:{PREV:{POSITION:[473,132,10]},PLAY:{POSITION:[577,132,10]},FF:{POSITION:[629,132,10]},REW:{POSITION:[525,132,10]},NEXT:{POSITION:[681,132,10]},SETTING:{POSITION:[1192,132,10]},REPEAT:{POSITION:[733,132,10]},SIZE:[80,33]},PICTURE_FRAME:{POSITION:[-148,133,1],WIDTH:256,HEIGHT:46.5,PADDING:2},SETTING_MENU_BUTTON:{WIDTH:233,HEIGHT:46,FONTSIZE:20,LINEHEIGHT:46},SETTING_MENU_ITEM_DIFF:{FIRST:2,SECOND:5},SETTING_MENU_ITEM:{WIDTH:258,HEIGHT:46,FONTSIZE:20,LINEHEIGHT:46},CHECK_CONTAINER:{WIDTH:233,HEIGHT:47,FONTSIZE:20,MARGINTOP:10,MARGINLEFT:6},LABEL_SIZE:{WIDTH:166,HEIGHT:47,FONTSIZE:20,LINEHEIGHT:33,LEFT:10,TOP:0},SUBTITLE_POPUP:{POSITION:[0,0,0],SIZE:[1280,720]},SUBTILE_POPUP_TITLE:{POSITION:[0,0,1],SIZE:[748,64]},SUBTILE_INDICATOR_UP:{WIDTH:244,HEIGHT:28},SUBTILE_INDICATOR_DOWN:{WIDTH:244,HEIGHT:10},SUBTILE_BUTTON_OK:{POSITION:[13,100,0],SIZE:[180,44]},SUBTILE_BUTTON_CANCEL:{POSITION:[13,154,0],SIZE:[180,44]},SUBTILE_DWONARROW:{POSITION:[0,58,1]},SUBTILE_OPTION_CONTAINER:{POSITION:[0,58,1]},SUBTILE_POPUP_TEXT:{POSITION:[0,0,1],SIZE:[521,96]},SUBTILE_ROW_ITEM:{HEIGHT:48},SUBTILE_LEFT_SUBITEM:{POSITION:[0,0,1],SIZE:[254,48]},SUBTILE_RIGHT_SUBITEM:{POSITION:[275,0,1],SIZE:[254,48]},SUBTILE_POPULATE_SUBLIS:{WIDTH:206,POSITION:[313,0,0],SIZE:[166,46]},SUBTILE_SETTING_POSITION:{POSITION:[0,224,0]},SUBLIST_UP_DOWN_ARROW_HEIGHT:39,PICTURE_SIZE:{SCREEN_FIT:[1280,720,0,0],SMART_VIEW_1:[680,587,300,67],SMART_VIEW_2:[367,253,433,233],_16_9:[1280,720,0,0],_4_3:[960,720,160,0]}}},_=null,g=function(t){},v={ENTER:"enter",PAUSE:"pause",LEFT:"left",UP:"up",RIGHT:"right",DOWN:"down",POWER:"power",REWIND:"rewind",STOP:"stop",PLAY:"play",REC:"rec",FF:"ff",GUIDE:"guide",RETURN:"return",EXIT:"exit"};$class({$namespace:"caph.stripe.ui.widget.videoPlayer.base",$extends:caph.ui.base.Component,$constructor:function(e){g("[VideoPlayerBase]$constructor"),this.$super(e),_=1080>t.innerHeight?{WIDTH:1280,HEIGHT:720}:{WIDTH:1920,HEIGHT:1080},this.picSize=m[_.HEIGHT].PICTURE_SIZE,p=this,this.subtitleOptions=[this.languageObj.getMessage().videoPlayer.subtitle.options.subtitleStatus.options.on,this.languageObj.getMessage().videoPlayer.subtitle.options.subtitleStatus.options.off],this.languageOptions=["Language1","Language2","Language3","language4"],this.subtitleSettingOptions=[[this.languageObj.getMessage().videoPlayer.subtitle.options.subtitleStatus.value,this.subtitleOptions,-m[_.HEIGHT].SUBTILE_SETTING_POSITION.POSITION[1]],[this.languageObj.getMessage().videoPlayer.subtitle.options.language.value,this.languageOptions,-m[_.HEIGHT].SUBTILE_SETTING_POSITION.POSITION[1]]],this.subListPos=m[_.HEIGHT].SUBTILE_SETTING_POSITION.POSITION[1],this._initCustomComponent()},_initialize:function(){g("[VideoPlayerBase]$_initialize"),this.languageObj=l.getInstance(),this.languageObj.getSupportLanguageCodeSet()||this.languageObj.setLanguage(["en"],"en"),this.KEY_CODE=v,this.enablePrevNext=!1,this.videoPlayerView=null,this.progressSlider=null,this.currentTime=null,this.duration=null,this.bannerTriggerBtn=null,this.playbtn=null,this.repeatbtn=null,this.rewbtn=null,this.ffbtn=null,this.settingbtn=null,this.videoFileName=null,this.setingFrame=null,this.PictureMenuFrame=null,this.videoDate=null,this.videoCountTotal=null,this.settingFrameOptions=[this.languageObj.getMessage().videoPlayer.menuItem.pictureSize.title,this.languageObj.getMessage().videoPlayer.menuItem.subtitle,this.languageObj.getMessage().videoPlayer.menuItem.information],this.videoLoading=null,this.messageTimer=null,this.isInformationPopupOpen=!1,this.infoMainDiv=null,this.videoPopupAlert=null,this.videoErrorAlert=null,this.focusManager=i.getInstance(),this.PLAYER_HIDE_TIME=5e3,this.BUTTON_HIDE_TIME=3e3,this.hPlayerHideTimer=null,this.hButtonHideTimer=null,this.VIEW_TYPE={FULL:"full",NONE:"none"},this.isSubtitleEnable=!0,this.subtitleOptions=null,this.languageOptions=null,this.subtitleSettingOptions=null,this.selectedOptionsIndex=[0,0],this.tempSublistSelectedIndex=[0,0],this.subListContainer=null,this.subList=null,this.subtitlePopup=null,this.subtitleOptionContainer=null,this.okButton=null,this.isPlay=!1,this.subListPos=null,this.addClass("caph-videoplayer"),this.$super()},setOption:function(t){console.log("Setoption base");try{if(!t.hasOwnProperty("items"))throw"Error : : Items are not found ..Please provide items.";if(!(t.items.length>0))throw"Error : : Items are empty";this._playList.items=t.items||{},this._playList.currentIndex=0,this.viewType=t.viewType||this.VIEW_TYPE.FULL,g("base constructor this.viewType"+this.viewType),this._playList.repeatMode=this._playList.REPEAT.NO}catch(e){g(e)}this.enablePrevNext=t.enablePrevNext?t.enablePrevNext:!1,"function"==typeof t.callback&&(this.callbackFn=t.callback),this.$super(t)},_initCustomComponent:function(){f=$class({$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t),this.focusable(!0),this.focus=t.focus||!1,this.text=t.text,this._createContainer(t),this.setProperty({id:t.id,style:{border:"1px solid rgba(255,255,255,0.1)",width:t.width,fontSize:m[_.HEIGHT].CHECK_CONTAINER.FONTSIZE+"px",height:m[_.HEIGHT].CHECK_CONTAINER.HEIGHT+"px"}})},_createContainer:function(t){var e=this;
e.checkbox=new s({hasBox:t.hasBox,checked:t.checked,dom:{style:{marginTop:m[_.HEIGHT].CHECK_CONTAINER.MARGINTOP+"px",marginLeft:m[_.HEIGHT].CHECK_CONTAINER.MARGINLEFT+"px",position:"relative","float":"left"}}}),e.checkbox.on({statechange:function(){e._change()}}),e.label=new o({text:t.text,align:{horizontal:"left",vertical:"middle"},size:[m[_.HEIGHT].LABEL_SIZE.WIDTH,m[_.HEIGHT].LABEL_SIZE.HEIGHT],dom:{style:{position:"relative",color:"rgba(255, 255, 255, 0.6)",fontSize:m[_.HEIGHT].LABEL_SIZE.FONTSIZE+"px",top:m[_.HEIGHT].LABEL_SIZE.TOP+"px",lineHeight:m[_.HEIGHT].LABEL_SIZE.LINEHEIGHT+"px",left:m[_.HEIGHT].LABEL_SIZE.LEFT+"px"}}}),e.addChild(e.checkbox),e.addChild(e.label)},_change:function(){this.state=this.text+" State : "+this.checkbox.isChecked()},_update:function(){var t=this.checkbox.isChecked();this.isEnable()&&!t&&(this._toggleGroup(),this.checkbox.setChecked(!t))},_updateValue:function(){var t=this.getProperty("id"),e={picture_original:"mode1",picture_screen_fit:"mode2",picture_smart_view1:"smartview1",picture_smart_view2:"smartview2",picture_smart_view3:"16:9",picture_smart_view4:"4:3"},i={picture_original:p.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options.original,picture_screen_fit:p.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options.screenFit,picture_smart_view1:p.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options.smartview1,picture_smart_view2:p.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options.smartview2,picture_smart_view3:p.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options._16_9,picture_smart_view4:p.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options._4_3};e.hasOwnProperty(t)&&(p._setPictureSize(e[t]),p.settingFrame._children[0].setContent(p.settingFrameOptions[0]+":"+i[t]))},_toggleGroup:function(){for(var t=this._parent,e=t.getChildren(),i=e.length,n=0;i>n;n++){var s=e[n].getChildren();s[0].setChecked(!1)}},onfocus:function(){this.focus&&(this.addClass("submenuFocus"),this.label.setStyle({color:"#464646"}))},onblur:function(){this.removeClass("submenuFocus"),this.label.setStyle({color:"rgba(255, 255, 255, 0.6)"})},onkeydown:function(t){var e=this.getProperty("innerText").split(":")[0];g(e),t.key().up&&"picture_original"===this.getProperty("id")&&t.stopPropagation(),(t.key().left||t.key().right)&&t.stopPropagation(),this.isEnable()&&t.key().enter&&(this._update(),this._updateValue())},onclick:function(t){this.focus&&t.source!==this.checkbox&&this._update(),this._updateValue()}})},_toTitleCase:function(t){return t.replace(/\b([a-z])/g,function(t,e){return e.toUpperCase()})},_addControlButtons:function(t){this.playbtn=new n({size:m[_.HEIGHT].PLAY.SIZE,contents:r.play(),position:m[_.HEIGHT].PLAY.POSITION,align:"center | middle"}),this.playbtn.setAlign("middle"),this.playbtn.on({focus:function(){p.commonTooltip.setWidth(m[_.HEIGHT].TOOLTIP.SIZE[0],m[_.HEIGHT].TOOLTIP.SIZE[1]);var t=p.videoEle?"html":"tizen";switch(t){case"html":p.videoEle&&p.videoEle.paused?p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.play):p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.pause);break;case"tizen":p.playerObj&&"PLAYING"===p.playerObj.getState()?p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.pause):p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.play);break;default:}p.commonTooltip.position(m[_.HEIGHT].TOOLTIP.PLAY.POSITION[0],m[_.HEIGHT].TOOLTIP.PLAY.POSITION[1],0),p.commonTooltip.show()},blur:function(){p.commonTooltip.hide()},click:function(){p._playVideo()},keydown:function(t){t.key().enter&&p.videoPlayerView.visibility()&&p._playVideo()}}),this.playbtn._children[0].setProperty({id:"playId"}),this.enablePrevNext&&(this.prevbtn=new n({size:m[_.HEIGHT].PREV.SIZE,contents:r.prev(),position:m[_.HEIGHT].PREV.POSITION,align:"center | middle"}),this.prevbtn.setAlign("middle"),this.prevbtn.on({focus:function(){p.commonTooltip.setWidth(m[_.HEIGHT].TOOLTIP.SIZE[0],m[_.HEIGHT].TOOLTIP.SIZE[1]),p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.previous),p.commonTooltip.position(m[_.HEIGHT].TOOLTIP.PREV.POSITION[0],m[_.HEIGHT].TOOLTIP.PREV.POSITION[1],0),p.commonTooltip.show()},blur:function(){p.commonTooltip.hide()},click:function(){p._previousVideo(!1)},keydown:function(t){t.key().enter&&p.videoPlayerView.visibility()&&p._previousVideo(!1)}}),this.prevbtn._children[0].setProperty({id:"prevId"}),this.prevbtn.setEnable(!1),this.nextbtn=new n({size:m[_.HEIGHT].NEXT.SIZE,contents:r.next(),position:m[_.HEIGHT].NEXT.POSITION,align:"center | middle"}),this.nextbtn.setAlign("middle"),this.nextbtn.on({focus:function(){p.commonTooltip.setWidth(m[_.HEIGHT].TOOLTIP.SIZE[0],m[_.HEIGHT].TOOLTIP.SIZE[1]),p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.next),p.commonTooltip.position(m[_.HEIGHT].TOOLTIP.NEXT.POSITION[0],m[_.HEIGHT].TOOLTIP.NEXT.POSITION[1],0),p.commonTooltip.show()},blur:function(){p.commonTooltip.hide()},click:function(){p._nextVideo(!1)},keydown:function(t){t.key().enter&&p.videoPlayerView.visibility()&&p._nextVideo(!1)}}),this.nextbtn._children[0].setProperty({id:"nextId"}),t.addChild(this.prevbtn).addChild(this.nextbtn)),this.rewbtn=new n({size:m[_.HEIGHT].REW.SIZE,contents:r.rew(),position:m[_.HEIGHT].REW.POSITION,align:"center | middle"}),this.rewbtn.setAlign("middle"),this.rewbtn.on({focus:function(){p.commonTooltip.setWidth(m[_.HEIGHT].TOOLTIP.SIZE[0],m[_.HEIGHT].TOOLTIP.SIZE[1]),p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.rewind),p.commonTooltip.position(m[_.HEIGHT].TOOLTIP.REW.POSITION[0],m[_.HEIGHT].TOOLTIP.REW.POSITION[1],0),p.commonTooltip.show()},blur:function(){p.commonTooltip.hide()},click:function(){p._rewindVideo()},keydown:function(t){t.key().enter&&p.videoPlayerView.visibility()&&(p._rewindVideo(),t.stopPropagation()),p._showPlayer()}}),this.rewbtn._children[0].setProperty({id:"rewId"}),this.ffbtn=new n({size:m[_.HEIGHT].FF.SIZE,contents:r.ff(),position:m[_.HEIGHT].FF.POSITION,align:"center | middle"}),this.ffbtn.setAlign("middle"),this.ffbtn.on({focus:function(){p.commonTooltip.setWidth(m[_.HEIGHT].TOOLTIP.SIZE[0],m[_.HEIGHT].TOOLTIP.SIZE[1]),p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.forward),p.commonTooltip.position(m[_.HEIGHT].TOOLTIP.FF.POSITION[0],m[_.HEIGHT].TOOLTIP.FF.POSITION[1],0),p.commonTooltip.show()},blur:function(){p.commonTooltip.hide()},click:function(){p._forwardVideo()},keydown:function(t){t.key().enter&&p.videoPlayerView.visibility()&&(p._forwardVideo(),t.stopPropagation()),p._showPlayer()}}),this.ffbtn._children[0].setProperty({id:"ffId"}),this.repeatbtn=new n({size:m[_.HEIGHT].REPEAT.SIZE,contents:r.repeatOff(),position:p.enablePrevNext?m[_.HEIGHT].REPEAT.POSITION:m[_.HEIGHT].NEXT.POSITION,align:"center | middle"}),this.repeatbtn.setAlign("middle"),this.repeatbtn.on({focus:function(){switch(p.commonTooltip.setWidth(m[_.HEIGHT].TOOLTIPWIDTH.SIZE[0],m[_.HEIGHT].TOOLTIPWIDTH.SIZE[1]),p.commonTooltip.position(m[_.HEIGHT].TOOLTIP.REPEAT.POSITION[0],m[_.HEIGHT].TOOLTIP.REPEAT.POSITION[1],0),p._playList.getRepeatMode()){case p._playList.REPEAT.NO:p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.repeatOff);break;case p._playList.REPEAT.ONE:p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.repeatOne);break;case p._playList.REPEAT.ALL:p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.repeatOn);break;default:}p.commonTooltip.show()},blur:function(){p.commonTooltip.hide()},click:function(){p._repeatVideo()},keydown:function(t){t.key().enter&&p.videoPlayerView.visibility()&&p._repeatVideo()}}),this.repeatbtn._children[0].setProperty({id:"repeatId"}),this.settingbtn=new n({size:m[_.HEIGHT].SETTING.SIZE,contents:r.setting(),position:m[_.HEIGHT].SETTING.POSITION,align:"center | middle"}),this.settingbtn.setAlign("middle"),this.settingbtn.on({focus:function(){p.commonTooltip.setWidth(m[_.HEIGHT].TOOLTIP.SIZE[0],m[_.HEIGHT].TOOLTIP.SIZE[1]),p.commonTooltip.setText(p.languageObj.getMessage().videoPlayer.tooltip.setting),p.commonTooltip.position(m[_.HEIGHT].TOOLTIP.SETTING.POSITION[0],m[_.HEIGHT].TOOLTIP.SETTING.POSITION[1],0),p.commonTooltip.show()},blur:function(){p.commonTooltip.hide()},click:function(){p._settingVideo()},keydown:function(t){p._showPlayer(),t.key().enter&&p.videoPlayerView.visibility()&&p._settingVideo(),t.key().left&&(t.stopPropagation(),p.focusManager.focus(p.repeatbtn)),t.key().down&&(t.stopPropagation(),p.focusManager.focus(p.progressSlider))}}),this.settingbtn._children[0].setProperty({id:"settingId"}),this.returnbtn=new n({size:m[_.HEIGHT].RETURN.SIZE,contents:r.ret(),position:m[_.HEIGHT].RETURN.POSITION,align:"center | middle"}),this.returnbtn.on({focus:function(){p._showPlayer()},click:function(){p.exit()},keydown:function(t){t.key().enter&&p.videoPlayerView.visibility()&&p.exit(),t.key().right&&(t.stopPropagation(),p.focusManager.focus(p.prevbtn)),t.key().down&&(t.stopPropagation(),p.focusManager.focus(p.progressSlider))}}),this.returnbtn._children[0].setProperty({id:"retrunId"}),this.returnbtn.visibility(!1),t.addChild(this.playbtn).addChild(this.rewbtn).addChild(this.ffbtn).addChild(this.repeatbtn).addChild(this.settingbtn).addChild(this.returnbtn)},_addVideoInfo:function(t){this.videoFileName=new e,this.videoDate=new e,this.videoCountTotal=new e,this.videoFileName.addClass("caph-videoplayer-fileNamebtn"),this.videoDate.addClass("caph-videoplayer-dateNamebtn"),this.videoCountTotal.addClass("caph-videoplayer-totalCountSongbtn"),t.addChild(this.videoFileName).addChild(this.videoDate).addChild(this.videoCountTotal)},_addProgressBar:function(t){this.progressSlider=new a({width:m[_.HEIGHT].PROGRESSBAR.POSITION[0],value:m[_.HEIGHT].PROGRESSBAR.SIZE[2]}),this.progressSlider.position(m[_.HEIGHT].PROGRESSBAR.SIZE[0],m[_.HEIGHT].PROGRESSBAR.SIZE[1]),this.statusbtn=new e,this.statusbtn.setProperty({id:"statusDiv"}),this.statusbtn.addClass("caph-videoplayer-statusbtn"),this.statusbtn.addClass("caph-videoplayer-statuspause"),t.addChild(this.progressSlider).addChild(this.statusbtn)},_createFullView:function(){g("[VideoPlayerBase]_createFullView");var t=caph.require("stripe.ui.component.Tooltip");this.bannerTriggerBtn=new n({contents:r.play(),position:m[_.HEIGHT].BANNER_TRIGGER_BTN.POSITION,align:"center | middle",size:m[_.HEIGHT].BANNER_TRIGGER_BTN.SIZE}),this.bannerTriggerBtn.setStyle({borderRadius:"50px",overflow:"hidden",backgroundColor:"transparent"}),this.bannerTriggerBtn.on({focus:function(t){t.stopPropagation()},click:function(){p._showPlayer()}}),this.bannerTriggerBtn.visibility(!1),this.videoPlayerView=new e,this.videoPlayerView.addClass("caph-videoplayer-view"),this.addChild(this.videoPlayerView),this.videoPopupAlert=new h({popupType:"ALERT",buttonContent:this.languageObj.getMessage().defaultButtons.ok,bgType:"MessagePopup",isBgAlphaType:!1,height:m[_.HEIGHT].INFOPOPUP.HEIGHT,callback:function(){p._showPlayer(),setTimeout(function(){p.playbtn.focus()},150)}}),this.videoPopupAlert.setProperty({id:"infoMainDiv"}),this.addChild(this.bannerTriggerBtn),this.addChild(this.videoPopupAlert),this.infoSubDiv=new e,this.infoSubDiv.setProperty({id:"infoSubDiv",innerHTML:'<div class="caph-video-popup-title"><div id= "caph-video-popup-titleText" class="caph-video-popup-titleText"></div></div><div id="messageContainer" class="caph-video-popup-message"><div class="caph-videoplayer-leftInfoControll"><div class="caph-videoplayer-info"> '+this.languageObj.getMessage().videoPlayer.information.options.title+"</div>"+'<div class="caph-videoplayer-info">'+this.languageObj.getMessage().videoPlayer.information.options.duration+"</div>"+'<div class="caph-videoplayer-info">'+this.languageObj.getMessage().videoPlayer.information.options.lastSaveDate+"</div>"+'<div class="caph-videoplayer-info">'+this.languageObj.getMessage().videoPlayer.information.options.format+"</div>"+'<div class="caph-videoplayer-info">'+this.languageObj.getMessage().videoPlayer.information.options.size+"</div>"+'<div class="caph-videoplayer-info">'+this.languageObj.getMessage().videoPlayer.information.options.resolution+"</div>"+'<div class="caph-videoplayer-info">'+this.languageObj.getMessage().videoPlayer.information.options.location+"</div>"+"</div>"+'<div class="caph-videoplayer-rightInfoControl">'+'<div id="infoTitleDetails" class="caph-videoplayer-infoTitleDetails"></div>'+'<div id="infoDurationDetails" class="caph-videoplayer-infoTitleDetails"></div>'+'<div id="infoLastSavedDateDetails" class="caph-videoplayer-infoTitleDetails"></div>'+'<div id="infoFormatDetails" class="caph-videoplayer-infoTitleDetails"></div>'+'<div id="infoSizeDetails" class="caph-videoplayer-infoTitleDetails"></div>'+'<div id="infoResolutionDetails" class="caph-videoplayer-infoTitleDetails"></div>'+'<div id="infoLocationDetails" class="caph-videoplayer-infoTitleDetails"></div>'+"</div>"+"</div>"}),this.infoSubDiv.addClass("caph-service-videoPlayer-msgPopupArea"),this.videoPopupAlert.addChild(this.infoSubDiv),this.videoErrorAlert=new h({popupType:"ALERT",buttonContent:this.languageObj.getMessage().defaultButtons.ok,bgType:"MessagePopup",isBgAlphaType:!1,height:m[_.HEIGHT].INFOPOPUP.HEIGHT,callback:function(){p._showPlayer(),setTimeout(function(){p.nextbtn.focus()},150)}}),this.videoErrorAlert.setProperty({id:"infoMainErrorDiv"}),this.addChild(this.videoErrorAlert),this.errorSubDiv=new e,this.errorSubDiv.setProperty({id:"messageDiv",innerHTML:'<div class="caph-video-popup-title"><div id= "caph-video-popup-ErrorTitleText" class="caph-video-popup-titleText"></div></div><div id="caph-video-msgBox" class="caph-video-msgBox"><div id= "caph-video-msgBoxText" class="caph-video-msgBoxBody"></div></div>'}),this.errorSubDiv.addClass("caph-service-videoPlayer-msgPopupArea"),this.videoErrorAlert.addChild(this.errorSubDiv);var i=new e,s=new e,o=new e;i.addClass("caph-videoplayer-videoInfo"),s.addClass("caph-videoplayer-controls"),o.addClass("caph-videoplayer-progressBar"),this.videoPlayerView.addChild(o),this.videoPlayerView.addChild(s),this.videoPlayerView.addChild(i),this.currentTime=new e,this.duration=new e,this.currentTime.setProperty({innerHTML:"00:00:00"}),this.duration.setProperty({innerHTML:"00:00:00"}),this._addVideoInfo(i),this.currentTime.addClass("caph-videoplayer-playerprgsbar-curtime"),this.duration.addClass("caph-videoplayer-playerprgsbar-durtime"),o.addChild(this.currentTime).addChild(this.duration),this.commonTooltip=new t({direction:"top",timeout:2e3,size:[m[_.HEIGHT].TOOLTIP.SIZE[0],m[_.HEIGHT].TOOLTIP.SIZE[1]]}),this.commonTooltip.setTailDirection(caph.ui.base.component.Tooltip.TOP),this.commonTooltip.setTextFont(m[_.HEIGHT].TOOLTIPFONT.FONT_SIZE),this.commonTooltip.setTailAlign(caph.ui.base.component.Tooltip.CENTER),this.videoPlayerView.addChild(this.commonTooltip),this._addControlButtons(s),this._addProgressBar(s),setTimeout(function(){p.playbtn.focus()},150),this._createSubtitleUI(),this.settingFrame=new e,this.settingFrame.setProperty({id:"settingFrameContainer",style:{position:"absolute",top:m[_.HEIGHT].SETTING_FRAME.TOP+"px",right:"18px","float":"right",width:m[_.HEIGHT].SETTING_FRAME.WIDTH+"px",height:m[_.HEIGHT].SETTING_FRAME.HEIGHT+"px",outline:"2px solid rgba(24,29,35,.95)",border:"2px solid rgba(89,107,129,.9)",padding:m[_.HEIGHT].SETTING_FRAME.PADDING+"px",boxShadow:"inset 2px 2px 2px rgba(89,107,129,.95),inset -2px 2px 2px rgba(89,107,129,.95),inset 2px -2px 2px rgba(89,107,129,.95),inset -2px -2px 2px rgba(89,107,129,.95)",backgroundColor:"#1f2b3d"}});for(var a=this.settingFrameOptions.length,u=0;a>u;u++)0===u?this.settingFrame.addChild(this._createSettingMenuButton(u,this.settingFrameOptions[u]+":Original")):this.settingFrame.addChild(this._createSettingMenuButton(u,this.settingFrameOptions[u]));this.videoPlayerView.addChild(this.settingFrame),this.settingFrame.visibility(!1),this.pictureMenuFrame=this._createPictureContextMenu(),this.videoPlayerView.addChild(this.pictureMenuFrame)},_createPictureContextMenu:function(){var t={ORIGINAL:this.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options.original,SCREEN_FIT:this.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options.screenFit,SMART_VIEW1:this.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options.smartview1,SMART_VIEW2:this.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options.smartview2,SMART_VIEW3:this.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options._16_9,SMART_VIEW4:this.languageObj.getMessage().videoPlayer.menuItem.pictureSize.options._4_3},i=new e({dom:{id:"pictureMenuContainer",style:{right:"2px","float":"right",outline:"2px solid rgba(24,29,35,.95)",border:"2px solid rgba(89,107,129,.9)",padding:m[_.HEIGHT].PICTURE_FRAME.PADDING+"px",boxShadow:"inset 2px 2px 2px rgba(89,107,129,.95),inset -2px 2px 2px rgba(89,107,129,.95),inset 2px -2px 2px rgba(89,107,129,.95),inset -2px -2px 2px rgba(89,107,129,.95)",backgroundColor:"#1f2b3d"}}}),n=0;for(var s in t){var o=new f({focus:!0,width:m[_.HEIGHT].PICTURE_FRAME.WIDTH+"px",position:[0,m[_.HEIGHT].PICTURE_FRAME.HEIGHT*n],text:t[s],hasBox:!1,id:"picture_"+caph.toCamelCase(s),checked:t[0]===t[s]?!0:!1});i.addChild(o),n++}return i.size([m[_.HEIGHT].PICTURE_FRAME.WIDTH,m[_.HEIGHT].PICTURE_FRAME.HEIGHT*n]),i.position(m[_.HEIGHT].PICTURE_FRAME.POSITION[0],m[_.HEIGHT].PICTURE_FRAME.POSITION[1]),i.visibility(!1),i},_createSettingMenuButton:function(t,e){var i=$class({$extends:n,$constructor:function(t){this.$super(t),this.setProperty({style:{position:"absolute",width:m[_.HEIGHT].SETTING_MENU_BUTTON.WIDTH+"px",height:m[_.HEIGHT].SETTING_MENU_BUTTON.HEIGHT+"px",fontSize:m[_.HEIGHT].SETTING_MENU_BUTTON.FONTSIZE+"px",border:"1px solid rgba(255,255,255,.1)",lineHeight:m[_.HEIGHT].SETTING_MENU_BUTTON.LINEHEIGHT+"px",color:"rgba(255, 255, 255, 0.6)"}})},onfocus:function(){this.focus&&(this.addClass("submenuFocus"),this._children[0].setStyle({color:"#464646"}))},onblur:function(){this.removeClass("submenuFocus"),this._children[0].setStyle({color:"rgba(255, 255, 255, 0.6)"})}}),s=new i({type:"button",size:[m[_.HEIGHT].SETTING_MENU_ITEM.WIDTH,m[_.HEIGHT].SETTING_MENU_ITEM.HEIGHT],dom:{id:"item"+t,itemIndex:t+1}});return 0===t?s.y(t*m[_.HEIGHT].SETTING_MENU_ITEM.HEIGHT):1===t?s.y(t*m[_.HEIGHT].SETTING_MENU_ITEM.HEIGHT-m[_.HEIGHT].SETTING_MENU_ITEM_DIFF.FIRST):2===t&&s.y(t*m[_.HEIGHT].SETTING_MENU_ITEM.HEIGHT-m[_.HEIGHT].SETTING_MENU_ITEM_DIFF.SECOND),s.y(t*m[_.HEIGHT].SETTING_MENU_ITEM.HEIGHT),s.setContent(e),this.videoPlayerView.addChild(s),s.on({click:function(){var t=this.getProperty("innerText").split(":")[0];switch(g(p.settingFrameOptions[2]),t){case p.settingFrameOptions[0]:p.pictureMenuFrame.visibility(!0),p.focusManager.focus(p.pictureMenuFrame._children[0]);break;case p.settingFrameOptions[1]:p.isPlay&&(p.pictureMenuFrame.visibility()?p.pictureMenuFrame.visibility(!1):(p._populateSubtitleOptions(p.subtitleOptionContainer),p._showSubtitlePopup()));break;case p.settingFrameOptions[2]:if(p.isPlay){p._hidePlayer();var e=p._playList.getCurItem(),i=p.settingFrameOptions[2];p._showVideoInfoPopup(i,e)}break;default:}},keydown:function(t){var e=this.getProperty("innerText").split(":")[0];if(t.key().down&&e===p.settingFrameOptions[2]&&t.stopPropagation(),(t.key().left||t.key().right)&&t.stopPropagation(),t.key().enter)switch(e){case p.settingFrameOptions[0]:p.pictureMenuFrame.visibility(!0),p.focusManager.focus(p.pictureMenuFrame._children[0]);break;case p.settingFrameOptions[1]:p.isPlay&&(p.pictureMenuFrame.visibility()?p.pictureMenuFrame.visibility(!1):(p._populateSubtitleOptions(p.subtitleOptionContainer),p._showSubtitlePopup()));break;case p.settingFrameOptions[2]:if(p.isPlay){p._hidePlayer();var i=p._playList.getCurItem(),n=p.settingFrameOptions[2];p._showVideoInfoPopup(n,i)}break;default:}}}),s},onclick:function(){},_showSubtitlePopup:function(){g("[VideoPlayerBase]_showSubtitlePopup"),this.addClass("caph-videoplayer-background"),this.settingFrame.visibility(!1),this.subtitlePopup.visibility(!0),this._hidePlayer(),this._hideBannerTriggerBtn(),this.okButton.focus()},_hideSubtitlePopup:function(){g("[VideoPlayerBase]_hideSubtitlePopup"),this.removeClass("caph-videoplayer-background"),this._showPlayer(),this.subtitlePopup.visibility(!1),p.subList.visibility()&&p.subList.visibility(!1)},_setItemInfo:function(t){g("[VideoPlayerBase]_setItemInfo");var e=t.getCurItem();this.videoFileName.setProperty({innerHTML:e.title||"Unknown"}),this.videoDate.setProperty({innerHTML:e.date||"Unknown"}),this.videoCountTotal.setProperty({innerHTML:t.currentIndex+1+"/"+t.getItemsLength()})},_msToTime:function(t){var e=parseInt(t/1e3%60,10),i=parseInt(t/6e4%60,10),n=parseInt(t/36e5%24,10);return n=10>n?"0"+n:n,i=10>i?"0"+i:i,e=10>e?"0"+e:e,n+":"+i+":"+e},_changeToPlay:function(){this.playbtn.setContent(r.play()),this.playbtn.setAlign("middle"),this.playbtn.setAlign("center | middle"),this.commonTooltip.setText(this.languageObj.getMessage().videoPlayer.tooltip.play),this.playbtn.blur(),this.playbtn.focus()},_changeToPause:function(){this.playbtn.setContent(r.pause()),this.playbtn.setAlign("middle"),this.playbtn.setAlign("center | middle"),this.commonTooltip.setText(this.languageObj.getMessage().videoPlayer.tooltip.pause),this.playbtn.blur(),this.playbtn.focus()},_getSmartviewArea:function(t){g("[VideoPlayerBase]_getSmartviewArea");var e,i,n,s;n=Math.round(d.WIDTH*t),s=Math.round(d.HEIGHT*t),e=Math.round((d.WIDTH-n)/2),i=Math.round((d.HEIGHT-s)/2);var o=this.playerObj.setDisplayRect(e,i,n,s);return o},_hideAllSettingPopup:function(){g("<<[VideoPlayerBase] _hideAllSettingPopup"),this.settingFrame.visibility()&&(this.settingFrame.visibility(!1),this.focusManager.focus(this.playbtn)),this.pictureMenuFrame.visibility()&&(this.pictureMenuFrame.visibility(!1),this.focusManager.focus(this.playbtn)),this.subtitlePopup.visibility()&&this._hideSubtitlePopup(),this.videoPopupAlert.visibility()&&this.videoPopupAlert.close()},_showVideoInfoPopup:function(t,e){g("[VideoPlayerBase]_showVideoInfoPopup"+t),this._hideAllSettingPopup(),this.videoPopupAlert.show(),caph.dom.getElement("#messageContainer").$[0].style.display="block",caph.dom.getElement("#infoSubDiv").$[0].style.display="block",caph.dom.getElement("#caph-video-popup-titleText").$[0].innerText=t,p._setVideoInformation(e)},_showErrorInfoPopup:function(t,e){g("[VideoPlayerBase]_showErrorInfoPopup"+t+e),this._hideAllSettingPopup(),this.videoErrorAlert.show(),caph.dom.getElement("#caph-video-popup-ErrorTitleText").$[0].innerText=t.title,caph.dom.getElement("#caph-video-msgBox").$[0].style.display="block",caph.dom.getElement("#caph-video-msgBoxText").$[0].innerText=t.message},next:function(t){g("[VideoPlayerHtml] next");var e=this._playList.getNextItem(t);e&&(e=caph.extend(e,this.playItemCallbacks),this.play(e))},_playVideo:function(){g("Please define the Play() function")},_rewindVideo:function(){g("Please define the REW() function")},_forwardVideo:function(){g(" Please define the FF() function ")},_repeatVideo:function(){g("[VideoPlayerHTML]_repeatVideo"),this._hideAllSettingPopup();var t=this._playList?this._playList.getRepeatMode():null;switch(t){case this._playList.REPEAT.NO:this.repeatbtn.setContent(r.repeat()),this.repeatbtn.setAlign("center | middle"),this.repeatbtn.setAlign("middle"),this.commonTooltip.setText(this.languageObj.getMessage().videoPlayer.tooltip.repeatOn),this._playList.setRepeatMode(this._playList.REPEAT.ALL),this.repeatbtn.blur(),this.repeatbtn.focus(),p.nextbtn.isEnable()||p.nextbtn.setEnable(!0),p.prevbtn.isEnable()||p.prevbtn.setEnable(!0);break;case this._playList.REPEAT.ALL:this.repeatbtn.setContent(r.repeatOne()),this.repeatbtn.setAlign("center | middle"),this.repeatbtn.setAlign("middle"),this.commonTooltip.setText(this.languageObj.getMessage().videoPlayer.tooltip.repeatOne),this._playList.setRepeatMode(this._playList.REPEAT.ONE),this.repeatbtn.blur(),this.repeatbtn.focus(),p.nextbtn.isEnable()||p.nextbtn.setEnable(!0),p.prevbtn.isEnable()||p.prevbtn.setEnable(!0);break;case this._playList.REPEAT.ONE:var e=3,i=this.videoEle?this.videoEle.currentTime:this.playerObj.getCurrentTime()/1e3;this.repeatbtn.setContent(r.repeatOff()),this.repeatbtn.setAlign("center | middle"),this.repeatbtn.setAlign("middle"),this.commonTooltip.setText(this.languageObj.getMessage().videoPlayer.tooltip.repeatOff),this._playList.setRepeatMode(this._playList.REPEAT.NO),this.repeatbtn.blur(),this.repeatbtn.focus(),this._playList.getCurrentItemIndex()>=this._playList.getItemsLength()-1&&this.nextbtn.setEnable(!1),0>=this._playList.getCurrentItemIndex()&&e>i&&this.prevbtn.setEnable(!1)}},_settingVideo:function(){g(" [VideoPlayerBase] _settingVideo"),this.settingFrame.visibility()?(this.settingFrame.visibility(!1),this.pictureMenuFrame.visibility(!1),this.focusManager.focus(this.settingbtn)):(this.settingFrame.visibility(!0),this.focusManager.focus(this.settingFrame._children[0]))},_hidePlayer:function(){this.settingFrame.visibility()||this.pictureMenuFrame.visibility()||this._isprogressSelected||4!==this.videoEle.readyState||(this.videoPlayerView.visibility(!1),this.returnbtn.visibility(!1),this._clearPlayerHideTimer())},_hideBannerTriggerBtn:function(){this.bannerTriggerBtn.visibility(!1),this._clearButtonHideTimer()},_showBannerTriggerBtn:function(){this._clearButtonHideTimer(),this.videoPlayerView.visibility()||this.subtitlePopup.visibility()||this.bannerTriggerBtn.visibility(!0),this._setButtonHideTimer()},_setButtonHideTimer:function(){var t=this;this._clearButtonHideTimer(),this.hButtonHideTimer=setTimeout(function(){t.videoPlayerView.visibility()?t._hideReturnBtn():t._hideBannerTriggerBtn()},this.BUTTON_HIDE_TIME)},_clearButtonHideTimer:function(){this.hButtonHideTimer&&(clearTimeout(this.hButtonHideTimer),this.hButtonHideTimer=null)},_showReturnBtn:function(){this.videoPlayerView.visibility()&&this.returnbtn.visibility(!0),this._setButtonHideTimer()},_hideReturnBtn:function(){this.returnbtn.visibility(!1),this._clearButtonHideTimer()},_showPlayer:function(){g("[VideoPlayerBase]_showPlayer"),this._clearPlayerHideTimer(),this.videoPlayerView.visibility()||(this.videoPlayerView.visibility(!0),setTimeout(function(){p.focusManager.focus(p.playbtn)},150)),this._setPlayerHideTimer()},_setPlayerHideTimer:function(){g("[VideoPlayerBase]_setPlayerHideTimer");var t=this;this._clearPlayerHideTimer(),this.hPlayerHideTimer=setTimeout(function(){t._hidePlayer()},this.PLAYER_HIDE_TIME)},_clearPlayerHideTimer:function(){g("[VideoPlayerBase]_clearPlayerHideTimer"),this.hPlayerHideTimer&&(clearTimeout(this.hPlayerHideTimer),this.hPlayerHideTimer=null)},_playList:{items:[],currentIndex:0,REPEAT:{NO:"norepeat",ONE:"one",ALL:"all"},repeatMode:null,getItems:function(){return this.items},setItems:function(t){this.items&&(this.items=t)},getCurItem:function(){return this.items[this.currentIndex]},getItemsLength:function(){return this.items.length},getCurrentItemIndex:function(){return this.currentIndex},getNextItem:function(t){switch(this.repeatMode){case this.REPEAT.ONE:if(t)break;case this.REPEAT.NO:case this.REPEAT.ALL:var e=this.items.length;if(e>0)if(this.currentIndex===e-1){if(this.repeatMode===this.REPEAT.NO)return null;this.currentIndex=0}else this.currentIndex++}return this.items[this.currentIndex]},getPreviousItem:function(t){switch(this.repeatMode){case this.REPEAT.ONE:if(t)break;case this.REPEAT.NO:case this.REPEAT.ALL:var e=this.items.length;if(e>0)if(0===this.currentIndex){if(this.repeatMode===this.REPEAT.NO)return null;this.currentIndex=e-1}else this.currentIndex--}return this.items[this.currentIndex]},setRepeatMode:function(t){this.repeatMode!==t&&(t===this.REPEAT.NO||t===this.REPEAT.ONE||t===this.REPEAT.ALL?this.repeatMode=t:g("ERROR-- repeatMode is not valid"))},getRepeatMode:function(){return this.repeatMode}},_createSubtitleUI:function(){g("[VideoplayerBase]_createSubtitleUI"),this.removeClass("caph-view"),this.subtitlePopup=new e({size:[m[_.HEIGHT].SUBTITLE_POPUP.SIZE[0],m[_.HEIGHT].SUBTITLE_POPUP.SIZE[1]],position:[0,0]}),this.subtitlePopup.visibility(!1);var t=new e,i=new e,s=new o({text:this.languageObj.getMessage().videoPlayer.subtitle.title,position:[m[_.HEIGHT].SUBTILE_POPUP_TITLE.POSITION[0],m[_.HEIGHT].SUBTILE_POPUP_TITLE.POSITION[1],1],size:[m[_.HEIGHT].SUBTILE_POPUP_TITLE.SIZE[0],m[_.HEIGHT].SUBTILE_POPUP_TITLE.SIZE[1]]}),r=new e,a=new e,h=new e,c=new e;this.subtitleOptionContainer=new e({dom:{id:"subtitle-Option-container"}});var l=new e,d=new u({type:"medium",direction:"up",x:m[_.HEIGHT].SUBTILE_INDICATOR_UP.WIDTH,y:m[_.HEIGHT].SUBTILE_INDICATOR_UP.HEIGHT}),f=new u({type:"medium",direction:"down",x:m[_.HEIGHT].SUBTILE_INDICATOR_DOWN.WIDTH,y:m[_.HEIGHT].SUBTILE_INDICATOR_DOWN.HEIGHT});this.okButton=new n({size:[m[_.HEIGHT].SUBTILE_BUTTON_OK.SIZE[0],m[_.HEIGHT].SUBTILE_BUTTON_OK.SIZE[1]],contents:this.languageObj.getMessage().defaultButtons.ok,position:[m[_.HEIGHT].SUBTILE_BUTTON_OK.POSITION[0],m[_.HEIGHT].SUBTILE_BUTTON_OK.POSITION[1]]});var v=function(){p.selectedOptionsIndex=caph.extend(p.selectedOptionsIndex,p.tempSublistSelectedIndex);var t=p.subtitleSettingOptions.length;p._hideSubtitlePopup();for(var e=0;t>e;e++)switch(p.subtitleSettingOptions[e][0]){case p.subtitleSettingOptions[0][0]:p.subtitleOptions[p.selectedOptionsIndex[e]]===p.subtitleOptions[0]?(p.isSubtitleEnable=!0,p.showSubtitle()):(p.isSubtitleEnable=!1,p.hideSubtitle());break;case p.subtitleSettingOptions[1][0]:p._enableTrack(p.selectedOptionsIndex[e]);break;default:}};this.okButton.on({click:function(){v()},keydown:function(t){t.key().enter&&v(),t.key().left&&(p.focusManager.focus(p.subtitleOptionContainer._children[0]),t.stopPropagation()),(t.key().right||t.key().up)&&t.stopPropagation()}});var y=new n({size:[m[_.HEIGHT].SUBTILE_BUTTON_CANCEL.SIZE[0],m[_.HEIGHT].SUBTILE_BUTTON_CANCEL.SIZE[1]],contents:this.languageObj.getMessage().defaultButtons.cancel,position:[m[_.HEIGHT].SUBTILE_BUTTON_CANCEL.POSITION[0],m[_.HEIGHT].SUBTILE_BUTTON_CANCEL.POSITION[1]]});y.on({click:function(){p._hideSubtitlePopup()},keydown:function(t){t.key().enter&&p._hideSubtitlePopup(),t.key().left&&(p.focusManager.focus(p.subtitleOptionContainer._children[0]),t.stopPropagation()),(t.key().right||t.key().down)&&t.stopPropagation()}}),l.addClass("caph-videoplayer-subtitle-popupbuttonarea"),h.addClass("caph-videoplayer-subtitle-popuptoparrow"),c.addClass("caph-videoplayer-subtitle-popupdownarrow"),h.addChild(d),c.addChild(f),c.position(m[_.HEIGHT].SUBTILE_DWONARROW.POSITION[0],m[_.HEIGHT].SUBTILE_DWONARROW.POSITION[1],1),h.visibility(!1),c.visibility(!1),this.subtitleOptionContainer.removeClass("caph-view"),this.subtitleOptionContainer.addClass("caph-videoplayer-subtitle-subtitleOptionContainer"),this.subtitleOptionContainer.position(m[_.HEIGHT].SUBTILE_OPTION_CONTAINER.POSITION[0],m[_.HEIGHT].SUBTILE_OPTION_CONTAINER.POSITION[1],1),s.addClass("caph-videoplayer-subtitle-popuptitle");var b=new o({text:this.languageObj.getMessage().videoPlayer.subtitle.message,position:[0,0,1],size:[m[_.HEIGHT].SUBTILE_POPUP_TEXT.SIZE[0],m[_.HEIGHT].SUBTILE_POPUP_TEXT.SIZE[1]]});b.setAlign({horizontal:"left"}),b.addClass("caph-videoplayer-subtitle-popuptext"),t.addClass("caph-videoplayer-subtitle-popupbackground"),i.addClass("caph-videoplayer-subtitle-popupwindow"),r.addClass("caph-videoplayer-subtitle-popupitems"),a.addClass("caph-videoplayer-subtitle-popupitemlist"),a.addChild(h),a.addChild(this.subtitleOptionContainer),a.addChild(c),r.addChild(a),l.addChild(this.okButton),l.addChild(y),i.addChild(s),i.addChild(b),i.addChild(r),i.addChild(l),t.addChild(i),this.subtitlePopup.addChild(t),this.addChild(this.subtitlePopup),this.subListContainer=this._createSublist(a)},_populateSubtitleOptions:function(t){g("[VideoplayerBase]_populateSubtitleOptions"+t);var e=this.subtitleSettingOptions.length;caph.dom.getElement("#subtitle-Option-container").$[0].innerHTML="",t._children=[];for(var i,n=4,s=0;e>s;s++)i=this._createPopupRowItem(s),s>n&&i.visibility(!1),t.addChild(i)
},_createPopupRowItem:function(t){var e=this,i=new c({dom:{tabIndex:t}});i.focusable(!0),i.position(0,m[_.HEIGHT].SUBTILE_ROW_ITEM.HEIGHT*t,0),i.addClass("caph-videoplayer-subtitle-popupitem caph-subtitle-item");var n=new o({text:this.subtitleSettingOptions[t][0],position:[m[_.HEIGHT].SUBTILE_LEFT_SUBITEM.POSITION[0],m[_.HEIGHT].SUBTILE_LEFT_SUBITEM.POSITION[1],0],size:[m[_.HEIGHT].SUBTILE_LEFT_SUBITEM.SIZE[0],m[_.HEIGHT].SUBTILE_LEFT_SUBITEM.SIZE[1]]});n.addClass("caph-videoplayer-subtitle-lefttext"),n.setAlign({horizontal:"left"});var s=new o({text:this.subtitleSettingOptions[t][1][this.selectedOptionsIndex[t]],position:[m[_.HEIGHT].SUBTILE_RIGHT_SUBITEM.POSITION[0],m[_.HEIGHT].SUBTILE_RIGHT_SUBITEM.POSITION[1],0],size:[m[_.HEIGHT].SUBTILE_RIGHT_SUBITEM.SIZE[0],m[_.HEIGHT].SUBTILE_RIGHT_SUBITEM.SIZE[1]]});return s.addClass("caph-videoplayer-subtitle-righttext"),s.setAlign({horizontal:"right"}),i.addChild(n),i.addChild(s),i.on({click:function(){""!==s.getText()&&(caph.dom.getElement("#sublist-item-container").$[0].innerHTML="",e.subListContainer._children=[],e._populateSublist(this,t))},keydown:function(i){if(i.key().enter){if(""===s.getText())return;caph.dom.getElement("#sublist-item-container").$[0].innerHTML="",e.subListContainer._children=[],e._populateSublist(this,t),i.stopPropagation()}i.key().right&&(e.okButton.focus(),i.stopPropagation()),(i.key().down||i.key().left)&&(this._parent._children[this._parent._children.length-1].focus(),i.stopPropagation())},focus:function(){this.focus&&this.setStyle({outline:"2px solid #FFF"})},blur:function(){this.setStyle({outline:""})}}),i},_createSublist:function(t){g("[VideoplayerBase]_createSublist"),this.subList=new e({dom:{id:"subList"}}),this.subList.removeClass("caph-view"),this.subList.addClass("caph-videoplayer-subtitle-sublist"),t.addChild(this.subList);var i=new e({dom:{id:"sublist-up-arrow"}}),n=new e({dom:{id:"sublist-down-arrow"}}),s=new e({dom:{id:"sublist-item-container"}});return s.removeClass("caph-view"),i.addClass("caph-videoplayer-subtitle-sublist-up-arrow"),n.addClass("caph-videoplayer-subtitle-sublist-down-arrow"),this.subList.addChild(i),this.subList.addChild(s),this.subList.addChild(n),this.subList.visibility(!1),s},_populateSublist:function(t,e){var i=this,n=0,s=m[_.HEIGHT].SUBTILE_POPULATE_SUBLIS.SIZE[1],o=m[_.HEIGHT].SUBLIST_UP_DOWN_ARROW_HEIGHT,r=this.subtitleSettingOptions[e][1];for(var a in r){var h=new f({focus:!0,width:m[_.HEIGHT].SUBTILE_POPULATE_SUBLIS.WIDTH,text:r[a],position:[0,n*s],hasBox:!1,id:"sulList_"+a,checked:a===this.selectedOptionsIndex[t.getProperty("tabIndex")]?!0:!1});h.label.size(m[_.HEIGHT].SUBTILE_POPULATE_SUBLIS.SIZE[0],m[_.HEIGHT].SUBTILE_POPULATE_SUBLIS.SIZE[1]),h.setStyle({border:""}),h.addClass("caph-videoplayer-subtitle-sublist-item"),this.subListContainer.addChild(h),h.on({click:function(){i.subList.visibility(!1),t._children[1].setText(this._children[1].getText()),i.tempSublistSelectedIndex[t.getProperty("tabIndex")]=r.indexOf(this._children[1].getText()),i.focusManager.focus(t)},focus:function(){this.focus&&this.setStyle({outline:"2px solid #FFF"})},blur:function(){this.setStyle({outline:""})},keydown:function(e){e.key().enter&&(i.subList.visibility(!1),t._children[1].setText(this._children[1].getText()),i.tempSublistSelectedIndex[t.getProperty("tabIndex")]=r.indexOf(this._children[1].getText()),i.focusManager.focus(t)),e.key().down&&this===i.subListContainer._children[i.subListContainer._children.length-1]&&e.stopPropagation()}}),n++}caph.dom.getElement("#sublist-down-arrow").$[0].style.top=s*n+"px",this.subList.setStyle({height:s*n+2*o}),this.subList.visibility(!0),this.subList.position(m[_.HEIGHT].SUBTILE_POPULATE_SUBLIS.POSITION[0],this.subtitleSettingOptions[e][2],1),this.focusManager.focus(this.subListContainer._children[0])},_nextVideo:function(t){this._hideAllSettingPopup(),this.playbtn.isEnable()||(this.playbtn.setEnable(!0),this.ffbtn.setEnable(!0),this.rewbtn.setEnable(!0)),p.prevbtn.isEnable()||p.prevbtn.setEnable(!0),this._playList.getCurrentItemIndex()+1>=this._playList.getItemsLength()-1&&this._playList.getRepeatMode()===this._playList.REPEAT.NO?this.nextbtn.setEnable(!1):this.nextbtn.setEnable(!0),this.next(t)},_previousVideo:function(t){this._hideAllSettingPopup(),this.playbtn.isEnable()||(this.playbtn.setEnable(!0),this.ffbtn.setEnable(!0),this.rewbtn.setEnable(!0)),this.previous(t),0>this._playList.getCurrentItemIndex()-1&&this._playList.getRepeatMode()===this._playList.REPEAT.NO&&this.prevbtn.setEnable(!1),!p.nextbtn.isEnable()&&this._playList.getCurrentItemIndex()<this._playList.getItemsLength()-1&&p.nextbtn.setEnable(!0)},_registerKeys:function(){var t=null;try{t=tizen.tvinputdevice.getSupportedKeys();for(var e=0;t.length>e;e++)switch(t[e].name){case"MediaPlay":case"MediaPause":case"MediaRewind":case"MediaFastForward":case"MediaStop":tizen.tvinputdevice.registerKey(t[e].name);break;default:}}catch(i){console.log("Error : tizen is not supported OR failed to register keys")}}})}(this),function(){"use strict";var t=(caph.require("event.key"),function(t){}),e=null,i="mode1",n=null;$class({$namespace:"caph.stripe.ui.widget.videoPlayer.html5",$extends:caph.stripe.ui.widget.videoPlayer.base,$constructor:function(i){t("[VideoPlayerHtml]$constructor"),e=this,this.bStopState=!1,this.$super(i),this.videoEle=null,this.PLAYER_ZINDEX=-1,this.mediaEventsArr=["loadstart","progress","suspend","abort","emptied","stalled","loadedmetadata","loadeddata","error","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"],this.len=0,this.playItemCallbacks=null,this._isprogressSelected=!1,this.oCurPlayItem=null,this._initPlayer(i)},_initPlayer:function(t){console.log("[VideoPlayerHtml]_initPlayer");var s=this._playList.getCurItem().url;this.loadVideo(s,document.body),this._initEvents(),t.viewType===this.VIEW_TYPE.FULL?(this._registerKeys(),this._createFullView(),this.focusable(!0),this._setPictureSize("mode1"),this.playItemCallbacks={ontimeupdate:function(){e.bStopState||(e.isPlay=4===e.videoEle.readyState?!0:!1,e.videoEle.currentTime>3&&!e.prevbtn.isEnable()&&e.prevbtn.setEnable(!0),e.currentTime.setProperty({innerHTML:e._msToTime(1e3*e.videoEle.currentTime)}),e._isprogressSelected||(e.len=e.progressSlider.width/e.videoEle.duration*e.videoEle.currentTime,e.progressSlider.setSelectedValue(e.len)))},onend:function(){e.isPlay=!1,e._changeToPlay(),e._nextVideo(!0)},onplay:function(){e.isPlay=!1,e._changeToPause(),e.statusbtn.removeClass("caph-videoplayer-statuspause"),e.statusbtn.addClass("caph-videoplayer-statusplay")},onpause:function(){e._changeToPlay(),e.statusbtn.removeClass("caph-videoplayer-statusplay"),e.statusbtn.addClass("caph-videoplayer-statuspause")},onerror:function(){e._errorHandler(event)},onloadstart:function(){e._setItemInfo(e._playList)},onloadedmetadata:function(){e._setPictureSize(i),isNaN(e.videoEle.duration)||e.duration.setProperty({innerHTML:e._msToTime(1e3*e.videoEle.duration)})},onstop:function(){e._changeToPlay(),e.progressSlider.setSelectedValue(0),e.currentTime.setProperty({innerHTML:e._msToTime(0)})}},this.progressSlider.on({keydown:function(t){if(e._showPlayer(),t.key().enter){e._isprogressSelected=this._isEnter?!0:!1;var i=this.getSelectedValue();isNaN(e.videoEle.duration)||(e.videoEle.currentTime=isFinite(e.videoEle.duration/this.width*i)?e.videoEle.duration/this.width*i:parseInt(e.videoEle.duration/this.width*i,10)),event.stopPropagation()}t.key().down&&t.stopPropagation()}}),n=function(){e.videoPlayerView.visibility()?e._showReturnBtn():e._showBannerTriggerBtn()},document.addEventListener("mousemove",n)):this._setPictureSize("smartview2")},onkeydown:function(e){if(t("[VideoPlayerHtml]onkeydown"),!this.subtitlePopup.visibility()){var i=e.key().type;switch(i){case this.KEY_CODE.RETURN:this.subtitlePopup.visibility()?(this.subtitlePopup.visibility(!1),this.videoPlayerView.visibility(!0),this.subList.visibility()&&this.subList.visibility(!1),this.focusable(!0)):this.pictureMenuFrame.visibility()?(this.pictureMenuFrame.visibility(!1),this.focusManager.focus(this.settingFrame._children[0])):this.settingFrame.visibility()?(this.settingFrame.visibility(!1),this.focusManager.focus(this.settingbtn)):(t("exit from player"),this.exit(),e.stopPropagation()),e.preventDefault();break;case this.KEY_CODE.ENTER:this._showPlayer();break;case this.KEY_CODE.LEFT:this.videoPlayerView.visibility()||this.RW();break;case this.KEY_CODE.RIGHT:this.videoPlayerView.visibility()||this.FF();break;case this.KEY_CODE.UP:break;case this.KEY_CODE.DOWN:break;case this.KEY_CODE.REWIND:this._showPlayer(),this._hideAllSettingPopup(),this._rewindVideo(),this.focusManager.focus(this.rewbtn);break;case this.KEY_CODE.FF:this._showPlayer(),this._hideAllSettingPopup(),this._forwardVideo(),this.focusManager.focus(this.ffbtn);break;case this.KEY_CODE.PLAY:this._showPlayer(),this._hideAllSettingPopup();try{if(this.videoEle.paused)if(null===this._playList||0!==parseInt(this.videoEle.currentTime,10)&&!this.bStopState)this.resume();else{var n=this._playList.getCurItem();n=caph.extend(n,this.playItemCallbacks),this.play(n)}this.focusManager.focus(this.playbtn)}catch(s){t(s)}break;case this.KEY_CODE.PAUSE:this._showPlayer(),this._hideAllSettingPopup(),this.videoEle.paused||this.pause();break;case this.KEY_CODE.STOP:this._showPlayer(),this._hideAllSettingPopup(),this.stop();break;case 10252:this._showPlayer(),this._hideAllSettingPopup(),this._playVideo();break;default:}}},onclick:function(){t("[VideoPlayerHtml]onclick"),!this.subtitlePopup.visibility()&&this.videoPlayerView.visibility()&&this._showPlayer()},onfocus:function(){!this.subtitlePopup.visibility()&&this.videoPlayerView.visibility()&&this._showPlayer()},loadVideo:function(e,i){t("[VideoPlayerHtml]loadVideo"),this.videoEle=document.createElement("video"),this.videoEle.src=e,this.videoEle.preload="none",this.videoEle.style.position=" absolute",this.videoEle.style.zIndex=this.PLAYER_ZINDEX,this.videoEle.style.backgroundColor="#000000",this.videoEle.id="videoEl",this.videoEle.autoplay=!1,this.videoEle.controls=!1,i.appendChild(this.videoEle)},_initEvents:function(){t("[VideoPlayerHtml]_initEvents");for(var e=this.mediaEventsArr.length,i=0;e>i;i++)this._addListener(this.mediaEventsArr[i])},play:function(i){t("[VideoPlayerHtml]play"+this.viewType+">>>>>>>>>>>>>>>"+e.viewType),this.bStopState=!1;try{caph.isObject(i)&&(this.oCurPlayItem=i,caph.isString(i.url)&&(this.videoEle.src=i.url,this.videoEle.load(),this.videoEle.innerHTML="",this.languageOptions=[],this.selectedOptionsIndex=[0,0],this.tempSublistSelectedIndex=[0,0],this._updateSubtitleOptions(),i.subtitle&&this._loadSubtitle(i.subtitle),this.videoEle.play()))}catch(n){t(n)}},_loadSubtitle:function(i){t("[VideoplayerHTML]_loadSubtitle");for(var n=null,s=i.length,o=0;s>o;o++)"WebVTT"===i[o].type&&(n=document.createElement("track"),n.setAttribute("kind","subtitles"),n.setAttribute("src",i[o].url),n.setAttribute("srclang",i[o].lang),n.setAttribute("label",i[o].lang+" subtitle"),this.languageOptions.push(i[o].lang),this.videoEle.appendChild(n));this._updateSubtitleOptions(),setTimeout(function(){e._enableTrack(e.selectedOptionsIndex[1])},200)},_updateSubtitleOptions:function(){t("Inside callback function>>>>>"),this.subtitleSettingOptions=[[this.languageObj.getMessage().videoPlayer.subtitle.options.subtitleStatus.value,this.subtitleOptions,-this.subListPos],[this.languageObj.getMessage().videoPlayer.subtitle.options.language.value,this.languageOptions,-this.subListPos]]},_enableTrack:function(e){t("[VideoplayerHTML]_enableTrack");try{if(this.videoEle&&this.videoEle.textTracks.length>0)for(var i=this.videoEle.textTracks.length,n=0;i>n;n++)this.videoEle.textTracks[n].mode=n===e&&this.isSubtitleEnable?"showing":"disabled"}catch(s){t(s)}},hideSubtitle:function(){t("[VideoplayerHTML]hideSubtitle");try{if(!(this.videoEle&&this.videoEle.textTracks.length>0))throw"Error : video element is not created";this.videoEle.textTracks[this.selectedOptionsIndex[1]].mode="hidden"}catch(e){t(e)}},showSubtitle:function(){t("[VideoplayerHTML]showSubtitle");try{this.videoEle&&this.videoEle.textTracks.length>0&&(this.videoEle.textTracks[this.selectedOptionsIndex[1]].mode="showing")}catch(e){t(e)}},pause:function(){t("[VideoPlayerHtml]pause");try{this.videoEle.paused||this.videoEle.pause()}catch(e){t(e)}},resume:function(){t("[VideoPlayerHtml]resume");try{this.videoEle.paused&&parseInt(this.videoEle.currentTime,10)>0&&!this.bStopState&&this.videoEle.play()}catch(e){t(e)}},stop:function(){t("[VideoPlayerHtml]stop"),t("video element paused state before pause: "+this.videoEle.paused);try{this.videoEle.pause(),t("video element paused state after pause: "+this.videoEle.paused),this.videoEle.currentTime=0,this.videoEle.src=null,t("current source after setting this.videoEle.src as null:  "+this.videoEle.src),this.bStopState=!0,this.oCurPlayItem&&"function"==typeof this.oCurPlayItem.onstop&&this.oCurPlayItem.onstop()}catch(e){t(e)}},RW:function(){t("[VideoPlayerHtml]RW");try{this.bStopState||(parseInt(this.videoEle.currentTime,10)>10?this.videoEle.currentTime-=10:this.videoEle.currentTime=0)}catch(e){t(e)}},FF:function(){t("[VideoPlayerHtml]FF");try{if(!isNaN(this.videoEle.duration)&&!this.bStopState){if(10>=parseInt(this.videoEle.duration,10)-parseInt(this.videoEle.currentTime,10))return;this.videoEle.currentTime+=10}}catch(e){t(e)}},_addListener:function(e){function i(){t("inside onProgress")}function n(){t("inside onSuspend")}function s(){t("inside onWaiting")}function o(){t("inside onSeeking")}function r(){t("inside onSeeked")}function a(){t("inside onRatechange")}function h(){t("inside onVolumechange")}function u(){t("inside onAbort")}function c(){t("inside onEmptied")}function l(){t("inside onStalled")}function p(){t("inside onLoadedmetadata"),E.oCurPlayItem&&"function"==typeof E.oCurPlayItem.onloadedmetadata&&E.oCurPlayItem.onloadedmetadata()}function d(){E.oCurPlayItem&&"function"==typeof E.oCurPlayItem.ontimeupdate&&E.oCurPlayItem.ontimeupdate()}function f(){t("[_addListener]onDurationChange")}function m(){t("[_addListener]onEnd"),E.oCurPlayItem&&"function"==typeof E.oCurPlayItem.onend&&E.oCurPlayItem.onend()}function _(){t("[_addListener]onPlay"),E.oCurPlayItem&&"function"==typeof E.oCurPlayItem.onplay&&E.oCurPlayItem.onplay()}function g(){t("[_addListener]onPause"),E.oCurPlayItem&&"function"==typeof E.oCurPlayItem.onpause&&E.oCurPlayItem.onpause()}function v(){t("[_addListener]onError"),E.oCurPlayItem&&"function"==typeof E.oCurPlayItem.onerror&&E.oCurPlayItem.onerror()}function y(){t("[_addListener]onLoadStart"),E.oCurPlayItem&&"function"==typeof E.oCurPlayItem.onloadstart&&E.oCurPlayItem.onloadstart()}function b(){t("[_addListener]onBufferCompleted")}t("[VideoPlayerHtml]_addListener");var T={loadstart:y,progress:i,suspend:n,abort:u,emptied:c,stalled:l,loadedmetadata:p,loadeddata:b,error:v,waiting:s,seeking:o,seeked:r,ended:m,durationchange:f,timeupdate:d,play:_,pause:g,ratechange:a,volumechange:h},E=this,I=null;T.hasOwnProperty(e)&&(I=T[e]),null!==I&&E.videoEle.addEventListener(e,I,!1)},_setPictureSize:function(t){i=t;var e={mode1:{width:this.videoEle.videoWidth,height:this.videoEle.videoHeight,top:(this.picSize.SCREEN_FIT[1]-this.videoEle.videoHeight)/2,left:(this.picSize.SCREEN_FIT[0]-this.videoEle.videoWidth)/2},mode2:{width:this.picSize.SCREEN_FIT[0],height:this.picSize.SCREEN_FIT[1],left:this.picSize.SCREEN_FIT[2],top:this.picSize.SCREEN_FIT[3]},smartview1:{width:this.picSize.SMART_VIEW_1[0],height:this.picSize.SMART_VIEW_1[1],left:this.picSize.SMART_VIEW_1[2],top:this.picSize.SMART_VIEW_1[3]},smartview2:{width:this.picSize.SMART_VIEW_2[0],height:this.picSize.SMART_VIEW_2[1],left:this.picSize.SMART_VIEW_2[2],top:this.picSize.SMART_VIEW_2[3]},"16:9":{width:this.picSize._16_9[0],height:this.picSize._16_9[1],left:this.picSize._16_9[2],top:this.picSize._16_9[3]},"4:3":{width:this.picSize._4_3[0],height:this.picSize._4_3[1],left:this.picSize._4_3[2],top:this.picSize._4_3[3]}};e.hasOwnProperty(t)&&(this.videoEle.style.width=e[t].width+"px",this.videoEle.style.height=e[t].height+"px",this.videoEle.style.left=e[t].left+"px",this.videoEle.style.top=e[t].top+"px")},_errorHandler:function(i){switch(t("[VideoPlayerHTML]_errorHandler"),i.target.error.code){case i.target.error.MEDIA_ERR_ABORTED:e._showErrorInfoPopup({title:e.languageObj.getMessage().videoPlayer.error.aborted.title,message:e.languageObj.getMessage().videoPlayer.error.aborted.message});break;case i.target.error.MEDIA_ERR_NETWORK:e._showErrorInfoPopup({title:e.languageObj.getMessage().videoPlayer.error.network.title,message:e.languageObj.getMessage().videoPlayer.error.network.message});break;case i.target.error.MEDIA_ERR_DECODE:e._showErrorInfoPopup({title:e.languageObj.getMessage().videoPlayer.error.media.title,message:e.languageObj.getMessage().videoPlayer.error.media.message});break;case i.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:e._showErrorInfoPopup({title:e.languageObj.getMessage().videoPlayer.error.unsupportedFormat.title,message:e.languageObj.getMessage().videoPlayer.error.unsupportedFormat.message});break;default:e._showErrorInfoPopup({title:e.languageObj.getMessage().videoPlayer.error.custom.title,message:e.languageObj.getMessage().videoPlayer.error.custom.message})}this._changeToPlay(),this.playbtn.setEnable(!1),this.ffbtn.setEnable(!1),this.rewbtn.setEnable(!1)},_playVideo:function(){t("[VideoPlayerHTML]_playVideo");try{if(this._hideAllSettingPopup(),this.videoEle.paused)if(null===this._playList||0!==parseInt(this.videoEle.currentTime,10)&&!this.bStopState)this.resume();else{var e=this._playList.getCurItem();e=caph.extend(e,this.playItemCallbacks),this.play(e)}else this.pause()}catch(i){t(i)}},_rewindVideo:function(){t("[VideoPlayerHTML]_onRew"),this._hideAllSettingPopup(),this.RW()},_forwardVideo:function(){t("[VideoPlayerHTML]_onFF"),this._hideAllSettingPopup(),this.FF()},_setVideoInformation:function(i){t("[VideoPlayerHTML]_setVideoInformation"),null!==i&&(caph.dom.getElement("#infoTitleDetails").$[0].innerHTML=": "+i.title,caph.dom.getElement("#infoDurationDetails").$[0].innerHTML=": "+e._msToTime(1e3*e.videoEle.duration),caph.dom.getElement("#infoLastSavedDateDetails").$[0].innerHTML=": "+i.date,caph.dom.getElement("#infoFormatDetails").$[0].innerHTML=": "+i.formart,caph.dom.getElement("#infoSizeDetails").$[0].innerHTML=": "+i.size,caph.dom.getElement("#infoResolutionDetails").$[0].innerHTML=": "+i.resolution,caph.dom.getElement("#infoLocationDetails").$[0].innerHTML=": "+i.location)},exit:function(){t("[VideoPlayerHTML]exit"),this.videoEle&&!this.videoEle.paused&&this.videoEle.pause(),document.removeEventListener("mousemove",n),document.body.removeChild(this.videoEle),this.visibility(!1),this.videoPopupAlert&&this.videoPopupAlert.destroy(),this.videoErrorAlert&&this.videoErrorAlert.destroy(),"function"==typeof this.callbackFn&&this.callbackFn(),this.destroy()},previous:function(e){t("[VideoPlayerHtml] previous");var i=3;if(parseInt(this.videoEle.currentTime,10)>i)this.videoEle.currentTime=0;else{var n=this._playList.getPreviousItem(e);n&&(n=caph.extend(n,this.playItemCallbacks),this.play(n))}}})}(this);