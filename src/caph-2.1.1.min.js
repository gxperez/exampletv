/**
 * Copyright (c) 2014 Samsung Electronics Co., Ltd All Rights Reserved 
 * PROPRIETARY/CONFIDENTIAL
 *  
 * This software is the confidential and proprietary information of SAMSUNG 
 * ELECTRONICS ("Confidential Information"). You shall not disclose such 
 * Confidential Information and shall use it only in accordance with the terms of 
 * the license agreement you entered into with SAMSUNG ELECTRONICS. SAMSUNG make 
 * no representations or warranties about the suitability of the software, either 
 * express or implied, including but not limited to the implied warranties of 
 * merchantability, fitness for a particular purpose, or non-infringement. 
 * SAMSUNG shall not be liable for any damages suffered by licensee as a result 
 * of using, modifying or distributing this software or its derivatives.
 */

/*! CaphFramework v2.1.1-150302 @ 2015-03-02 10:39:53 */
(function(){"use strict";function t(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}function e(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}function i(t,e){return"onerror"===t?(ge.on("error",e),void 0):2!==arguments.length?ge[t]:(ge[t]=e,void 0)}function n(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(){}function a(){setTimeout(function(){for(var t,e=0;we.length>e;e++){t=we[e];var i=t.payload;i.guid=i.key+i.id,i.childGuid=i.key+i.childId,i.error&&(i.stack=i.error.stack),ge.trigger(t.name,t.payload)}we.length=0},50)}function h(t,e,i){1===we.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:i&&i._id,label:e._label,timeStamp:be(),error:ge["instrument-with-stack"]?Error(e._label):null}})&&a()}function u(){return new TypeError("A promises callback cannot return that same promise.")}function c(){}function l(t){try{return t.then}catch(e){return Me.error=e,Me}}function p(t,e,i,n){try{t.call(e,i,n)}catch(s){return s}}function d(t,e,i){ge.async(function(t){var n=!1,s=p(i,e,function(i){n||(n=!0,e!==i?m(t,i):v(t,i))},function(e){n||(n=!0,y(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&s&&(n=!0,y(t,s))},t)}function f(t,e){e._state===xe?v(t,e._result):t._state===Ie?y(t,e._result):b(e,void 0,function(i){e!==i?m(t,i):v(t,i)},function(e){y(t,e)})}function _(t,e){if(e.constructor===t.constructor)f(t,e);else{var i=l(e);i===Me?y(t,Me.error):void 0===i?v(t,e):s(i)?d(t,e,i):v(t,e)}}function m(t,e){t===e?v(t,e):n(e)?_(t,e):v(t,e)}function g(t){t._onerror&&t._onerror(t._result),C(t)}function v(t,e){t._state===Ee&&(t._result=e,t._state=xe,0===t._subscribers.length?ge.instrument&&Te("fulfilled",t):ge.async(C,t))}function y(t,e){t._state===Ee&&(t._state=Ie,t._result=e,ge.async(g,t))}function b(t,e,i,n){var s=t._subscribers,r=s.length;t._onerror=null,s[r]=e,s[r+xe]=i,s[r+Ie]=n,0===r&&t._state&&ge.async(C,t)}function C(t){var e=t._subscribers,i=t._state;if(ge.instrument&&Te(i===xe?"fulfilled":"rejected",t),0!==e.length){for(var n,s,r=t._result,o=0;e.length>o;o+=3)n=e[o],s=e[o+i],n?E(i,n,s,r):s(r);t._subscribers.length=0}}function w(){this.error=null}function T(t,e){try{return t(e)}catch(i){return Se.error=i,Se}}function E(t,e,i,n){var r,o,a,h,c=s(i);if(c){if(r=T(i,n),r===Se?(h=!0,o=r.error,r=null):a=!0,e===r)return y(e,u()),void 0}else r=n,a=!0;e._state!==Ee||(c&&a?m(e,r):h?y(e,o):t===xe?v(e,r):t===Ie&&y(e,r))}function x(t,e){try{e(function(e){m(t,e)},function(e){y(t,e)})}catch(i){y(t,i)}}function I(t,e,i){return t===xe?{state:"fulfilled",value:i}:{state:"rejected",reason:i}}function M(t,e,i,n){this._instanceConstructor=t,this.promise=new t(c,n),this._abortOnReject=i,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?v(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&v(this.promise,this._result))):y(this.promise,this._validationError())}function S(t,e){return new Ae(this,t,!0,e).promise}function A(t,e){function i(t){m(r,t)}function n(t){y(r,t)}var s=this,r=new s(c,e);if(!ye(t))return y(r,new TypeError("You must pass an array to race.")),r;for(var o=t.length,a=0;r._state===Ee&&o>a;a++)b(s.resolve(t[a]),void 0,i,n);return r}function P(t,e){var i=this;if(t&&"object"==typeof t&&t.constructor===i)return t;var n=new i(c,e);return m(n,t),n}function R(t,e){var i=this,n=new i(c,e);return y(n,t),n}function k(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function O(t,e){this._id=Ne++,this._label=e,this._state=void 0,this._result=void 0,this._subscribers=[],ge.instrument&&Te("created",this),c!==t&&(s(t)||k(),this instanceof O||L(),x(this,t))}function N(){this.value=void 0}function D(t){try{return t.then}catch(e){return Be.value=e,Be}}function B(t,e,i){try{t.apply(e,i)}catch(n){return Be.value=n,Be}}function $(t,e){for(var i,n,s={},r=t.length,o=Array(r),a=0;r>a;a++)o[a]=t[a];for(n=0;e.length>n;n++)i=e[n],s[i]=o[n+1];return s}function F(t){for(var e=t.length,i=Array(e-1),n=1;e>n;n++)i[n-1]=t[n];return i}function z(t,e){return{then:function(i,n){return t.call(e,i,n)}}}function V(t,e){var i=function(){for(var i,n=this,s=arguments.length,r=Array(s+1),o=!1,a=0;s>a;++a){if(i=arguments[a],!o){if(o=U(i),o===$e){var h=new De(c);return y(h,$e.value),h}o&&o!==!0&&(i=z(o,i))}r[a]=i}var u=new De(c);return r[s]=function(t,i){t?y(u,t):void 0===e?m(u,i):e===!0?m(u,F(arguments)):ye(e)?m(u,$(arguments,e)):m(u,i)},o?H(u,r,t,n):q(u,r,t,n)};return i.__proto__=t,i}function q(t,e,i,n){var s=B(i,n,e);return s===Be&&y(t,s.value),t}function H(t,e,i,n){return De.all(e).then(function(e){var s=B(i,n,e);return s===Be&&y(t,s.value),t})}function U(t){return t&&"object"==typeof t?t.constructor===De?!0:D(t):!1}function j(t,e){return De.all(t,e)}function W(t,e,i){this._superConstructor(t,e,!1,i)}function X(t,e){return new W(De,t,e).promise}function G(t,e){return De.race(t,e)}function K(t,e,i){this._superConstructor(t,e,!0,i)}function Y(t,e){return new He(De,t,e).promise}function Z(t,e,i){this._superConstructor(t,e,!1,i)}function Q(t,e){return new Z(De,t,e).promise}function J(t){throw setTimeout(function(){throw t}),t}function te(t){var e={};return e.promise=new De(function(t,i){e.resolve=t,e.reject=i},t),e}function ee(t,e,i){return De.all(t,i).then(function(t){if(!s(e))throw new TypeError("You must pass a function as map's second argument.");for(var n=t.length,r=Array(n),o=0;n>o;o++)r[o]=e(t[o]);return De.all(r,i)})}function ie(t,e){return De.resolve(t,e)}function ne(t,e){return De.reject(t,e)}function se(t,e,i){return De.all(t,i).then(function(t){if(!s(e))throw new TypeError("You must pass a function as filter's second argument.");for(var n=t.length,r=Array(n),o=0;n>o;o++)r[o]=e(t[o]);return De.all(r,i).then(function(e){for(var i=Array(n),s=0,r=0;n>r;r++)e[r]&&(i[s]=t[r],s++);return i.length=s,i})})}function re(t,e){ri[Je]=t,ri[Je+1]=e,Je+=2,2===Je&&je()}function oe(){return function(){process.nextTick(le)}}function ae(){return function(){vertxNext(le)}}function he(){var t=0,e=new ni(le),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}function ue(){var t=new MessageChannel;return t.port1.onmessage=le,function(){t.port2.postMessage(0)}}function ce(){return function(){setTimeout(le,1)}}function le(){for(var t=0;Je>t;t+=2){var e=ri[t],i=ri[t+1];e(i),ri[t]=void 0,ri[t+1]=void 0}Je=0}function pe(){try{var t=require("vertx");return t.runOnLoop||t.runOnContext,ae()}catch(e){return ce()}}function de(t,e){ge.async(t,e)}function fe(){ge.on.apply(ge,arguments)}function _e(){ge.off.apply(ge,arguments)}var me={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(i,n){var s,r=e(this);s=r[i],s||(s=r[i]=[]),-1===t(s,n)&&s.push(n)},off:function(i,n){var s,r,o=e(this);return n?(s=o[i],r=t(s,n),-1!==r&&s.splice(r,1),void 0):(o[i]=[],void 0)},trigger:function(t,i){var n,s,r=e(this);if(n=r[t])for(var o=0;n.length>o;o++)s=n[o],s(i)}},ge={instrument:!1};me.mixin(ge);var ve;ve=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var ye=ve,be=Date.now||function(){return(new Date).getTime()},Ce=Object.create||function(t){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return o.prototype=t,new o},we=[],Te=h,Ee=void 0,xe=1,Ie=2,Me=new w,Se=new w,Ae=M;M.prototype._validateInput=function(t){return ye(t)},M.prototype._validationError=function(){return Error("Array Methods must be provided an Array")},M.prototype._init=function(){this._result=Array(this.length)},M.prototype._enumerate=function(){for(var t=this.length,e=this.promise,i=this._input,n=0;e._state===Ee&&t>n;n++)this._eachEntry(i[n],n)},M.prototype._eachEntry=function(t,e){var i=this._instanceConstructor;r(t)?t.constructor===i&&t._state!==Ee?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(i.resolve(t),e):(this._remaining--,this._result[e]=this._makeResult(xe,e,t))},M.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===Ee&&(this._remaining--,this._abortOnReject&&t===Ie?y(n,i):this._result[e]=this._makeResult(t,e,i)),0===this._remaining&&v(n,this._result)},M.prototype._makeResult=function(t,e,i){return i},M.prototype._willSettleAt=function(t,e){var i=this;b(t,void 0,function(t){i._settledAt(xe,e,t)},function(t){i._settledAt(Ie,e,t)})};var Pe=S,Re=A,ke=P,Le=R,Oe="rsvp_"+be()+"-",Ne=0,De=O;O.cast=ke,O.all=Pe,O.race=Re,O.resolve=ke,O.reject=Le,O.prototype={constructor:O,_guidKey:Oe,_onerror:function(t){ge.trigger("error",t)},then:function(t,e,i){var n=this,s=n._state;if(s===xe&&!t||s===Ie&&!e)return ge.instrument&&Te("chained",this,this),this;n._onerror=null;var r=new this.constructor(c,i),o=n._result;if(ge.instrument&&Te("chained",n,r),s){var a=arguments[s-1];ge.async(function(){E(s,r,a,o)})}else b(n,r,t,e);return r},"catch":function(t,e){return this.then(null,t,e)},"finally":function(t,e){var i=this.constructor;return this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})},e)}};var Be=new N,$e=new N,Fe=V,ze=j;W.prototype=Ce(Ae.prototype),W.prototype._superConstructor=Ae,W.prototype._makeResult=I,W.prototype._validationError=function(){return Error("allSettled must be called with an array")};var Ve=X,qe=G,He=K;K.prototype=Ce(Ae.prototype),K.prototype._superConstructor=Ae,K.prototype._init=function(){this._result={}},K.prototype._validateInput=function(t){return t&&"object"==typeof t},K.prototype._validationError=function(){return Error("Promise.hash must be called with an object")},K.prototype._enumerate=function(){var t=this.promise,e=this._input,i=[];for(var n in e)t._state===Ee&&e.hasOwnProperty(n)&&i.push({position:n,entry:e[n]});var s=i.length;this._remaining=s;for(var r,o=0;t._state===Ee&&s>o;o++)r=i[o],this._eachEntry(r.entry,r.position)};var Ue=Y;Z.prototype=Ce(He.prototype),Z.prototype._superConstructor=Ae,Z.prototype._makeResult=I,Z.prototype._validationError=function(){return Error("hashSettled must be called with an object")};var je,We=Q,Xe=J,Ge=te,Ke=ee,Ye=ie,Ze=ne,Qe=se,Je=0,ti=re,ei="undefined"!=typeof window?window:void 0,ii=ei||{},ni=ii.MutationObserver||ii.WebKitMutationObserver,si="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ri=Array(1e3);if(je="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?oe():ni?he():si?ue():void 0===ei&&"function"==typeof require?pe():ce(),ge.async=ti,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var oi=window.__PROMISE_INSTRUMENTATION__;i("instrument",!0);for(var ai in oi)oi.hasOwnProperty(ai)&&fe(ai,oi[ai])}var hi={race:qe,Promise:De,allSettled:Ve,hash:Ue,hashSettled:We,denodeify:Fe,on:fe,off:_e,map:Ke,filter:Qe,resolve:Ye,reject:Ze,all:ze,rethrow:Xe,defer:Ge,EventTarget:me,configure:i,async:de};"function"==typeof define&&define.amd?define(function(){return hi}):"undefined"!=typeof module&&module.exports?module.exports=hi:this!==void 0&&(this.RSVP=hi)}).call(this),function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;e.length>i&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),s=window.setTimeout(function(){e(i+n)},n);return t=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s})}(),function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),s=n.length>>>0;if(0===s)return-1;var r=+e||0;if(1/0===Math.abs(r)&&(r=0),r>=s)return-1;for(i=Math.max(r>=0?r:s-Math.abs(r),0);s>i;){if(i in n&&n[i]===t)return i;i++}return-1})}(),Object.prototype.watch||function(t,e){t=t||Object.prototype;var i=function i(t,e,i,n){var s=Object.getOwnPropertyDescriptor(t,e),r=s.get,o=s.set;if(!s.configurable||void 0===s.value&&!s.set||s.writable===!1)return!1;var a=s.value;r=void 0!==s.value?function(){return a}:s.get;var h;if(!o||o&&!o._watchers){var u=function(t){if(a===t)return a;for(var i=a,n=0;u._watchers.length>n;n++){var s=u._watchers[n],r=s.func.call(s.scope,e,i,t);s.mutate&&(t=r)}return a=t};if(u._watchers=[],o){var c={func:function(t,e,i){o(i)},scope:t,mutate:!0};u._watchers.push(c)}h=u}h||(h=o);var l="function"==typeof i?{func:i}:i;return l.scope=n||t,h._watchers.push(l),Object.defineProperty(t,e,{get:r,set:h,configurable:!0,enumerable:s.enumerable}),l.scope},n=function n(t,e,i){var n=Object.getOwnPropertyDescriptor(t,e);if(!(e&&n&&n.set&&n.set._watchers&&0!==n.set._watchers.length))return!1;if(!i)return n.set._watchers=[],!0;for(var s=n.set._watchers,r=0;s.length>r;){if(s[r].func===i)return s.splice(r,1).scope;++r}return!1},s=function(){if(!e&&t.hasOwnProperty("watch")||t.hasOwnProperty("unwatch")||t.hasOwnProperty("getWatchers")||t.hasOwnProperty("getMutators"))throw Error("DataWatch is overriding a previously declared method.");var s={writable:!1,enumerable:!1,configurable:!0};s.value=function(t,e,n){if(t instanceof Array)for(var s in t)Object.watch.apply(this,[t[s],e,n]);else i.apply(this,[this,t,e,n])},Object.defineProperty(t,"watch",s),s.value=function(t,e){n.apply(this,[this,t,e])},Object.defineProperty(t,"unwatch",s)};return s(),t}(),function(t){function e(){function t(t){return i(t)&&(u.splice(n,1),c.splice(n,1)),n>-1}function e(t,e){return i(t)?c[n]:e}function i(t){if(t!==s(t))throw new TypeError("not a non-null object");return n=a.call(u,t),n>-1}function h(t,e){i(t)?c[n]=e:c[u.push(t)-1]=e}var u=[],c=[];return o(r,{"delete":{value:t},get:{value:e},has:{value:i},set:{value:h}})}function i(){}if(!window.WeakMap){var n,s=t.Object,r=e.prototype,o=s.create||function o(t,e){var n=new i;return n["delete"]=e["delete"].value,n.get=e.get.value,n.has=e.has.value,n.set=e.set.value,n},a=[].indexOf||function a(t){for(n=this.length;n--&&this[n]!==t;);return n};e.prototype=i.prototype=r=e(),"defineProperty"in s?s.defineProperty(t,"WeakMap",{value:e}):t.WeakMap=e}}(window),window.Promise=window.Promise||RSVP.Promise,Object.defineProperty(Array.prototype,"remove",{writable:!1,enumerable:!1,configurable:!0,value:function(t,e){"use strict";var i=this.slice((e||t)+1||this.length);return this.length=0>t?this.length+t:t,this.push.apply(this,i)}}),function(t){"use strict";function e(t,i,s){3===arguments.length&&s===!0&&(t=n(t));for(var r in i)i[r]&&i[r].constructor&&i[r].constructor===Object?(t[r]=t[r]||{},"object"!=typeof t[r]?t[r]=i[r]:e(t[r],i[r])):t[r]=i[r];return t}function i(){for(var t={},i=0,n=arguments.length;n>i;i++)t=e(t,arguments[i]);return t}function n(e){var i,s,r=null;if("object"!=typeof e||null===e||void 0===e||e===t)return e;if(e instanceof Array)for(r=[],i=0,s=e.length;s>i;i++)r[i]=n(e[i]);else if(e instanceof Date)r=new Date(e.getTime());else if(e instanceof Object){r={};for(i in e)e.hasOwnProperty(i)&&(r[i]=n(e[i]));r.__proto__=e.__proto__}return r}function s(t,e){function i(t){return t&&"object"==typeof t&&"number"==typeof t.length}var n,r;if(typeof t!=typeof e)return!1;switch(typeof t){case"number":case"string":case"boolean":case"undefined":return t===e;case"object":if(null===t)return t===e;if(i(t)!==i(e))return!1;if(i(t)){if(t.length!==e.length)return!1;for(n=0,r=t.length;r>n;n++)if(!s(t[n],e[n]))return!1;return!0}var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(n=0,r=o.length;r>n;n++)if(!e.hasOwnProperty(o[n]))return!1;for(n=0,r=o.length;r>n;n++)if(!s(t[o[n]],e[o[n]]))return!1;return!0;default:return t===e}}function r(i,n,s){var r;if("string"==typeof i){r=i.split("."),s=s||t;for(var o=0,a=r.length;a>o;o++){if(s[r[o]]=s[r[o]]||{},o===r.length-1){if("object"!=typeof n){s[r[o]]=n;break}s[r[o]]=e(s[r[o]],n)}s=s[r[o]]}}}function o(){return"2.1.1-150302"}function a(){return"20150302-acba72e653bbd05429f313b500c7ab0797152297"}r("caph",{namespace:r,extend:e,mixin:i,clone:n,equal:s,getVersion:o,getRevision:a})}(this),function(){"use strict";function t(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments),e.value)};return e.called=!1,e}caph.namespace("caph",{once:t})}(this),function(){"use strict";var t=Object.prototype,e=t.hasOwnProperty,i={}.toString,n="[object Object]";caph.namespace("caph",{isFunction:function(t){return"function"==typeof t},isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isRegExp:function(t){return t instanceof RegExp},isArray:function(t){return t instanceof Array},isObjectInArray:function(t,e){return-1!==t.indexOf(e)},isObject:function(t){return i.call(t)===n},isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},isEmpty:function(t){if(null===t||void 0===t)return!0;if(caph.isArray(t)||caph.isString(t)||caph.isArguments(t))return 0===t.length;for(var e in t)if(caph.has(t,e))return!1;return!0},has:function(t,i){return null!==t&&e.call(t,i)},isArguments:function(t){return caph.has(t,"callee")},isBlank:function(t){return caph.isNull(t)||caph.isUndefined(t)||""===t},isHTMLElement:function(t){return t instanceof HTMLElement}})}(this),function(t){function e(e,n){if(u[e])throw Error(e+" is already used by another.");var s,r,a=o.exec(e);a?(s=i(a[1]),r=a[2]):(s=t,r=e),s[r]=n,u[e]=!0}function i(e){var i=c[e];if(i)return i;var n,s,r,o=t,a=e.split(".");for(n=0,s=a.length;s>n;n++)r=a[n],o=o[r]=o[r]||{};return c[e]=o}function n(t){var i,n,s=t.$namespace,r=t.$extends,o=t.$statics;if(i=r?r._extend(t):h._extend(t),o)for(n in o)o.hasOwnProperty(n)&&(i[n]=o[n]);return s&&e(s,i),i}var s=!1,r=/\B\$super\b/,o=/(.*)\.(.*)/,a=/^\$(?:namespace|extends|mixins|statics)$/,h=function(){};h._mixins=[],h._extend=function(t){function e(){var t=this.$constructor,e=this.constructor._mixins;if(!s){if(e)for(var i=0,n=e.length;n>i;i++){var r=e[i];for(var o in r)r.hasOwnProperty(o)&&void 0===this[o]&&(this[o]=r[o])}if(t)return t.apply(this,arguments)}}var i=this.prototype;s=!0;var n=new this;s=!1;var o=[];this._mixins.length>0&&(o=o.concat(this._mixins)),t.$mixins&&t.$mixins.length>0&&(o=o.concat(t.$mixins));for(var h in t)a.test(h)||(n[h]="function"==typeof t[h]&&"function"==typeof i[h]&&r.test(t[h])?function(t,e){return function(){var n=this.$super;this.$super=i[t];var s=e.apply(this,arguments);return this.$super=n,s}}(h,t[h]):t[h]);return e.prototype=n,e.prototype.constructor=e,e._mixins=o,e._extend=arguments.callee,e};var u={},c={};return t.$class=n}(this),function(){"use strict";var t={},e=/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFE\u0590-\u05FF\uFB1D-\uFB4F]/;caph.namespace("caph",{toCamelCase:function(e){var i=t[e];return i?i:(i=e.toLowerCase().replace(/-(.)/gi,function(t,e,i){return 0===i?e:e.toUpperCase()}),i&&(t[e]=i),i)},capitalize:function(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t},escapeHTML:function(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;"):t},isRTL:function(t){return e.test(t)}})}(this),function(window){"use strict";caph.namespace("caph",{xhr:function(t,e){if(!t)return new Promise(function(){});var i={method:"get",async:!0,parameter:null,type:"XML",header:null,timeout:0};if(caph.extend(i,e),"JSONP"===i.type)return ajaxUtil.jsonp(t,e.parameter,e.jsonpCharset,e.jsonpCallback);if(i.async===!1)return ajaxUtil.synchronous(t,i.parameter,i.method,i.type,i.header);var n=new caph.xhr.Request(t,i.parameter,i.method,i.type,i.timeout);return n.setRequestHeader(i.header),n.request()}}),$class({$namespace:"caph.xhr.RequestQueue",$constructor:function(){this.queue=[]},push:function(t){t._sequence=ajaxUtil.getRequestSequence(),this.queue.push(t)},pop:function(){return this.queue.length>0?this.queue.shift():null}}),$class({$namespace:"caph.xhr.RequestProcessor",$constructor:function(){this.queue=new caph.xhr.RequestQueue,this.busy=!1,this.request=null,this.xhr=null},process:function(t){return this.queue.push(t),new Promise(function(e,i){t._resolve=e,t._reject=i,setTimeout(this.doRequest.bind(this),0)}.bind(this))},clear:function(){this.busy=!1,this.request=null,this.xhr=null},doRequest:function(){if(this.busy!==!0&&(this.clear(),this.request=this.queue.pop(),this.request)){this.xhr=ajaxUtil.createXHR();var t=ajaxUtil.encodeUrl(this.request.getUrl()),e=ajaxUtil.encodeParameter(this.request.getParameter()),i=this.request.getMethod();this.xhr.open(i,ajaxUtil.getRequestUrl(ajaxUtil.getRequestUrl(t,e,i),"_requestSequence="+this.request._sequence,i),!0),this.xhr.onreadystatechange=function(){if(4===this.xhr.readyState){var t=new caph.xhr.Response(this.xhr,this.request.getType());t.isSuccess()?this.request._resolve(t):this.request._reject(t),this.clear(),setTimeout(this.doRequest.bind(this),0)}}.bind(this),this.xhr.timeout=this.request.getTimeout(),ajaxUtil.setRequestHeader(this.xhr,this.request.getRequestHeader(),i),this.busy=!0,this.xhr.send("post"===i?e:"")}}}),$class({$namespace:"caph.xhr.Request",$constructor:function(t,e,i,n,s){this.url=t||null,this.parameter=e||null,this.method=i||"get",this.type=n||"XML",this.timeout=caph.isBlank(s)?0:s,this.requestHeader=null,this._sequence=null,this._requestProcessorIndex=null,this._resolve=null,this._reject=null},getUrl:function(){return this.url},getParameter:function(){return this.parameter},getMethod:function(){return this.method},getType:function(){return this.type},getTimeout:function(){return this.timeout},setRequestHeader:function(t){t&&(this.requestHeader=t)},getRequestHeader:function(){return this.requestHeader},request:function(){return ajaxUtil.perform(this)}}),$class({$namespace:"caph.xhr.Response",$constructor:function(t,e){if(this.xhr=t,this.type=e,this.value=null,this.isSuccess())switch(e.toUpperCase()){case"JSON":this.value=this.getJSON();break;case"XML":this.value=this.getXML();break;case"HTML":this.value=this.getText();break;case"TEXT":this.value=this.getText()}},isSuccess:function(){return void 0===this.xhr.status||0===this.xhr.status||this.xhr.status>=200&&300>this.xhr.status},getType:function(){return this.type},getJSON:function(){if("undefined"!=typeof JSON)try{return JSON.parse(this.getText())}catch(e){return console.log(e),null}try{return eval("("+this.getText()+")")}catch(e){return console.log(e),null}},getXML:function(){return this.xhr.responseXML},getText:function(t){return t===!0?caph.escapeHTML(this.xhr.responseText):this.xhr.responseText},getStatus:function(){return this.xhr.status},getStatusText:function(){return this.xhr.statusText},getHeader:function(t){return this.xhr.getResponseHeader(t)}});var ajaxUtil={requestSequence:0,maxRequestSequence:1e7,requestProcessor:[],maxRequestProcessor:6,requestProcessorIndex:0,progIds:["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],progId:null,getRequestSequence:function(){return this.requestSequence++%this.maxRequestSequence},createActiveXObject:function(){return new ActiveXObject(this.progId)},createXMLHttpRequest:function(){return new XMLHttpRequest},encodeUrl:function(t){var e=t.indexOf("?");return 0>e?t:t.substring(0,e)+"?"+this.encodeParameter(t.substring(e+1))},encodeParameter:function(t){var e=[];if(caph.isString(t)){for(var i=t.split("&"),n=0,s=i.length;s>n;n++){var r=i[n].split("=");e.push(encodeURIComponent(r[0])+"="+(r[1]?encodeURIComponent(r[1]):""))}return e.join("&")}if(caph.isObject(t)){for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];e.push(encodeURIComponent(o)+"="+(caph.isBlank(a)?"":encodeURIComponent(a)))}return e.join("&")}return""},getRequestUrl:function(t,e,i){return"get"===i&&e?t+(t.match(/\?/)?"&":"?")+e:t},setRequestHeader:function(t,e,i){if(e&&caph.isObject(e))for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n]);"post"===i&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded")},synchronous:function(t,e,i,n,s){var r=this.createXHR();return t=this.encodeUrl(t),e=this.encodeParameter(e),r.open(i,this.getRequestUrl(t,e,i),!1),this.setRequestHeader(r,s,i),r.send("post"===i?e:null),new caph.xhr.Response(r,n)},jsonp:function(t,e,i,n){var s="_caph_callback_"+(new Date).getTime()+"_"+Math.floor(1e12*Math.random());t=this.encodeUrl(t),e=this.encodeParameter(e);var r=document.createElement("script");return r.type="text/javascript",i&&(r.charset=i),r.src=this.getRequestUrl(this.getRequestUrl(t,e,"get"),(n||"_callback")+"="+s,"get"),new Promise(function(t,e){window[s]=function(i){try{t(i)}catch(n){e(i)}finally{r.parentNode.removeChild(r);try{window[s]=void 0}catch(n){console.log(n)}}};var i=caph.dom.getElement("head");i?i.append(r):document.body.appendChild(r)})},init:function(){var t,e;if(window.ActiveXObject){for(t=0,e=this.progIds.length;e>t;t++)try{var i=new ActiveXObject(this.progIds[t]);if(i){this.progId=this.progIds[t];break}}catch(n){console.log(n)}this.createXHR=this.createActiveXObject}else window.XMLHttpRequest&&(this.createXHR=this.createXMLHttpRequest);for(t=0,e=this.maxRequestProcessor;e>t;t++)this.requestProcessor.push(new caph.xhr.RequestProcessor);return this},perform:function(t){return t._requestProcessorIndex=this.requestProcessorIndex++%this.maxRequestProcessor,this.requestProcessor[t._requestProcessorIndex].process(t)}}.init()}(this),function(){"use strict";function t(t,i,n,s,r){if(!t||!i)throw Error("INVALID DATA : KEY - VALUE");if(void 0===n)n=0;else if(isNaN(n))throw Error("INVALID DATA :EXHOURS");r=e(r),s=e(s);var o=[encodeURIComponent(t)+"="+encodeURIComponent(i)];n&&o.push("expires="+new Date((new Date).getTime()+1e3*60*60*n).toUTCString()),s&&o.push("domain="+s),r&&o.push("path="+r),document.cookie=o.join(";")}function e(t){if("string"!=typeof t)return"";var e=t.indexOf(";");return-1!==e&&(t=t.substring(0,e)),t}function i(t){for(var e=encodeURIComponent(t),i=document.cookie.split(";"),n=0,s=i.length;s>n;n++){var r=i[n].split("=");if(r[0]=r[0].replace(/^\s*/,""),r[0]===e)return decodeURIComponent(r[1]);if(r[0]===t)return r[1]}return null}function n(e,i,n){t(e,e,-1,i,n)}caph.namespace("caph.cookie",{set:t,get:i,remove:n})}(this),function(t){"use strict";function e(t,e,i){var n,s;return(n=c.exec(t))?(s=n[1])?u.id(s):(s=n[2])?u["class"](s,e,i):n[3]?u.tag(t,e,i):void 0:u.query(t,e,i)}function i(t){return void 0===t||null===t?o:t instanceof caph.dom.Element?t.firstElement:t}function n(t){return t?new caph.dom.Element([t]):null}function s(t,e){return t.length>0?e===!0?new caph.dom.Element([t[0]]):new caph.dom.Element(t):null}function r(t,n,s){var r=arguments.length;if(1>r)return null;if("string"==typeof t){if(2===r){var o=typeof arguments[1];"boolean"===o?n=arguments[1]:"undefined"!==o&&(s=arguments[1],n=!1)}return e(t,n,i(s))}return null}var o=t.document,a=o.getElementsByClassName?!0:!1,h=o.querySelector&&o.querySelectorAll?!0:!1,u={id:function(t){return n(o.getElementById(t))},"class":function(t,e,i){return s(i.getElementsByClassName(t),e)},tag:function(t,e,i){return s(i.getElementsByTagName(t),e)},query:function(t,e,i){return e===!0?n(i.querySelector(t)):s(i.querySelectorAll(t))}};a||(u["class"]=function(t,e,i){for(var n=[],r=i.getElementsByTagName("*"),o=0,a=r.length;a>o;o++)(" "+r[o].className+" ").indexOf(" "+t+" ")>-1&&n.push(r[o]);return s(n,e)}),h||(u.query=function(){});var c=/^(?:#([\w-]+)|\.([\w-]+)|(\w+))$/;caph.namespace("caph.dom",{getElement:r})}(this),function(t){"use strict";function e(e,i){var a;a=n?document.createEvent("KeyboardEvent"):document.createEvent("Event");var h,u={};for(h in s)r(s,h)&&(u[h]=(r(i,h)&&i||s)[h]);var c=u.ctrlKey,l=u.shiftKey,p=u.altKey,d=u.metaKey,f=u.altGraphKey,_=n>3?((c?"Control":"")+(l?" Shift":"")+(p?" Alt":"")+(d?" Meta":"")+(f?" AltGraph":"")).trim():null,m=u.key+"",g=u["char"]+"",v=u.location,y=u.keyCode||(u.keyCode=m&&m.charCodeAt(0)||0),b=u.charCode||(u.charCode=g&&g.charCodeAt(0)||0),C=u.bubbles,w=u.cancelable,T=u.repeat,E=u.locale,x=t;u.which||(u.which=u.keyCode),"initKeyEvent"in a?a.initKeyEvent(e,C,w,x,c,p,l,d,y,b):n&&"initKeyboardEvent"in a?1===n?a.initKeyboardEvent(e,C,w,x,m,v,c,l,p,d,f):2===n?a.initKeyboardEvent(e,C,w,x,c,p,l,d,y,b):3===n?a.initKeyboardEvent(e,C,w,x,m,v,c,p,l,d,f):4===n?a.initKeyboardEvent(e,C,w,x,m,v,_,T,E):a.initKeyboardEvent(e,C,w,x,g,m,v,_,T,E):a.initEvent(e,C,w);for(h in s)if(r(s,h)&&a[h]!==u[h])try{delete a[h],o(a,h,{writable:!0,value:u[h]})}catch(a){}return a}var i={abort:{type:"Event",bubble:!1},error:{type:"Event",bubble:!1},load:{type:"Event",bubble:!1},unload:{type:"Event",bubble:!1},select:{type:"Event",bubble:!0},focus:{type:"UIEvent",bubble:!1},blur:{type:"UIEvent",bubble:!1},focusin:{type:"UIEvent",bubble:!0},focusout:{type:"UIEvent",bubble:!0},resize:{type:"UIEvent",bubble:!1},scroll:{type:"UIEvent",bubble:!1},click:{type:"MouseEvent",bubble:!0},dblclick:{type:"MouseEvent",bubble:!0},mousedown:{type:"MouseEvent",bubble:!0},mousemove:{type:"MouseEvent",bubble:!0},mouseout:{type:"MouseEvent",bubble:!0},mouseup:{type:"MouseEvent",bubble:!0},mouseover:{type:"MouseEvent",bubble:!0},mousewheel:{type:"MouseEvent",bubble:!0},mouseenter:{type:"MouseEvent",bubble:!1},mouseleave:{type:"MouseEvent",bubble:!1},wheel:{type:"MouseEvent",bubble:!0},beforeinput:{type:"TextEvent",bubble:!0},input:{type:"TextEvent",bubble:!0},keydown:{type:"KeyboardEvent",bubble:!0},keyup:{type:"KeyboardEvent",bubble:!0}},n=function(e){try{return e.initKeyboardEvent("keyup",!1,!1,t,"+",3,!0,!1,!0,!1,!1),delete e.keyCode,o(e,{writable:!0,configurable:!0,value:9}),delete e.charCode,o(e,{writable:!0,configurable:!0,value:9}),delete e.which,o(e,{writable:!0,configurable:!0,value:9}),"+"===(e.keyIdentifier||e.key)&&3===(e.keyLocation||e.location)&&(e.ctrlKey?e.altKey?1:3:e.shiftKey?2:4)||9}catch(i){n=0}}(document.createEvent("KeyboardEvent")),s={"char":"",key:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,locale:"",detail:0,bubbles:!1,cancelable:!1,keyCode:0,charCode:0,which:0},r=Function.prototype.call.bind(Object.prototype.hasOwnProperty),o=Object.defineProperty||function(t,e,i){"value"in i&&(t[e]=i.value)},a={attachEvent:function(t,e,i){t.attachEvent("on"+e,i)},addEventListener:function(t,e,i,n){t.addEventListener(e,i,n)},on:function(t,e,i,n){this.addEventListener(t,e,i,n||!1)},bind:function(t,e,i,n,s){var r=function(t){"function"==typeof s?s(t.target||t.srcElement)===!0&&i(t):i(t)};return this.on(t,e,r,n||!1),{element:t,type:e,listener:r,capture:n||!1}},detachEvent:function(t,e,i){t.detachEvent("on"+e,i)},removeEventListener:function(t,e,i,n){t.removeEventListener(e,i,n)},off:function(t,e,i,n){this.removeEventListener(t,e,i,n||!1)},unbind:function(t){caph.isObject(t)&&this.off(t.element,t.type,t.listener,t.capture||!1)},fireEvent:function(t,e,i){t.fireEvent("on"+e,document.createEventObject(i))},dispatchEvent:function(t,n,s){var r,o=i[n];switch(o=o&&o.type,this.modifyEventProperties(s),o){case"Event":r=document.createEvent(o),r.initEvent(n,s.bubbles,s.cancelable);break;case"UIEvent":r=document.createEvent(o),r.initUIEvent(n,s.bubbles,s.cancelable,s.view,s.detail);break;case"MouseEvent":r=document.createEvent(o),r.initMouseEvent(n,s.bubbles,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget);
break;case"TextEvent":r=document.createEvent(o),r.initTextEvent(n,s.bubbles,s.cancelable,s.view,s.data);break;case"KeyboardEvent":r=e(n,s);break;default:r=document.createEvent("CustomEvent"),r.initCustomEvent(n,s.bubbles,s.cancelable,s.detail)}t.dispatchEvent(r)},modifyEventProperties:function(t){caph.isBlank(t.bubbles)&&(t.bubbles=!0),caph.isBlank(t.cancelable)&&(t.cancelable=!0)},trigger:function(t,e,i){this.dispatchEvent(t,e,i||{})},init:function(){!document.addEventListener&&document.attachEvent&&(this.on=this.attachEvent),!document.removeEventListener&&document.detachEvent&&(this.off=this.detachEvent),!document.dispatchEvent&&document.fireEvent&&(this.trigger=this.fireEvent)}};a.init();var h={add:function(t,e,i,n,s){if(!t)return null;4===arguments.length&&"function"==typeof n&&(s=n,n=!1);var r=[];if(caph.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList){for(var o=0,h=t.length;h>o;o++)r.push(a.bind(t[o],e,i,n,s));return r}return t instanceof caph.dom.Element?s?t.delegate(e,i,s):t.bind(e,i,n):a.bind(t,e,i,n,s)},remove:function(t){if(caph.isArray(t))for(var e=0,i=t.length;i>e;e++)a.unbind(t[e]);else t instanceof caph.dom.Element?t.unbind():a.unbind(t)},fire:function(t,e,i){if(caph.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList)for(var n=0,s=t.length;s>n;n++)a.trigger(t[n],e,i);else t instanceof caph.dom.Element?t.trigger(e,i):a.trigger(t,e,i)}};Object.defineProperty(h,"DEFAULT_EVENT_TYPE",{value:i,configurable:!1,enumerable:!0,writable:!1}),caph.namespace("caph.dom",{event:h}),$class({$namespace:"caph.dom.event.HandleManager",$constructor:function(){this.handle={}},get:function(t){return this.handle[t]},set:function(t,e){if(e){var i=this.handle[t]||[];i.push(e),this.handle[t]=i}},remove:function(t){this.handle[t]=null},types:function(){var t=[];for(var e in this.handle)this.handle.hasOwnProperty(e)&&t.push(e);return t}})}(this),function(t){function e(t,e,i){var n=!0;return t.length===e.length?(t.each(function(t,s){return i(t,s,e)?void 0:(n=!1,!1)}),n):!1}function i(t,e){var i=t.get(e);if(i){for(var n=0,s=i.length;s>n;n++)caph.dom.event.remove(i[n]);t.remove(e)}}function n(t){return caph.isNumber(t)?t:"auto"===t?0:1*t.replace("px","")}function s(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1}function r(t){return t&&t===t.window}function o(t){return t&&9===t.nodeType}function a(t){return r(t)?t:o(t)?t.defaultView||t.parentWindow:!1}function h(t,e){return t&&t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function u(t){return t.length>0?new caph.dom.Element(t):null}function c(e){for(var i=t.document.documentElement,n=e.offsetParent||i;n&&!h(n,"html")&&"static"===caph.dom._style.get(n,"position");)n=n.offsetParent;return new caph.dom.Element(n||i)}function l(t,e){return"string"==typeof e?f(t,e):e instanceof caph.dom.Element?d(t,e.$):e}function p(t,e){return"string"==typeof e?f(t,e).firstChild:e instanceof caph.dom.Element?e.firstElement:e}function d(t,e){var i=_(t);if(i){for(var n=0,s=e.length;s>n;n++)i.appendChild(e[n]);return i}return null}function f(t,e){var i,n,s,r=m(t);if(r){if(r.innerHTML=e,n=r.childNodes,s=_(t),n&&s)for(var o=0,a=n.length;a>o;o++)i=n[o],1===i.nodeType&&s.appendChild(i.cloneNode(!0));return s}return null}function _(t){return t&&t.ownerDocument?t.ownerDocument.createDocumentFragment():null}function m(t){return t&&t.ownerDocument?t.ownerDocument.createElement("div"):null}function g(t,e){if(!t)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return!0;return!1}function v(t,e){var i=caph.dom.getElement(t,e);return i?i.get():null}caph.namespace("caph.dom._css",{addClass:function(t,e){t.className=caph.isArray(e)?(t.className+" "+e.join(" ")).trim():(t.className+" "+e).trim()},removeClass:function(t,e){var i=" "+t.className+" ";if(caph.isArray(e))for(var n=0,s=e.length;s>n;n++)i=i.replace(" "+e[n]+" "," ");else i=i.replace(" "+e+" "," ");t.className=i.trim()},hasClass:function(t,e){var i=" "+t.className+" ";if(!caph.isArray(e))return i.indexOf(" "+e+" ")>-1;for(var n=0,s=e.length;s>n;n++)if(i.indexOf(" "+e[n]+" ")>-1)return!0;return!1}}),caph.namespace("caph.dom._style",{get:function(t,e){var i,n=caph.toCamelCase(e);return i=t.style[n],i?i:document.defaultView&&document.defaultView.getComputedStyle&&(i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e))?i:t.currentStyle&&(i=t.currentStyle[n])?i:"opacity"===e&&t.style.filter&&(i=t.style.filter.match(/alpha\(opacity=(.*)\)/),i[1])?1*i[1]/100:null},set:function(t,e,i){t.style[caph.toCamelCase(e)]=i,"opacity"===e&&t.style.filter&&(t.style.filter="alpha(opacity="+100*i+")")}}),$class({$namespace:"caph.dom.Element",$constructor:function(t){this.$=t instanceof caph.dom.Element?t.$:"string"==typeof t?caph.dom.Element.createElement(t):t.length?t:[t],this.length=this.$.length,this.firstElement=this.$[0]},$statics:{createElement:function(t){var e=document.createElement("div");e.innerHTML=t;var i=e.childNodes,n=[];if(i){for(var s=0,r=i.length;r>s;s++)1===i[s].nodeType&&n.push(i[s].cloneNode(!0));return n}return null}},addClass:function(t){return this.each(function(e,i){caph.dom._css.addClass(i,t)})},removeClass:function(t){return this.each(function(e,i){caph.dom._css.removeClass(i,t)})},hasClass:function(t){var e=!1;return this.each(function(i,n){return caph.dom._css.hasClass(n,t)?(e=!0,!1):void 0}),e},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},attr:function(t,e){if(void 0===e){if("string"==typeof t)return this.firstElement.getAttribute(t);for(var i in t)t.hasOwnProperty(i)&&this.each(function(e,n){n.setAttribute(i,t[i])});return this}return this.each(function(i,n){n.setAttribute(t,e)})},removeAttr:function(t){return caph.isArray(t)?this.each(function(e,i){for(var n=0,s=t.length;s>n;n++)i.removeAttribute(t[n])}):this.each(function(e,i){i.removeAttribute(t)})},text:function(t){return void 0===t?this.map(function(t,e){return e.innerText}).join(""):this.each(function(e,i){i.innerText=t})},html:function(t){return void 0===t?this.firstElement.innerHTML:this.each(function(e,i){i.innerHTML=t})},outerHtml:function(){if(this.length>1){var t=[];return this.each(function(e,i){t.push(i.outerHTML)}),t}return this.firstElement.outerHTML},style:function(t,e){if(void 0===e){if("string"==typeof t)return caph.dom._style.get(this.firstElement,t);for(var i in t)t.hasOwnProperty(i)&&this.each(function(e,n){caph.dom._style.set(n,i,t[i])});return this}return this.each(function(i,n){caph.dom._style.set(n,t,e)})},show:function(t){return this.style("display",t?t:"block")},hide:function(){return this.style("display","none")},toggle:function(t){var e=this.style("display");return"none"===e?this.style("display",t?t:"block"):this.style("display","none")},width:function(t){return void 0===t?n(this.style("width"))||this.firstElement.offsetWidth:this.style("width",t+"px")},height:function(t){return void 0===t?n(this.style("height"))||this.firstElement.offsetHeight:this.style("height",t+"px")},innerWidth:function(){return this.width()+n(this.style("padding-left"))+n(this.style("padding-right"))},innerHeight:function(){return this.height()+n(this.style("padding-top"))+n(this.style("padding-bottom"))},outerWidth:function(t){var e=this.innerWidth()+n(this.style("border-left-width"))+n(this.style("border-right-width"));return t?e+n(this.style("margin-left"))+n(this.style("margin-right")):e},outerHeight:function(t){var e=this.innerHeight()+n(this.style("border-top-width"))+n(this.style("border-bottom-width"));return t?e+n(this.style("margin-top"))+n(this.style("margin-bottom")):e},padding:function(){return{left:n(this.style("padding-left")),right:n(this.style("padding-right")),top:n(this.style("padding-top")),bottom:n(this.style("padding-bottom"))}},border:function(){return{left:n(this.style("border-left-width")),right:n(this.style("border-right-width")),top:n(this.style("border-top-width")),bottom:n(this.style("border-bottom-width"))}},margin:function(){return{left:n(this.style("margin-left")),right:n(this.style("margin-right")),top:n(this.style("margin-top")),bottom:n(this.style("margin-bottom"))}},offset:function(t){if("object"==typeof t)return this.each(function(e,i){var s,r,o,a=new caph.dom.Element(i),h=a.style("position");"static"===h&&a.style("position","relative");var u=a.offset(),c=a.style("top"),l=a.style("left");"absolute"!==h&&"fixed"!==h||"auto"!==c&&"auto"!==l?(r=n(c),o=n(l)):(s=a.position(),r=s.top,o=s.left),"number"==typeof t.top&&a.style("top",t.top-u.top+r),"number"==typeof t.left&&a.style("left",t.left-u.left+o)});var e={top:0,left:0},i=this.firstElement.ownerDocument;if(i){var r=i.documentElement;if(!s(r,this.firstElement))return e;try{e=this.firstElement.getBoundingClientRect()}catch(o){e={top:0,left:0}}var h=a(i);return{top:e.top+(h.pageYOffset||r.scrollTop)-(r.clientTop||0),left:e.left+(h.pageXOffset||r.scrollLeft)-(r.clientLeft||0)}}},position:function(){var t,e,i={top:0,left:0};if("fixed"===this.style("position"))try{t=this.firstElement.getBoundingClientRect()}catch(s){t={top:0,left:0}}else t=this.offset(),e=c(this.firstElement),e.isNodeName("html")||(i=e.offset()),i.top+=n(e.style("border-top-width")),i.left+=n(e.style("border-left-width"));return{top:t.top-i.top-n(this.style("margin-top")),left:t.left-i.left-n(this.style("margin-left"))}},scrollLeft:function(t){return void 0===t?this.firstElement.scrollLeft:this.each(function(e,i){i.scrollLeft=t})},scrollTop:function(t){return void 0===t?this.firstElement.scrollTop:this.each(function(e,i){i.scrollTop=t})},prepend:function(t){return t=l(this.firstElement,t),this.each(function(e,i){i.insertBefore(t,i.firstChild)})},append:function(t){return t=l(this.firstElement,t),this.each(function(e,i){i.appendChild(t)})},before:function(t){return t=l(this.firstElement,t),this.each(function(e,i){var n=i.parentNode;n&&n.insertBefore(t,i)})},after:function(t){return t=l(this.firstElement,t),this.each(function(e,i){var n=new caph.dom.Element(i),s=i.parentNode;if(s){var r=n.next();r?s.insertBefore(t,r.firstElement):s.insertBefore(t,i)}})},wrap:function(t){return t=p(this.firstElement,t),this.each(function(e,i){var n=i.parentNode;n&&n.insertBefore(t,i),t.appendChild(i)})},unwrap:function(){return this.each(function(t,e){var i=new caph.dom.Element(e).parent();i&&(i.before(i.firstChild()),i.remove())})},remove:function(){this.each(function(t,e){var i=e.parentNode;i&&i.removeChild(e)})},clone:function(){var t=[];return this.each(function(e,i){t.push(i.cloneNode(!0))}),u(t)},each:function(t){if("function"!=typeof t)return this;for(var e=0;this.length>e&&t.call(this.$[e],e,this.$[e])!==!1;e++);return this.firstElement=this.$[0],this},eq:function(t){return t>-1&&this.length>t?new caph.dom.Element(this.$[t]):null},get:function(t){return void 0===t?this.$:t>-1&&this.length>t?this.$[t]:null},slice:function(t,e){(void 0===t||0>t)&&(t=0),(void 0===e||e>this.length)&&(e=this.length);for(var i=[],n=t;e>n;n++)i.push(this.$[n]);return u(i)},first:function(){return new caph.dom.Element(this.$[0])},last:function(){return new caph.dom.Element(this.$[this.length-1])},map:function(t){var e=[];return this.each(function(i,n){var s=t(i,n);s&&e.push(s)}),e},parent:function(t){var e=[],i=caph.isFunction(t),n=caph.isString(t);return this.each(function(s,r){var o=r.parentNode;o&&!g(e,o)&&(i?t(o)&&e.push(o):n?g(v(t,o.parentNode),o)&&e.push(o):e.push(o))}),u(e)},firstChild:function(){var t=[];return this.each(function(e,i){for(var n=i.firstElementChild||i.firstChild;n;){if(1===n.nodeType){t.push(n);break}n=n.nextSibling}}),u(t)},children:function(t){var e,i=[];if(caph.isString(t))return this.find(t);var n=caph.isFunction(t);return this.each(function(s,r){var o=r.childNodes;if(o)for(var a=0,h=o.length;h>a;a++)e=o[a],1===e.nodeType&&(n?t(e)&&i.push(e):i.push(e))}),u(i)},prev:function(t){var e=[],i=caph.isFunction(t),n=caph.isString(t);return this.each(function(s,r){do if(r=r.previousSibling,r&&1===r.nodeType){i?t(r)&&e.push(r):n?g(v(t,r.parentNode),r)&&e.push(r):e.push(r);break}while(r)}),u(e)},next:function(t){var e=[],i=caph.isFunction(t),n=caph.isString(t);return this.each(function(s,r){do if(r=r.nextSibling,r&&1===r.nodeType){i?t(r)&&e.push(r):n?g(v(t,r.parentNode),r)&&e.push(r):e.push(r);break}while(r)}),u(e)},siblings:function(t){var e=[],i=caph.isString(t),n=caph.isFunction(t);return this.each(function(s,r){var o=new caph.dom.Element(r).parent();o&&(i?o.find(t,function(t){t!==r&&e.push(t)}):o.children(function(i){return i===r?!1:n?t(i)?(e.push(i),!0):!1:(e.push(i),!0)}))}),u(e)},bind:function(t,e,i){return this.each(function(n,s){s.eventHandleManager||(s.eventHandleManager=new caph.dom.event.HandleManager),s.eventHandleManager.set(t,caph.dom.event.add(s,t,e,i))})},unbind:function(t){return void 0===t?this.each(function(t,e){e.eventHandleManager.types().forEach(function(t){i(e.eventHandleManager,t)})}):this.each(function(e,n){i(n.eventHandleManager,t)})},delegate:function(t,e,i){return caph.isString(i)?(this.find(i).each(function(i,n){n.eventHandleManager||(n.eventHandleManager=new caph.dom.event.HandleManager),n.eventHandleManager.set(t,caph.dom.event.add(n,t,e))}),this):this.each(function(n,s){s.eventHandleManager||(s.eventHandleManager=new caph.dom.event.HandleManager),s.eventHandleManager.set(t,caph.dom.event.add(s,t,e,i))})},undelegate:function(t,e){return t=caph.isBlank(t)?void 0:t,caph.isString(e)?(this.find(e).unbind(t),this):this.unbind(t)},trigger:function(t,e){return this.each(function(i,n){caph.dom.event.fire(n,t,e)})},find:function(t,e){var i=[],n=caph.isFunction(e);return this.each(function(s,r){var o=caph.dom.getElement(t,r);if(o)for(var a=0,h=o.length;h>a;a++){var u=o.$[a];n?e(u)&&i.push(u):i.push(u)}}),u(i)},equal:function(t){return t instanceof caph.dom.Element?e(this,t,function(t,e,i){return e===i.get(t)}):t.length?e(this,t,function(t,e,i){return e===i[t]}):this.length>1?!1:this.firstElement===t},isNodeName:function(t){return h(this.firstElement,t)},transform:function(){return new caph.animation.Transform(this.firstElement)}})}(this),function(t){"use strict";var e=new caph.dom.event.HandleManager;caph.namespace("caph.window",{attr:function(e,i){return void 0===i?t[e]:(t[e]=i,this)},removeAttr:function(e){return t[e]=null,this},width:function(){return t.innerWidth||t.document.documentElement.clientWidth||t.document.body.clientWidth},height:function(){return t.innerHeight||t.document.documentElement.clientHeight||t.document.body.clientHeight},outerWidth:function(){return t.outerWidth||this.width()},outerHeight:function(){return t.outerHeight||this.height()},scrollLeft:function(e){return void 0===e?t.pageXOffset||t.document.documentElement.scrollLeft:(t.scrollTo(e,t.pageYOffset||t.document.documentElement.scrollTop),this)},scrollTop:function(e){return void 0===e?t.pageYOffset||t.document.documentElement.scrollTop:(t.scrollTo(t.pageXOffset||t.document.documentElement.scrollLeft,e),this)},bind:function(i,n,s){return e.set(i,caph.dom.event.add(t,i,n,s)),this},unbind:function(t){var i=e.get(t);if(i){for(var n=0,s=i.length;s>n;n++)caph.dom.event.remove(i[n]);e.remove(t)}return this},trigger:function(e,i){return caph.dom.event.fire(t,e,i),this}})}(this),function(t){"use strict";var e=new caph.dom.event.HandleManager;caph.namespace("caph.document",{attr:function(e,i){return void 0===i?t.document[e]:(t.document[e]=i,this)},removeAttr:function(e){return t.document[e]=null,this},width:function(){return Math.max(t.document.body.offsetWidth,t.document.documentElement.offsetWidth,t.document.body.clientWidth)},height:function(){return Math.max(t.document.body.offsetHeight,t.document.documentElement.offsetHeight,t.document.body.clientHeight)},outerWidth:function(){return Math.max(t.document.body.scrollWidth,t.document.documentElement.scrollWidth)},outerHeight:function(){return Math.max(t.document.body.scrollHeight,t.document.documentElement.scrollHeight)},scrollLeft:function(e){return void 0===e?t.document.documentElement.scrollLeft:(t.document.documentElement.scrollLeft=e,this)},scrollTop:function(e){return void 0===e?t.document.documentElement.scrollTop:(t.document.documentElement.scrollTop=e,this)},bind:function(i,n,s){return e.set(i,caph.dom.event.add(t.document,i,n,s)),this},unbind:function(t){var i=e.get(t);if(i){for(var n=0,s=i.length;s>n;n++)caph.dom.event.remove(i[n]);e.remove(t)}return this},trigger:function(e,i){return caph.dom.event.fire(t.document,e,i),this}})}(this),function(){"use strict";var t={code:!0,type:!0,ctrl:!0,alt:!0,shift:!0,meta:!0},e={POWER:"power",SOURCE:"source",HDMI:"hdmi",N0:"n0",N1:"n1",N2:"n2",N3:"n3",N4:"n4",N5:"n5",N6:"n6",N7:"n7",N8:"n8",N9:"n9",TTX_MIX:"ttxMix",PRE_CH:"preCh",MUTE:"mute",CH_LIST:"chList",VOL_DOWN:"volDown",VOL_UP:"volUp",CH_DOWN:"chDown",CH_UP:"chUp",HOME:"home",MENU:"menu",GUIDE:"guide",TOOLS:"tools",INFO:"info",LEFT:"left",UP:"up",RIGHT:"right",DOWN:"down",ENTER:"enter",RETURN:"return",EXIT:"exit",RED:"red",GREEN:"green",YELLOW:"yellow",BLUE:"blue",REWIND:"rewind",PAUSE:"pause",FF:"ff",REC:"rec",PLAY:"play",STOP:"stop"},i={409:e.POWER,10072:e.SOURCE,10143:e.HDMI,48:e.N0,49:e.N1,50:e.N2,51:e.N3,52:e.N4,53:e.N5,54:e.N6,55:e.N7,56:e.N8,57:e.N9,10200:e.TTX_MIX,10190:e.PRE_CH,449:e.MUTE,10073:e.CH_LIST,447:e.VOL_DOWN,448:e.VOL_UP,427:e.CH_DOWN,428:e.CH_UP,10071:e.HOME,10133:e.MENU,458:e.GUIDE,10135:e.TOOLS,457:e.INFO,37:e.LEFT,38:e.UP,39:e.RIGHT,40:e.DOWN,13:e.ENTER,10009:e.RETURN,10182:e.EXIT,403:e.RED,404:e.GREEN,405:e.YELLOW,406:e.BLUE,412:e.REWIND,19:e.PAUSE,417:e.FF,416:e.REC,415:e.PLAY,413:e.STOP};caph.namespace("caph.event.key",{TYPE:e,setKeyMap:function(e){if(!caph.isEmpty(e)){var n;for(var s in e)if(t[n=e[s]])throw Error('IllegalArgumentError: The "'+n+'" is reserved. Please use another one.');i=caph.clone(e)}return this},getKeyMap:function(){return caph.clone(i)},getType:function(t){var e=i[t];return caph.isString(e)?e:"unknown"}})}(this),function(){"use strict";function t(t,e,i,n){caph.isBlank(i)||(caph.isBlank(n)?Object.defineProperty(t,e,{value:i}):Object.defineProperty(t,e,{value:i,configurable:caph.isBlank(n.configurable)?!0:n.configurable,enumerable:caph.isBlank(n.enumerable)?!0:n.enumerable,writable:caph.isBlank(n.writable)?!0:n.writable}))}function e(e,i,n){if(!caph.isBlank(e[i]))throw Error('IllegalStateError: The "'+i+'" property of "caph.event.Message" cannot be changed.');t(e,i,n,{configurable:!1,writable:!1})}$class({$namespace:"caph.event.Message",$constructor:function(e){if(caph.isBlank(e))throw Error('IllegalArgumentError: The "caph.event.Message" requires an object as the constructor parameter.');if(caph.isBlank(e.type)||!caph.isString(e.type))throw Error('IllegalArgumentError: The "caph.event.Message" constructor parameter object requires a string "type" property.');t(this,"type",e.type.toLowerCase(),{configurable:!1,writable:!1}),t(this,"source",e.target||e.srcElement||e.source,{configurable:!1,writable:!1}),t(this,"related",e.relatedTarget||e.related,{configurable:!1,writable:!1}),t(this,"bubbles",caph.isBlank(e.bubbles)?!0:e.bubbles,{configurable:!1,writable:!1}),t(this,"timeStamp",e.timeStamp||(new Date).getTime(),{configurable:!1,writable:!1}),this.detail=caph.clone(e.detail),this._propagationStopped=!1,e instanceof Event?t(this,"_event",e,{configurable:!1,enumerable:!1,writable:!1}):e._event instanceof Event&&t(this,"_event",e._event,{configurable:!1,enumerable:!1,writable:!1})},getType:function(){return this.type},setSource:function(t){e(this,"source",t)},getSource:function(){return this.source},setRelated:function(t){e(this,"related",t)},getRelated:function(){return this.related},isBubbles:function(){return this.bubbles},getTimeStamp:function(){return this.timeStamp},setDetail:function(t){this.detail=caph.clone(t)},getDetail:function(){return this.detail},stopPropagation:function(){this._propagationStopped=!0,this._event&&this._event.stopPropagation()},isPropagationStopped:function(){return this._propagationStopped},preventDefault:function(){this._event&&(this._event.preventDefault(),this._event.returnValue=!1)},key:function(){var t,e,i,n={};return(t=this.detail)&&(n.code=e=t.keyCode||t.which||t.charCode,n.type=i=caph.event.key.getType(e),n.ctrl=t.ctrlKey,n.alt=t.altKey,n.shift=t.shiftKey,n.meta=t.metaKey,n[i]=!0),n},mouse:function(){var t={},e=this.detail;return e&&(t.left=e.which?0===e.button:!!(1&e.button),t.middle=e.which?1===e.button:!!(4&e.button),t.right=e.which?2===e.button:!!(2&e.button),t.ctrl=e.ctrlKey,t.alt=e.altKey,t.shift=e.shiftKey,t.meta=e.metaKey,t.wheelDelta=e.wheelDelta?e.wheelDelta/120:e.detail?-e.detail/3:0,t.screenX=e.screenX,t.screenY=e.screenY,t.clientX=e.clientX,t.clientY=e.clientY,t.offsetX=e.offsetX,t.offsetY=e.offsetY,t.pageX=e.pageX,t.pageY=e.pageY),t}})}(this),function(){"use strict";function t(t){var e;return(e=n.exec(t))?e[0]:"custom"}function e(e){var i=t(e);switch(i){case"key":return["charCode","keyCode","keyIdentifier","keyLocation","location","which","ctrlKey","shiftKey","altGraphKey","altKey","metaKey","repeat","locale","key","code","char"];case"mouse":case"click":case"wheel":return["screenX","screenY","clientX","clientY","offsetX","offsetY","pageX","pageY","ctrlKey","shiftKey","altKey","metaKey","button","which","wheelDelta","detail","deltaMode","deltaX","deltaY","deltaZ"];case"input":return["data"];default:return null}}var i=null,n=/(?:^(?:key|mouse))|(?:(?:click|input)$)|(?:^wheel$)/;$class({$namespace:"caph.event.Normalizer",$constructor:function(){i?console.warn('Use "caph.event.Normalizer.getInstance()" instead of "new caph.event.Normalizer()".'):i=this},$statics:{getInstance:function(){return null===i&&(i=new caph.event.Normalizer),i}},toMessage:function(t){var i,n,s=new caph.event.Message(t),r=e(s.getType());if(r){i={};for(var o=0,a=r.length;a>o;o++)n=r[o],i[n]=t[n];s.setDetail(i)}else s.setDetail(t.detail);return s},createFrom:function(t,e){var i={type:t.type,source:t.source,related:t.related,bubbles:t.bubbles,timeStamp:t.timeStamp,detail:t.detail,_event:t._event};return caph.isObject(e)&&caph.extend(i,e),new caph.event.Message(i)}})}(this),function(){"use strict";$class({$namespace:"caph.math.Vector3",$constructor:function(t,e,i){t instanceof caph.math.Vector3?this.set(t.x,t.y,t.z):(this.x=t||0,this.y=e||0,this.z=i||0)},set:function(t,e,i){return this.x=void 0===t||null===t?this.x:t,this.y=void 0===e||null===t?this.y:e,this.z=void 0===i||null===t?this.z:i,this},get:function(){return[this.x,this.y,this.z]},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z;return t instanceof caph.math.Matrix4&&(t=t.get()),this.x=t[0]*e+t[4]*i+t[8]*n+t[12],this.y=t[1]*e+t[5]*i+t[9]*n+t[13],this.z=t[2]*e+t[6]*i+t[10]*n+t[14],this},clone:function(){return new caph.math.Vector3(this.x,this.y,this.z)},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},distance:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+i*i+n*n)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},cross:function(t){var e=this.x,i=this.y,n=this.z;return this.x=i*t.z-n*t.y,this.y=n*t.x-e*t.z,this.z=e*t.y-i*t.x,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},normalize:function(){var t=this.length();return 0===t&&(t=1),this.multiplyScalar(1/t),this}})}(this),function(){"use strict";$class({$namespace:"caph.math.Vector4",$constructor:function(t,e,i,n){t instanceof caph.math.Vector4?this.set(t.x,t.y,t.z,t.w):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0)},set:function(t,e,i,n){return this.x=void 0===t?this.x:t,this.y=void 0===e?this.y:e,this.z=void 0===i?this.z:i,this.w=void 0===n?this.w:n,this},get:function(){return[this.x,this.y,this.z,this.w]},applyMatrix4:function(t){var e=[],i=4,n=4,s=1,r=this.get();t instanceof caph.math.Matrix4&&(t=t.get());for(var o=0;i>o;o++)for(var a=0;s>a;a++){e[o*s+a]=0;for(var h=0;n>h;h++)e[o*s+a]+=t[o*n+h]*r[h*s+a]}return this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3],this},clone:function(){return new caph.math.Vector4(this.x,this.y,this.z,this.w)},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},distance:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z,s=this.w-t.w;return Math.sqrt(e*e+i*i+n*n+s*s)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},normalize:function(){var t=this.length();return 0===t&&(t=1),this.multiplyScalar(1/t),this},toVector3:function(){return new caph.math.Vector3(this.x,this.y,this.z)}})}(this),function(){"use strict";function t(t,e,i){return[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]}function e(t,e,i){return[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]}function i(t,e,i){var n=c*t,s=c*e,r=c*i,o=Math.sin(s),a=Math.sin(n),h=Math.sin(r),u=o*h,l=Math.cos(s),p=Math.cos(n),d=Math.cos(r),f=l*h,_=d*a;return[l*d+a*u,_*o-f,p*o,0,p*h,p*d,-a,0,f*a-d*o,u+l*_,l*p,0,0,0,0,1]}function n(t){var e=c*t,i=Math.sin(e),n=Math.cos(e);return[1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1]}function s(t){var e=c*t,i=Math.sin(e),n=Math.cos(e);return[n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1]}function r(t){var e=c*t,i=Math.sin(e),n=Math.cos(e);return[n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1]}function o(t,e,i,n){var s=new caph.math.Vector3(t,e,i).normalize(),r=c*n,o=Math.cos(r),a=Math.sin(r),h=1-o;return[s.x*s.x*h+o,s.x*s.y*h+s.z*a,s.x*s.z*h-s.y*a,0,s.y*s.x*h-s.z*a,s.y*s.y*h+o,s.y*s.z*h+s.x*a,0,s.z*s.x*h+s.y*a,s.z*s.y*h-s.x*a,s.z*s.z*h+o,0,0,0,0,1]}function a(t,e){return[1,Math.tan(e*c),0,0,Math.tan(t*c),1,0,0,0,0,1,0,0,0,0,1]}function h(t,e){var i=[],n=t[0],s=t[4],r=t[8],o=t[12],a=t[1],h=t[5],u=t[9],c=t[13],l=t[2],p=t[6],d=t[10],f=t[14],_=t[3],m=t[7],g=t[11],v=t[15],y=e[0],b=e[4],C=e[8],w=e[12],T=e[1],E=e[5],x=e[9],I=e[13],M=e[2],S=e[6],A=e[10],P=e[14],R=e[3],k=e[7],L=e[11],O=e[15];return i[0]=n*y+s*T+r*M+o*R,i[4]=n*b+s*E+r*S+o*k,i[8]=n*C+s*x+r*A+o*L,i[12]=n*w+s*I+r*P+o*O,i[1]=a*y+h*T+u*M+c*R,i[5]=a*b+h*E+u*S+c*k,i[9]=a*C+h*x+u*A+c*L,i[13]=a*w+h*I+u*P+c*O,i[2]=l*y+p*T+d*M+f*R,i[6]=l*b+p*E+d*S+f*k,i[10]=l*C+p*x+d*A+f*L,i[14]=l*w+p*I+d*P+f*O,i[3]=_*y+m*T+g*M+v*R,i[7]=_*b+m*E+g*S+v*k,i[11]=_*C+m*x+g*A+v*L,i[15]=_*w+m*I+g*P+v*O,i}function u(t,e){var i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],p=e[10],d=e[11],f=[1,0,0,0,0,1,0,0,0,0,1,0,t[12]+e[12],t[13]+e[13],t[14]+e[14],1],_=t[0],m=t[1],g=t[2];return f[0]=_*i+m*o+g*c,f[1]=_*n+m*a+g*l,f[2]=_*s+m*h+g*p,f[3]=_*r+m*u+g*d,_=t[4],m=t[5],g=t[6],f[4]=_*i+m*o+g*c,f[5]=_*n+m*a+g*l,f[6]=_*s+m*h+g*p,f[7]=_*r+m*u+g*d,_=t[8],m=t[9],g=t[10],f[8]=_*i+m*o+g*c,f[9]=_*n+m*a+g*l,f[10]=_*s+m*h+g*p,f[11]=_*r+m*u+g*d,f}var c=Math.PI/180;$class({$namespace:"caph.math.Matrix4",$constructor:function(t){caph.isBlank(t)?this.identity():this.set(t)},$statics:{translate:function(e,i,n){return new caph.math.Matrix4(t(e,i,n))},scale:function(t,i,n){return new caph.math.Matrix4(e(t,i,n))},rotateXYZ:function(t,e,n){return new caph.math.Matrix4(i(t,e,n))},rotateX:function(t){return new caph.math.Matrix4(n(t))},rotateY:function(t){return new caph.math.Matrix4(s(t))},rotateZ:function(t){return new caph.math.Matrix4(r(t))},rotateAxis:function(t,e,i,n){return new caph.math.Matrix4(o(t,e,i,n))},skewXY:function(t,e){return new caph.math.Matrix4(a(t,e))},multiply:function(t,e){return t instanceof caph.math.Matrix4&&(t=t.get()),e instanceof caph.math.Matrix4&&(e=e.get()),new caph.math.Matrix4(u(t,e))},multiplyMatrix:function(t,e){return t instanceof caph.math.Matrix4&&(t=t.get()),e instanceof caph.math.Matrix4&&(e=e.get()),new caph.math.Matrix4(h(t,e))}},set:function(t){return caph.isArray(t)&&16===t.length&&(this.matrix=t),this},get:function(){return this.matrix},clone:function(){return new caph.math.Matrix4(this.get().slice(0))},identity:function(){return this.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},multiply:function(t){return this.set(u(this.get(),t instanceof caph.math.Matrix4?t.get():t))},multiplyMatrix:function(t){return this.set(h(this.get(),t instanceof caph.math.Matrix4?t.get():t))},translate:function(e,i,n){return this.set(t(e,i,n))},transpose:function(){for(var t=[],e=4,i=0;this.matrix.length>i;i++)t.push(this.matrix[i%e*e+Math.floor(i/e)]);return this.set(t)},scale:function(t,i,n){return this.set(e(t,i,n))},rotateXYZ:function(t,e,n){return this.set(i(t,e,n))},rotateX:function(t){return this.set(n(t))},rotateY:function(t){return this.set(s(t))},rotateZ:function(t){return this.set(r(t))},rotateAxis:function(t,e,i,n){return this.set(o(t,e,i,n))},skewXY:function(t,e){return this.set(a(t,e))}})}(this),function(){"use strict";function t(t){var e=caph.dom._style.get(t,"transform")||caph.dom._style.get(t,"-webkit-transform"),n=i.exec(e);return n&&17===n.length?new caph.math.Matrix4(n.slice(1).map(function(t){return 1*t})):null}function e(t){return 1*caph.dom._style.get(t,"opacity")}var i=/matrix3d\s*\(\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*,\s*([\d\.\+\-e]+)\s*\)/;caph.namespace("caph.animation.util",{getCurrentMatrix:function(e){return e?e._caphCurrentMatrix||t(e)||new caph.math.Matrix4:new caph.math.Matrix4},getCurrentOpacity:function(t){return t?t._caphCurrentOpacity||e(t):1},setCurrentMatrix:function(t,e){t&&e&&(t._caphCurrentMatrix=e)},setCurrentOpacity:function(t,e){t&&!caph.isBlank(e)&&(t._caphCurrentOpacity=e)},initCurrentMatrix:function(t){t&&(t._caphCurrentMatrix=null)},initCurrentOpacity:function(t){t&&(t._caphCurrentOpacity=null)}})}(this),function(){"use strict";function t(t,e,i,n){return["cubic-bezier("+t+","+e+","+i+","+n+")",function(t){var i=1-t,s=3*i,r=t*t,o=r*t,a=s*t*i,h=s*r;return a*e+h*n+o}]}var e=/cubic-bezier\s*\(\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*\)/;caph.namespace("caph.animation.ease",{linear:["linear",function(t){return t}],cubicBezier:t,ease:t(.25,.1,.25,1),easeOut:t(0,0,.58,1),easeInOut:t(.42,0,.58,1),easeIn:t(.42,0,1,1),sineIn:t(.47,0,.745,.715),sineOut:t(.39,.575,.565,1),sineInOut:t(.445,.05,.55,.95),quadIn:t(.55,.085,.68,.53),quadOut:t(.25,.46,.45,.94),quadInOut:t(.455,.03,.515,.955),cubicIn:t(.55,.055,.675,.19),cubicOut:t(.215,.61,.355,1),cubicInOut:t(.645,.045,.355,1),quartIn:t(.895,.03,.685,.22),quartOut:t(.165,.84,.44,1),quartInOut:t(.77,0,.175,1),quintIn:t(.755,.05,.855,.06),quintOut:t(.23,1,.32,1),quintInOut:t(.86,0,.07,1),expoIn:t(.95,.05,.795,.035),expoOut:t(.19,1,.22,1),expoInOut:t(1,0,0,1),circIn:t(.6,.04,.98,.335),circOut:t(.075,.82,.165,1),circInOut:t(.785,.135,.15,.86),backIn:t(.6,-.28,.735,.045),backOut:t(.175,.885,.32,1.275),backInOut:t(.68,-.55,.265,1.55),add:function(t,e){return this[t]=[null,e],this},match:function(t){return this[t]||this[caph.toCamelCase(t)]},normalize:function(t){var i;if(caph.isString(t)){if(i=e.exec(t.toLowerCase()))return this.cubicBezier(i[1],i[2],i[3],i[4]);if(i=this.match(t))return i}else{if(caph.isFunction(t))return[null,t];if(caph.isArray(t)&&2===t.length&&caph.isFunction(t[1]))return t}return this.linear}}),caph.animation.ease.add("bounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),caph.animation.ease.add("bounceIn",function(t){return 1-caph.animation.ease.bounceOut[1](1-t)}),caph.animation.ease.add("bounceInOut",function(t){return.5>t?.5*caph.animation.ease.bounceIn[1](2*t):.5*caph.animation.ease.bounceOut[1](2*t-1)+.5});var i=2*Math.PI,n=.3/i*Math.asin(1);
caph.animation.ease.add("elasticIn",function(t){return 0===t||1===t?t:-(Math.pow(2,10*(t-=1))*Math.sin((t-n)*i/.3))}),caph.animation.ease.add("elasticOut",function(t){return 0===t||1===t?t:Math.pow(2,-10*t)*Math.sin((t-n)*i/.3)+1}),caph.animation.ease.add("elasticInOut",function(t){return 1>(t*=2)?-.5*Math.pow(2,10*(t-=1))*Math.sin((t-n)*i/.3):.5*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*i/.3)+1})}(this),function(){"use strict";caph.namespace("caph.animation.transition",{bypass:function(){var t=new caph.math.Matrix4;return function(){return t}},moveCubicBezier:function(t,e,i,n,s,r,o,a,h){return function(u){var c=1-u,l=3*c,p=u*u,d=l*c,f=l*u;return caph.math.Matrix4.translate((d*t+f*n+p*o)*u,(d*e+f*s+p*a)*u,(d*i+f*r+p*h)*u)}},move:function(t,e,i){return function(n){return caph.math.Matrix4.translate(t*n,e*n,i*n)}},scale:function(t,e,i){return function(n){return caph.math.Matrix4.scale(1+(t-1)*n,1+(e-1)*n,1+(i-1)*n)}},skewXY:function(t,e){return function(i){return caph.math.Matrix4.skewXY(t*i,e*i)}},rotateXYZ:function(t,e,i){return function(n){return caph.math.Matrix4.rotateXYZ(t*n,e*n,i*n)}},rotateX:function(t){return function(e){return caph.math.Matrix4.rotateX(t*e)}},rotateY:function(t){return function(e){return caph.math.Matrix4.rotateY(t*e)}},rotateZ:function(t){return function(e){return caph.math.Matrix4.rotateZ(t*e)}},rotateAxis:function(t,e,i,n){return function(s){return caph.math.Matrix4.rotateAxis(t,e,i,n*s)}},opacity:function(t,e){return function(i){return t+(e-t)*i}},flicker:function(t,e){return function(i){return 1>i&&i>0?t+(e-t)*Math.random():1}},fadeInOutIn:function(t,e){return function(i){var n,s;return.5>i?(n=e,s=t):(i-=.5,n=t,s=e),n+2*(s-n)*i}},fadeOutInOut:function(t,e){return function(i){var n,s;return.5>i?(n=t,s=e):(i-=.5,n=e,s=t),n+2*(s-n)*i}}})}(this),function(){"use strict";var t={transition:caph.animation.transition.bypass(),ease:caph.animation.ease.linear,opacity:null,delay:0,duration:.1,callback:null,asyncCallback:!1,multiply:!0,useTransform:!1};$class({$namespace:"caph.animation.Timeline",$constructor:function(t){this.initialMatrix=new caph.math.Matrix4,this.initialOpacity=null,this.currentMatrix=this.initialMatrix,this.currentOpacity=this.initialOpacity,this.timeline=[],this.currentTimeline=null,this.timelineIndex=[],this.setSeekInterval(caph.isBlank(t)?500:t),this.setStartTime(0),this.totalDuration=0},setSeekInterval:function(t){return this.seekInterval=t,this},getSeekInterval:function(){return this.seekInterval},add:function(e){var i,n=this.timeline.length;return e=caph.mixin(t,e),e.ease=caph.animation.ease.normalize(e.ease),e._startTime=this.totalDuration,e._endTime=e._startTime+e.duration+e.delay,caph.isBlank(i=e.opacity)||(caph.isNumber(i)?this.currentOpacity=i:caph.isFunction(i)&&(this.currentOpacity=i(1))),this.timeline.push(e),this._calculateTimeline(n),this._createTimelineIndex(e._startTime,e._endTime,n),this.totalDuration=e._endTime,this.currentMatrix=e._finalMatrix,this},seek:function(t){var e=this._getTimelineByTime(t-this.getStartTime()),i=!1;if(this.currentTimeline!==e&&(this._onAnimationEnd(this.currentTimeline),this.currentTimeline=e,i=!0),e){var n=e._progress,s=e.ease[1](n),r={progress:n,_change:i};if(1===n?this._onAnimationEnd(e):e.finish&&(e.finish=!1),caph.isFunction(e.transition)){var o=e.transition(s);r.matrix=e.multiply?caph.math.Matrix4.multiply(e._initialMatrix,o):o}return r.opacity=e.opacity,r}return null},getTotalDuration:function(){return this.totalDuration},setStartTime:function(t){return this.startTime=t,this},getStartTime:function(){return this.startTime},clear:function(){return this.timeline=[],this.currentTimeline=null,this.timelineIndex=[],this},_createTimelineIndex:function(t,e,i){for(var n=this._getIndexOfTimelineIndexByTime(t),s=this._getIndexOfTimelineIndexByTime(e);s>=n;n++)caph.isArray(this.timelineIndex[n])?this.timelineIndex[n].push(i):this.timelineIndex[n]=[i];return this},_getIndexOfTimelineIndexByTime:function(t){return Math.floor(t/this.getSeekInterval())},_calculateTimeline:function(t){var e=this.timeline[t];if(t>0){var i=this.timeline[t-1];e._initialMatrix=i._finalMatrix,e._initialOpacity=i._finalOpacity}else e._initialMatrix=this.initialMatrix,e._initialOpacity=this.initialOpacity;return e._finalMatrix=caph.isFunction(e.transition)?e.multiply?caph.math.Matrix4.multiply(e._initialMatrix,e.transition(1)):e.transition(1):e._initialMatrix,e._finalOpacity=caph.isFunction(e.opacity)?e.opacity(1):caph.isNumber(e.opacity)?e.opacity:e._initialOpacity,this},_getTimelineByTime:function(t){if(t>=0&&this.totalDuration>=t){var e=this.timelineIndex[this._getIndexOfTimelineIndexByTime(t)];if(e)for(var i=0,n=e.length;n>i;i++){var s=this.timeline[e[i]];if(t>=s._startTime&&s._endTime>=t)return s._progress=s.duration?(t-s._startTime-s.delay)/s.duration:1,s._progress=s._progress>1?1:0>s._progress?0:s._progress,s}}return null},_onAnimationEnd:function(t){t&&caph.isFunction(t.callback)&&!t.finish&&(t.finish=!0,t.asyncCallback?setTimeout(function(t){return function(){t()}}(t.callback),0):t.callback())}})}(this),function(t){"use strict";function e(t,e){var i=t.id;if(caph.isBlank(i)&&(t.id=i="_caph_timeline_"+t.tagName+"_"+Date.now()+"_"+1e3*Math.random()),caph.isArray(e)||(e=[e]),this.timelines[i])this.timelines[i]=this.timelines[i].concat(e);else{var n=caph.animation.util.getCurrentMatrix(t),s=caph.animation.util.getCurrentOpacity(t);this.matrixMap[i]={element:t,initialMatrix:n,initialOpacity:s,startMatrix:n,startOpacity:s,nextMatrix:n,nextOpacity:s},this.timelines[i]=e}}t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame,$class({$namespace:"caph.animation.Player",$constructor:function(){this.timelines={},this.matrixMap={},this.playing=!1,this.totalDuration=0,this.direction=caph.animation.Player.FORWARD,this.speed=1,this.repeat=1,this._currentRepeat=1,this._onfinish=null},$statics:{FORWARD:0,REVERSE:1,INFINITE:-1},add:function(t,i){var n=this;return t instanceof caph.dom.Element?t.each(function(t,s){e.call(n,s,i)}):e.call(n,t,i),this},setSpeed:function(t){return this.speed=t,this},setRepeat:function(t){return this.repeat=t,this._currentRepeat=t,this},onfinish:function(t){return caph.isFunction(t)&&(this._onfinish=t),this},isPlaying:function(){return this.playing},play:function(t){return this.playing||(this.playing=!0,this.startTime=performance.now(),this.direction=t||caph.animation.Player.FORWARD,this.pauseTime=null,this._currentRepeat=this.repeat,this._startAnimation()),this},stop:function(){return this.playing&&(this.playing=!1,this.pauseTime=performance.now()-(this.startTime||0),this.pauseDirection=this.direction,this._applyAnimation(this.pauseTime)),this},seek:function(t){return this.stop(),this.direction=caph.animation.Player.FORWARD,this._calculateTotalDuration(),this._applyAnimation(this.totalDuration*(t>1?1:0>t?0:t)),this},resume:function(){return this.playing||(this.playing=!0,this.startTime=performance.now()-(this.pauseTime||0),this.direction=this.pauseDirection||caph.animation.Player.FORWARD,this._startAnimation()),this},clear:function(){return this.seek(0),this._initElement(),this.timelines={},this.matrixMap={},this.totalDuration=0,this},_applyAnimation:function(t){var e=!1;this.direction===caph.animation.Player.REVERSE&&(t=this.totalDuration-t);for(var i in this.timelines){var n=this.matrixMap[i],s=this._seekAnimationById(i,t,n.startOpacity);s&&(s.matrix&&this._setTransformMatrix(n.element,n.nextMatrix=caph.math.Matrix4.multiply(n.startMatrix,s.matrix)),s.change?n.startOpacity=n.nextOpacity:caph.isBlank(s.opacity)||this._setOpacity(n.element,n.nextOpacity=s.opacity),t===this.totalDuration&&(this._setCurrentAnimation(n.element,n.nextMatrix,n.nextOpacity),n.startOpacity=n.nextOpacity),s.playing&&(e=!0))}return e},_setTransformMatrix:function(t,e){var i=this._getTransformMatrix(e.get());caph.dom._style.set(t,"transform",i),caph.dom._style.set(t,"-webkit-transform",i)},_getTransformMatrix:function(t){var e=[];return t.forEach(function(t){e.push(1e-6>Math.abs(t)?0:t)}),"matrix3d("+e.join(", ")+")"},_setOpacity:function(t,e){caph.dom._style.set(t,"opacity",e)},_setCurrentAnimation:function(t,e,i){caph.animation.util.setCurrentMatrix(t,e),caph.animation.util.setCurrentOpacity(t,i)},_seekAnimationById:function(t,e,i){var n,s=this.timelines[t],r=!1,o=!1;if(s)for(var a=new caph.math.Matrix4,h=null,u=0,c=s.length;c>u;u++){var l=s[u].getTotalDuration();l>e?(n=s[u].seek(e),this.direction===caph.animation.Player.FORWARD?r=!0:this.direction===caph.animation.Player.REVERSE&&e>0&&(r=!0)):n=s[u].seek(l),n&&(o=n._change,n.matrix&&a.multiply(n.matrix),caph.isBlank(n.opacity)||(caph.isNull(h)&&(h=1),caph.isNumber(n.opacity)?h*=caph.animation.transition.opacity(i,n.opacity)(n.progress):caph.isFunction(n.opacity)&&(h=n.opacity(n.progress))))}return{matrix:a,opacity:h,playing:r,change:o}},_startAnimation:function(){this._calculateTotalDuration(),t.requestAnimationFrame(this._step.bind(this))},_calculateTotalDuration:function(){for(var t in this.timelines)for(var e=this.timelines[t],i=0,n=e.length;n>i;i++){var s=e[i].getTotalDuration();s>this.totalDuration&&(this.totalDuration=s)}},_step:function(){if(this.playing){var e=(performance.now()-this.startTime)*this.speed;this._applyAnimation(e)?t.requestAnimationFrame(this._step.bind(this)):(this._calculateTotalDuration(),e>this.totalDuration&&this._applyAnimation(this.totalDuration),this.pauseTime=null,this.repeat===caph.animation.Player.INFINITE||--this._currentRepeat>0?(this.startTime=performance.now(),this._startAnimation()):(this.playing=!1,this._currentRepeat=this.repeat,this._onfinish&&this._onfinish()))}},_initElement:function(){for(var t in this.matrixMap)if(this.matrixMap.hasOwnProperty(t)){var e=this.matrixMap[t],i=e.element,n=e.initialMatrix,s=e.initialOpacity;this._setTransformMatrix(i,n),this._setOpacity(i,s),this._setCurrentAnimation(i,n,s)}}})}(this),function(){"use strict";$class({$namespace:"caph.animation.Transform",$constructor:function(t){this.element=t,this.multiply=!0,this._initVariables(),this._initAnimation()},setEase:function(t){return caph.isBlank(t)||(this._ease=t),this},setOpacity:function(t){return caph.isBlank(t)||(this._opacity=t),this},setDuration:function(t){return caph.isBlank(t)||(this._duration=.1>t?.1:t),this},setMultiply:function(t){return this._addToTimeline(),this.multiply=t,this},rotate:function(t,e,i,n,s,r){return this._addAnimation(caph.animation.transition.rotateXYZ(t,e,i),n,s,r)},rotateX:function(t,e,i,n){return this._addAnimation(caph.animation.transition.rotateX(t),e,i,n)},rotateY:function(t,e,i,n){return this._addAnimation(caph.animation.transition.rotateY(t),e,i,n)},rotateZ:function(t,e,i,n){return this._addAnimation(caph.animation.transition.rotateZ(t),e,i,n)},rotateAxis:function(t,e,i,n,s,r,o){return this._addAnimation(caph.animation.transition.rotateAxis(t,e,i,n),s,r,o)},move:function(t,e,i,n,s,r){return this._addAnimation(caph.animation.transition.move(t,e,i),n,s,r)},scale:function(t,e,i,n,s,r){return this._addAnimation(caph.animation.transition.scale(t,e,i),n,s,r)},skewXY:function(t,e,i,n,s){return this._addAnimation(caph.animation.transition.skewXY(t,e),i,n,s)},opacity:function(t,e,i){var n=new caph.math.Matrix4;return this._addAnimation(function(){return n},e,i,t)},delay:function(t){return caph.isBlank(t)||(this._addToTimeline(),this._delay+=t),this},callback:function(t,e){return caph.isFunction(t)&&(this._callback=t,this._asyncCallback=caph.isBlank(e)?!1:e,this._addToTimeline(!0)),this},set:function(){return this._addToTimeline(!0),this._initPlayer().seek(1),this},start:function(t){this._addToTimeline(!0);var e=this._initPlayer();return e.isPlaying()||e.setRepeat(caph.isBlank(t)?1:t).play(),this},stop:function(){return this._initPlayer().stop(),this},resume:function(){return this._initPlayer().resume(),this},clear:function(){return this._initPlayer().clear(),this._initVariables(),this._initAnimation(),this},_initVariables:function(){this.timeline=[new caph.animation.Timeline],this.player=null},_initAnimation:function(){this._transition=caph.animation.transition.bypass(),this._ease=caph.animation.ease.linear,this._opacity=null,this._delay=0,this._duration=.1,this._callback=null,this._asyncCallback=!1,this._begin=!1},_addAnimation:function(t,e,i,n){return this._addToTimeline(),this._transition=t,this.setEase(i),this.setOpacity(n),this.setDuration(e),this._begin=!0,this},_addToTimeline:function(t){return(this._begin||t)&&(this.timeline[0].add({transition:this._transition,ease:this._ease,opacity:this._opacity,delay:this._delay,duration:this._duration,callback:this._callback,asyncCallback:this._asyncCallback,multiply:this.multiply}),this._initAnimation()),this},_initPlayer:function(){return this.player||(this.player=new caph.animation.Player,this.player.add(this.element,this.timeline)),this.player}})}(this),function(t){"use strict";function e(t){var e,i=new XMLHttpRequest;return"string"==typeof r.path?(e=r.path+t.split(".").join("/")+".js",i.open("GET",e,!1),i.onerror=function(){console.error(i.statusText)},i.send(null),""!==i.response?i.response:void 0):void 0}function i(t,e){for(var i=t.split("."),s=0,r=i.length;r>s&&void 0!==e[i[s]];s++){if(s===i.length-1)return n[t]=e[i[s]],n[t];e=e[i[s]]}return void 0}var n={},s={},r={};s=function(t,o){var a,h,u,c;if("string"!=typeof t)return void 0;if(n[t])return n[t];if(o=o||s._baseNamespace,a=i(t,o),void 0===a){if(r.path&&(h=e(t),void 0!==h))return u=document.getElementsByTagName("head")[0],c=document.createElement("script"),c.setAttribute("type","text/javascript"),c.innerHTML=h,u.appendChild(c),a=i(t,o);throw Error("ModuleNotFoundError:The "+t+" cannnot be found in Caph namespace")}return a},s._baseNamespace=t.caph,s.config=function(t){t&&(r.path=t.path||"/")},caph.namespace("caph",{require:s})}(this),function(){"use strict";caph.namespace("caph.pattern",{singleton:function(t,e){var i={};return e=e||"getInstance",i[e]=function(){return void 0===this._singleton&&(this._singleton=new t),this._singleton},i}})}(),function(){"use strict";$class({$namespace:"caph.pattern.PubSub",$constructor:function(){this.listeners=[]},on:function(t,e){var i;return this.listeners[t]||(this.listeners[t]=[]),i=this.listeners[t].indexOf(e),-1===i&&(i=this.listeners[t].push(e)-1),{fire:function(e){this.listeners[t][i]&&this.listeners[t][i](e)}.bind(this)}},off:function(t,e){var i;this.listeners[t]&&(i=this.listeners[t].indexOf(e),-1!==i&&this.listeners[t].splice(i,1))},fire:function(t,e){if(this.listeners[t])for(var i in this.listeners[t])this.listeners[t][i](e,t)}})}(this),function(t){"use strict";var e=caph.require("pattern.PubSub"),i=$class({$extends:e,$constructor:function(){this.$super(),this.isRunning=!1,this.lastTimeStamp=null,this.fps=null},$statics:{Topic:{UPDATE:"looper.update"}},on:function(t){return this.$super(i.Topic.UPDATE,t)},off:function(t){return this.$super(i.Topic.UPDATE,t)},_run:function(){if(this.isRunning===!1){var e=this;this.lastTimeStamp=t.performance.now(),function i(n){e._tick(n),t.requestAnimationFrame(i)}(this.lastTimeStamp),this.isRunning=!0}},_tick:function(t){var e=t-this.lastTimeStamp;this.fire(i.Topic.UPDATE,e),this.lastTimeStamp=t}});caph.namespace("caph.util",{Looper:{getInstance:function(){return void 0===this._looper&&(this._looper=new i,this._looper._run()),this._looper}}})}(this),function(){"use strict";var t=$class({$namespace:"caph.collection.Map",$constructor:function(){this._mapKeyValue=new WeakMap,this._mapValueKey=new WeakMap},set:function(t,e){if(!t||!e)throw Error("null or undefined cannot be a key or a value.");if("object"!=typeof t)throw Error("key should be an object.");return this._mapKeyValue.set(t,e),this._mapValueKey.set(e,t),e},get:function(t){if(!t)throw Error("null or undefined cannot be a key.");if("object"!=typeof t)throw Error("key should be an object.");return this._mapKeyValue.get(t)},getKeyByValue:function(t){return this._mapValueKey.get(t)},"delete":function(t){var e;if("object"!=typeof t)throw Error("key should be an object.");e=this._mapKeyValue.get(t),this._mapKeyValue.delete(t),this._mapValueKey.delete(e)}});t.prototype._shared={id:1}}(this),function(){"use strict";var t=$class({$namespace:"caph.collection.TreeNode",$constructor:function(){this._parent=null,this._children=[]},destroy:function(){var t;if(null!==this._parent){var e=this._parent._children.indexOf(this);e>=0&&this._parent._children.splice(e,1)}for(;t=this._children.pop();)t.destroy();this._parent=null,this._children=[]},addChild:function(e,i){var n,s;if(!(e instanceof t||caph.isArray(e)))throw Error("the given node, "+e+", is invalid");s=[].concat(e);for(var r=0,o=s.length;o>r;r++){if(n=s[r],n._parent&&n._parent===this._parent)return this;null!==n._parent&&n._parent.removeChild(n),this._children.push(n),n._parent=this,i&&i.callback&&i.callback(n)}return this},_insertBefore:function(e,i,n){var s,r=this._children.indexOf(i),o=[].concat(e);if(caph.isBlank(i)&&(this.addChild(e),r=0,o=[]),0>r)throw Error("The second argument is not a child of "+this+" node.");for(var a=0,h=o.length;h>a;a++)s=o[a],s instanceof t&&(null!==s._parent&&s._parent.removeChild(s),r=this._children.indexOf(i),this._children.splice(r,0,s),s._parent=this,n&&n.callback&&n.callback(s,i));return this},_nextSibling:function(){var t,e,i=null;return null!==this._parent&&(t=this._parent._children,e=t.indexOf(this),e!==t.length-1&&(i=t[e+1])),i},addTo:function(e){if(!(e instanceof t||caph.isArray(e)))throw Error("the given node, "+e+", is invalid");return e.addChild(this),this},removeChild:function(e,i){var n,s;if(!(e instanceof t||caph.isArray(e)))throw Error("the given node, "+e+", is invalid");s=[].concat(e);for(var r=0,o=s.length;o>r;r++)if(n=s[r],i&&i.destroy===!0)n.destroy();else{var a=this._children.indexOf(n);a>=0&&(this._children.splice(a,1),n._parent=null,i&&i.callback&&i.callback(n))}return this},removeFromParent:function(){return null!==this._parent&&this._parent.removeChild(this,{destroy:!1}),this},getParent:function(){return this._parent},getChildren:function(){return this._children},getSiblings:function(){var t=[];if(null!==this._parent)for(var e=0;this._parent._children.length>e;e++)this._parent._children[e]!==this&&t.push(this._parent._children[e]);return t},getRoot:function(){var t,e=this;do t=e.getParent(),e=t?t:e;while(t);return e},hasChild:function(){return 0!==this._children.length}})}(this),function(){"use strict";$class({$namespace:"caph.storage.LocalStorage",$constructor:function(){this._prefix=null},remove:function(t){localStorage.removeItem(this._buildItemKey(t))},clearAll:function(){localStorage.clear()},get:function(t){var e=localStorage.getItem(this._buildItemKey(t));return e?e:!1},set:function(t,e){localStorage.setItem(this._buildItemKey(t),e)},getPrefix:function(){return this._prefix},setPrefix:function(t){this._prefix=t},_buildItemKey:function(t){return void 0===this._prefix||null===this._prefix?t:this._prefix+"."+t}})}(this),function(){"use strict";var t=null,e=["ko","en","bg","hr","cs","da","nl","fi","fr","de","el","hu","it","no","pl","pt","ro","ru","sr","sk","es","sv","tr","hi","et","lv","lt","ar","fa","th","he","id","vi","ur","af","zu","xh","yo","ig","ha","sw","am","ta","lt","lv","sl","sq","uk","kk","mk","ms","cy","gd","es_US","en_GB","fr_US","pt_US","zh-CN","zh-HK","zh-TW"],i="./nls/";$class({$namespace:"caph.base.resource.Language",$constructor:function(){if(t)throw Error(this._errorMessage("SINGLE_INSTANCE"));t=this},$statics:{getInstance:function(){return null===t&&(t=new caph.base.resource.Language),t}},getSupportLanguageCodeSet:function(){var t=this._supportLanguageCodeSet;return caph.isArray(t)&&0===t.length&&(t=void 0),t},setCurrentLanguageCode:function(t){if(!this._contains(e,t))throw Error(this._errorMessage("NOT_ISO_CODE"));if(!this._contains(this._supportLanguageCodeSet,t))throw Error(this._errorMessage("NOT_SET_SUPPORT"));this._currentLanguageCode=t,this._removeLanguageMessage()},getCurrentLanguageCode:function(){return this._currentLanguageCode},isUseLanguage:function(){return this.getCurrentLanguageCode()?!0:!1},setLanguage:function(t,e){this._setSupportLanguageCodeSet(t),this.setCurrentLanguageCode(e),this._removeLanguageMessage()},getMessage:function(){if(!this.isUseLanguage)return{};if(!this._supportLanguageCodeSet)throw Error(this._errorMessage("BLANK_SET_SUPPORT"));if(!this._currentLanguageCode)throw Error(this._errorMessage("BLANK_THIS_LANGUAGE"));if(!this._languageMessage){var t=i+this.getCurrentLanguageCode()+".json",e=this._getXHR(t);if(null===e)throw Error(this._errorMessage("NOT_READ_NLS"));this._languageMessage=JSON.parse(e)}return this._languageMessage},_setSupportLanguageCodeSet:function(t){if(!caph.isArray(t))throw Error(this._errorMessage("MUST_ARRAY"));if(!this._contains(e,t))throw Error(this._errorMessage("NOT_ISO_CODE"));this._supportLanguageCodeSet=t,this._removeLanguageMessage("SUPPORT_SET")},_removeLanguageMessage:function(t){"SUPPORT_SET"===t&&(this._currentLanguageCode=void 0),this._languageMessage=void 0},_getXHR:function(t){var e=new XMLHttpRequest;if(t+="?t="+(new Date).getTime(),e.open("GET",t,!1),e.send(null),404===e.status)throw Error(this._errorMessage("NOT_READ_NLS"));if(4===e.readyState){if(e.responseText.length>0)return e.responseText;throw Error(this._errorMessage("NOT_READ_NLS"))}throw Error(this._errorMessage("NOT_READ_NLS"))},_contains:function(t,e){if(caph.isBlank(t)||caph.isBlank(e))return!1;if(!caph.isArray(e))return t.indexOf(e)>-1;for(var i=0;e.length>i;i++)if(-1===t.indexOf(e[i]))return!1;return!0},_errorMessage:function(t){switch(t){case"SINGLE_INSTANCE":return'IllegalStateError: The "caph.base.resource.Language" must exist only one instance. Use "caph.base.resource.Language.getInstance()" instead of "new caph.base.resource.Language()".';case"NOT_ISO_CODE":return"IllegalArgumentError: Must value is ISO_CODE.";case"NOT_SET_SUPPORT":return"IllegalArgumentError: Must value is _setSupportLanguageCodeSet.";case"MUST_ARRAY":return"IllegalArgumentError: Must type of argument is Array.";case"NOT_READ_NLS":return"Can't read language resource file.";case"BLANK_SET_SUPPORT":return"Blank SET_SUPPORT";case"BLANK_THIS_LANGUAGE":return"Blank THIS_LANGUAGE"}}})}(this),function(){"use strict";var t={PRE_RENDER:0,RENDER:1,POST_RENDER:2};Object.freeze(t),caph.namespace("caph.module.renderer._Constant",t)}(),function(){"use strict";var t,e=caph.require("collection.Map");$class({$namespace:"caph.module.renderer._VDomLookUpTable",$constructor:function(){return void 0!==t?t:(this._map=new e,t=this,void 0)},getDom:function(t){return this._map.get(t)},getVDom:function(t){for(var e;void 0===e&&void 0!==t&&null!==t&&"HTML"!==t.tagName;)e=this._map.getKeyByValue(t),t=t.parentNode;return e},_set:function(t,e){return this._map.set(t,e)},_delete:function(t){return this._map.delete(t)},$statics:{getInstance:function(){return void 0===t&&(t=new caph.module.renderer._VDomLookUpTable),t}}})}(this),function(t){"use strict";var e=caph.require("module.renderer._Constant"),i=i||{},n=20,s=-1,r={NONE:0,PRERENDER:1,RENDER:2,POSTRENDER:4},o={FRAME:!1},a=$class({$constructor:function(){i.mountedVDomList=[],i.preRenderTaskQueue=[],i.renderTaskQueue=[],i.postRenderTaskQueue=[],i.dirtyVDomList=[],i.currentTickTask=null,i.lastTimeStamp=null,i.frameRequestedReasonBits=r.NONE,i.currentRequestedFrameID=s,i.rendererTick=a.prototype.tick.bind(this)},tick:function(t){var e,a;o.FRAME&&(a=i.currentRequestedFrameID),i.currentRequestedFrameID=s,i.frameRequestedReasonBits=r.NONE,null===i.lastTimeStamp&&(i.lastTimeStamp=t),e=t-i.lastTimeStamp,e>=n&&(e=n),o.FRAME&&console.debug("*\nstart  :",a,i.currentRequestedFrameID),this._preRender(e),this._render(e),this._postRender(e),o.FRAME&&console.debug("end    :",a,i.currentRequestedFrameID),i.lastTimeStamp=i.frameRequestedReasonBits===r.NONE?null:t},_requestUpcomingFrameUpdate:function(e){void 0===this._isTerminated&&i.frameRequestedReasonBits===r.NONE&&(i.currentRequestedFrameID=t.requestAnimationFrame(i.rendererTick),o.FRAME&&console.debug("request:",i.currentRequestedFrameID)),i.frameRequestedReasonBits|=e},_cancelUpcomingFrameUpdate:function(){i.currentRequestedFrameID!==s&&(t.cancelAnimationFrame(i.currentRequestedFrameID),i.currentRequestedFrameID=s)},_updateDirtyObject:function(){var e,n;for(n=this._getUpdateNeededVDomList();e=n.shift();)e.update();i.frameRequestedReasonBits&r.RENDER&&(i.frameRequestedReasonBits^=r.RENDER,i.frameRequestedReasonBits===r.NONE&&(o.FRAME&&console.debug("cancel :",i.currentRequestedFrameID),t.cancelAnimationFrame(i.currentRequestedFrameID),i.currentRequestedFrameID=s))},_preRender:function(t){var e,n;if(i.currentTickTask=this._preRender,i.preRenderTaskQueue.length)for(n=i.preRenderTaskQueue.splice(0);e=n.shift();)e.thisArg?e.callback.call(e.thisArg,t):e.callback(t);i.currentTickTask=null},_render:function(t){var e;for(i.currentTickTask=this._render;e=i.renderTaskQueue.shift();)e.thisArg?e.callback.call(e.thisArg,t):e.callback(t);this._updateDirtyObject(),i.currentTickTask=null},_postRender:function(t){var e,n;if(i.currentTickTask=this._postRender,i.postRenderTaskQueue.length){for(n=i.postRenderTaskQueue.splice(0);e=n.shift();)e.thisArg?e.callback.call(e.thisArg,t):e.callback(t);this._updateDirtyObject()}i.currentTickTask=null},_addUpdateNeededVDom:function(t){i.currentTickTask!==this._render&&-1===i.dirtyVDomList.indexOf(t)&&(i.dirtyVDomList.push(t),this._requestUpcomingFrameUpdate(r.RENDER))},_addRenderQueue:function(t,n,s){switch(t){case e.PRE_RENDER:this._renderTaskCallback(i.preRenderTaskQueue,r.PRERENDER,n,s);break;case e.RENDER:this._renderTaskCallback(i.renderTaskQueue,r.RENDER,n,s);break;case e.POST_RENDER:this._renderTaskCallback(i.postRenderTaskQueue,r.POSTRENDER,n,s);break;default:}},_renderTaskCallback:function(t,e,i,n){for(var s=t.length,r=!1,o=0;s>o;o++)if(i===t[o].callback&&t[o].thisArg&&t[o].thisArg===n){r=!0;break}if(r===!1){var a={callback:i,thisArg:n};t.push(a),this._requestUpcomingFrameUpdate(e)}},_terminate:function(){var t;this._isTerminated=!0,this._cancelUpcomingFrameUpdate();for(var e=0,n=i.mountedVDomList.length;n>e;e++)t=i.mountedVDomList[e].vdom,t.destroy();i.mountedVDomList=void 0,i.preRenderTaskQueue=void 0,i.renderTaskQueue=void 0,i.postRenderTaskQueue=void 0,i.dirtyVDomList=void 0,i.frameRequestedReasonBits=void 0,i.currentRequestedFrameID=void 0,i.rendererTick=void 0},_getUpdateNeededVDomList:function(){return i.dirtyVDomList},_mount:function(t,n){var s,r;return t instanceof caph.module.renderer.VDom&&("string"==typeof n?s=document.getElementById(n):"function"==typeof n?s=n():n instanceof HTMLElement&&(s=n),r={vdom:t,mount:s||document.body},i.mountedVDomList.push(r),this._addRenderQueue(e.RENDER,this._callbackUpdateMountedVDomList,this)),this},_callbackUpdateMountedVDomList:function(){for(var t,e,n=0,s=i.mountedVDomList.length;s>n;n++)t=i.mountedVDomList[n].vdom,e=i.mountedVDomList[n].mount,t&&void 0===t._isMounted&&(t.update(),t._mount(e))},_unmount:function(t){var e=null;if(t instanceof caph.module.renderer.VDom&&t._isMounted&&t._isMounted())for(var n=0,s=i.mountedVDomList.length;s>n;n++)if(i.mountedVDomList[n].vdom===t)return e=i.mountedVDomList[n],i.mountedVDomList.splice(n,1),t._unmount(e.mount),this},_getMountedVDomList:function(){return i.mountedVDomList.slice(0)}});caph.namespace("caph.module.renderer.VDomRenderer",caph.pattern.singleton(a))}(this),function(t){"use strict";function e(t,e){switch(e){default:(-1!==["width","height","lineHeight","top","right","bottom","left"].indexOf(e)||-1!==e.search("padding")||-1!==e.search("border")||-1!==e.search("margin"))&&"number"==typeof t[e]&&(t[e]+="px")}return t[e]}function i(t,e){switch(e){case"innerHTML":"string"==typeof t[e]&&(t[e]=t[e].replace(/(<(iframe|script).*?>.*?<\/(iframe|script)>)|(<link.*?>)/g,function(){return""}));break;default:}return t[e]}function n(){}function s(e){var i,r,o,a;if(("object"!=typeof this||this===t)&&(a=this),void 0===a)if(this instanceof Array){for(o=[],i=0,r=this.length;r>i;i++)o[i]=s.call(this[i],e);a=o}else if(this instanceof Object){if(void 0===e&&(e=new WeakMap),o=e.get(this),null===o||void 0===o){o=new n,e.set(this,o);for(i in this)this.hasOwnProperty(i)&&(o[i]=null===this[i]?this[i]:s.call(this[i],e));o.__proto__=this.__proto__}a=o}return a}var r=caph.require("collection.TreeNode"),o=caph.require("module.renderer._VDomLookUpTable"),a=caph.require("module.renderer.VDomRenderer"),h=caph.require("module.renderer._Constant"),u=caph.require("pattern.PubSub"),c={DOM_NOT_CREATED:0,DOM_CREATED:1,DOM_BEING_RENDERED:2},l={TREE:"tree",CLASS:"class",STYLE:"style",ATTRIBUTE:"attribute"},p={TREE_UPDATED:"vdom.tree.update",TREE_INSERT_BEFORE:"insertBefore",TREE_REMOVE:"remove",TREE_ADD:"add"},d=o.getInstance(),f=a.getInstance();Object.freeze(c),Object.freeze(l),Object.freeze(p);var _=$class({$namespace:"caph.module.renderer.VDom",$extends:r,$constructor:function(t){this.$super(),this._reset(this._handlingDeprecated(t)),this._bindingWithDom()},_reset:function(t){return t=t||{},this._tag=t.tagName||"div",this._classList=[],this._removedClassList=[],this._domProperty={},this._domProperty.style={},this._dirtyMark={},this._publisher=new u,this._addTreeUpdateListener(m.bind(this)),this._resetRenderStatus(),this._parseOption(t),this},_handlingDeprecated:function(t){var e,i,n,s;return t=t||{},e=t.dom||t,i=t.class,n=t.tag,s=t.children,e instanceof HTMLElement||(i&&(e.className=i,e.class&&delete e.class),n&&(e.tagName=n,e.tag&&delete e.tag),s&&(e.children=s)),e},_bindingWithDom:function(){var t=this,e=t._tag,i=["input","textarea"],n=["value","value"],s=i.indexOf(e.toLowerCase()),r=null;s>=0&&this.requestPostRender(function(){r=d.getDom(t),r&&r instanceof HTMLElement&&t._syncAttribute(r,n[s])})},_syncAttribute:function(t,e){var i=this,n={};t.addEventListener("change",function(s){s.stopPropagation(),n[e]=t[e],i.setProperty(n)})},_addTreeUpdateListener:function(t){return this._publisher.on(p.TREE_UPDATED,t),this},_removeTreeUpdateListener:function(t){return this._publisher.off(p.TREE_UPDATED,t),this},_parseOption:function(t){var e,i,n,s;if(n=t,s=t.className,i=t.children,n instanceof HTMLElement?(d._set(this,n),this._setRenderState(c.DOM_CREATED)):(n.tagName&&delete n.tagName,n.className&&delete n.className,this.setProperty(n)),s&&this.addClass(s),i)for(var r=0,o=i.length;o>r;r++)e=new _(i[r]),this.addChild(e);return this},_resetRenderStatus:function(){return this._setRenderState(c.DOM_NOT_CREATED),this._setDirty(l.CLASS,!0),this._setDirty(l.STYLE,!0),this._setDirty(l.ATTRIBUTE,!0),this._setDirty(l.TREE,!0),this},setProperty:function(t){var e,i=this._getClassList(),n=arguments[1];for(e in t)if("style"===e)this.setStyle(t.style,n);else if("className"===e){for(;i.length;)this.removeClass(i[0]);this.addClass(t[e])}else n&&"function"==typeof n.attrFilter&&n.attrFilter(t,e),void 0!==t[e]&&(this._domProperty[e]=t[e]),this._setDirty(l.ATTRIBUTE,!0);return this},setStyle:function(t){var e,i=arguments[1];for(e in t)i&&"function"==typeof i.styleFilter&&i.styleFilter(t,e),void 0!==t[e]&&(this._domProperty.style[e]=t[e]);return this._setDirty(l.STYLE,!0),this},getProperty:function(t){if(t&&"string"==typeof t){if(this._domProperty[t]&&"value"!==t)return this._domProperty[t];var e=d.getDom(this);return e?e[t]:void 0}},getStyle:function(e){var i=this._domProperty.style;if(e&&"string"==typeof e){if(i[e])return i[e];var n=d.getDom(this);return n?t.getComputedStyle(n,null).getPropertyValue(e):void 0}},addClass:function(t){var e;if(!t||"string"!=typeof t)throw Error("the given classname, "+t+", is invalid");e=t.trim().replace(/ +/g," ").split(" ");for(var i=0,n=e.length;n>i;i++)0>this._classList.indexOf(e[i])&&this._classList.push(e[i]);return this._setDirty(l.CLASS,!0),this},removeClass:function(t){var e,i;if(!t||"string"!=typeof t)throw Error("the given classname, "+t+", is invalid");e=t.trim().replace(/ +/g," ").split(" ");for(var n=0,s=e.length;s>n;n++)i=this._classList.indexOf(e[n]),i>=0&&(this._removedClassList.push(this._classList[i]),this._classList.splice(i,1),this._setDirty(l.CLASS,!0));
return this},hasClass:function(t){var e=t.trim().replace(/ +/g," ").split(" ");if(0>=e.length)return!1;for(var i=0,n=e.length;n>i;i++)if(0>this._classList.indexOf(e[i]))return!1;return!0},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t),this},addChild:function(t){return this.$super(t,{callback:function(t){this._publisher.fire(p.TREE_UPDATED,{status:p.TREE_ADD,child:t})}.bind(this)})},_insertBefore:function(t,e){return this.$super(t,e,{callback:function(t,e){this._publisher.fire(p.TREE_UPDATED,{status:p.TREE_INSERT_BEFORE,child:t,baseChild:e})}.bind(this)})},removeChild:function(t,e){for(var i,n=[].concat(t),s=0,r=n.length;r>s;s++)i=n[s],this._renderState>=c.DOM_CREATED&&this.getChildren().indexOf(i)>=0&&d.getDom(this).removeChild(d.getDom(i));return this.$super(t,{callback:function(t){this._publisher.fire(p.TREE_UPDATED,{status:p.TREE_REMOVE,child:t}),e&&e.callback&&e.callback(t)}.bind(this)})},_clone:function(){var t;return t=s.call(this),t._resetRenderStatus(),t},destroy:function(){var t;this.$super(),this._renderState>=c.DOM_CREATED&&(t=d.getDom(this),this._isMounted&&this._isMounted()?this.unmount():t.parentNode&&t.parentNode.removeChild(t),d._delete(this)),this._reset()},update:function(){var t=d.getDom(this);if(void 0===t){t=document.createElement(this._tag),d._set(this,t),this._setRenderState(c.DOM_CREATED);for(var e=0,i=this._children.length;i>e;e++)this._children[e].update(),t.appendChild(d.getDom(this._children[e]))}return this._applyProperties(t,this),this._applyClasses(t,this),this},_preRender:function(){},_postRender:function(){},requestPreRender:function(t){return t?f._addRenderQueue(h.PRE_RENDER,t):this._preRender&&f._addRenderQueue(h.PRE_RENDER,this._preRender,this),this},requestPostRender:function(t){return t?f._addRenderQueue(h.POST_RENDER,t):this._postRender&&f._addRenderQueue(h.POST_RENDER,this._postRender,this),this},mount:function(t){var e=this;return this.requestPreRender(function(){a.getInstance()._mount(e,t)}),this},_mount:function(t){var e;t instanceof HTMLElement&&(e=d.getDom(this),e&&t.appendChild(e),this._isMounted=function(){return!0})},unmount:function(){var t=this;a.getInstance()._unmount(t)},_unmount:function(t){var e;return t instanceof HTMLElement&&(e=d.getDom(this),e&&t.removeChild(e),this._isMounted=void 0),this},_applyClasses:function(t,e){var i,n;if(this._getDirty(l.CLASS)){for(n in this._removedClassList)t.classList.remove(this._removedClassList[n]);this._removedClassList=[],i=e._getClassList();for(var s=0,r=i.length;r>s;s++)t.classList.add(i[s])}this._setDirty(l.CLASS,!1)},_applyProperties:function(t,e){var n,s,r;if(this._getDirty(l.STYLE)&&(this._patchObject(t,"style",e._domProperty.style),this._setDirty(l.STYLE,!1)),this._getDirty(l.ATTRIBUTE)){for(r in e._domProperty)e._domProperty.hasOwnProperty(r)&&(n=e._domProperty[r],s=typeof n,"function"===s?t[r]=n.bind(this):"string"===s||"number"===s||"boolean"===s?"role"===r||"title"===r?t.setAttribute(r,n):t[r]=i(e._domProperty,r):"style"!==r&&n instanceof Object&&this._patchObject(t,n,e._domProperty[r]));this._setDirty(l.ATTRIBUTE,!1)}},_patchObject:function(t,i,n){var s,r,o="style"===i||"dataset"===i?"":void 0;if("style"===i)for(s in n)n.hasOwnProperty(s)&&(r=e(n,s),t[i][s]=void 0===r?o:r);else if("dataset"===i)for(s in n)n.hasOwnProperty(s)&&(r=n[s],t[i][s]=void 0===r?o:r)},_setRenderState:function(t){this._renderState=t},_setDirty:function(t,e,i){var n;this._dirtyMark[t]={state:e},e&&this._renderState>=c.DOM_CREATED&&(n=i&&i.node||this,f._addUpdateNeededVDom(n))},_getDirty:function(t){return this._dirtyMark[t].state},_getClassList:function(){return this._classList}}),m=function(t){var e,i,n,s=t.child,r=t.baseChild;if(this._renderState>=c.DOM_CREATED)switch(i=d.getDom(s),e=d.getDom(this),void 0===i&&(s.update(),i=d.getDom(s)),t.status){case p.TREE_ADD:e.appendChild(i);break;case p.TREE_INSERT_BEFORE:n=d.getDom(r),void 0===n&&(r.update(),n=d.getDom(r)),e.insertBefore(i,n);break;case p.TREE_REMOVE:break;default:}}}(this),function(){"use strict";var t=caph.require("module.renderer.VDom"),e=caph.require("math.Vector3"),i=caph.require("math.Vector4"),n=$class({$namespace:"caph.module.renderer.View",$extends:t,$constructor:function(t){var e={};t&&(t.dom&&(e.dom=t.dom),t.class&&(e.class=t.class),t.tag&&(e.tag=t.tag),t.children&&(e.children=t.children)),this.$super(e),this._position=[null,null,null],this._rotation=[null,null,null],this._scale=[null,null],this._skew=[null,null],this._positionOrigin=[null,null],this._rotationOrigin=[null,null],this._offsetPosition=null,this.__initialize()},__initialize:function(){this._initializeStyle(),this._addTreeUpdateListener(function(t){t.child instanceof n&&t.child._invalidateOffset()}.bind(this))},_initializeStyle:function(){this.addClass("caph-view")},setProperty:function(t){return arguments[1]&&arguments[1].verbose===!1?this.$super.apply(this,arguments):this.$super(t,s)},setStyle:function(t){return arguments[1]&&arguments[1].verbose===!1?this.$super.apply(this,arguments):this.$super(t,s)},size:function(t,e){if(arguments.length){var i,n,s={};return n=t instanceof Array?[t[0],t[1]]:[t,e],i=n.every(function(t,e,i){var n=!1;return"number"==typeof t?(i[e]=t+"px",n=!0):"string"==typeof t&&-1===t.indexOf("%")?n=!0:void 0===t?n=!0:null===t&&(i[e]="",n=!0),n}),i&&(void 0!==n[0]&&(s.width=n[0]),void 0!==n[1]&&(s.height=n[1]),this.setStyle(s,{verbose:!1})),this}var r,o;return r=(r=this.getStyle("width"))?parseInt(r.split("px")[0],10):null,o=(o=this.getStyle("height"))?parseInt(o.split("px")[0],10):null,[r,o]},position:function(){return this._setter.call(this._position,arguments,this)?(null!==this._offsetPosition&&(this._invalidateOffset(),this._invalidateDescendantOffset()),this):[this._position[0],this._position[1],this._position[2]]},translate:function(t,e,i){var n,s,r;return n=caph.isNumber(t)?this._position[0]+t:this._position[0],s=caph.isNumber(e)?this._position[1]+e:this._position[1],r=caph.isNumber(i)?this._position[2]+i:this._position[2],this.position(n,s,r),this},rotate:function(){return this._setter.call(this._rotation,arguments,this)?this:[this._rotation[0],this._rotation[1],this._rotation[2]]},scale:function(){return this._setter.call(this._scale,arguments,this)?this:[this._scale[0],this._scale[1]]},skew:function(){return this._setter.call(this._skew,arguments,this)?this:[this._skew[0],this._skew[1]]},opacity:function(t){return arguments.length?(this.setStyle({opacity:t},{verbose:!1}),this):Number(this.getStyle("opacity"))},visibility:function(t){return arguments.length?(t===!0?this.setStyle({visibility:"visible"},{verbose:!1}):t===!1&&this.setStyle({visibility:"hidden"},{verbose:!1}),this):"visible"===this.getStyle("visibility")?!0:!1},x:function(t){return arguments.length?(this.position(t),this):this._position[0]},y:function(t){return arguments.length?(this.position(void 0,t),this):this._position[1]},z:function(t){return arguments.length?(this.position(void 0,void 0,t),this):this._position[2]},rotateX:function(t){return arguments.length?(this.rotate(t),this):this._rotation[0]},rotateY:function(t){return arguments.length?(this.rotate(void 0,t),this):this._rotation[1]},rotateZ:function(t){return arguments.length?(this.rotate(void 0,void 0,t),this):this._rotation[2]},positionOrigin:function(){return this._setter.call(this._positionOrigin,arguments,this)?this:[this._positionOrigin[0],this._positionOrigin[1]]},rotationOrigin:function(){return this._setter.call(this._rotationOrigin,arguments,this)?this:[this._rotationOrigin[0],this._rotationOrigin[1]]},offset:function(t,e,i){var n,s;return arguments.length?(n=caph.isArray(t)?t:[t,e,i],s=this.getParent()._getOffsetPosition(),this._position[0]=caph.isNumber(n[0])?n[0]-s[0]:this._position[0],this._position[1]=caph.isNumber(n[1])?n[1]-s[1]:this._position[1],this._position[2]=caph.isNumber(n[2])?n[2]-s[2]:this._position[2],this):this._getOffsetPosition()},_invalidateOffset:function(){this._offsetPosition=null},_invalidateDescendantOffset:function(){for(var t=this.getChildren(),e=0,i=t.length;i>e;e++)t[e]._invalidateOffset(),t[e]._invalidateDescendantOffset()},_getOffsetPosition:function(){var t,e;return(null===this._offsetPosition||void 0===this._offsetPosition)&&(e=this.getParent(),t=e?e._getOffsetPosition():[0,0,0],this._offsetPosition=[],this._offsetPosition[0]=this._position[0]+t[0],this._offsetPosition[1]=this._position[1]+t[1],this._offsetPosition[2]=this._position[2]+t[2]),[this._offsetPosition[0],this._offsetPosition[1],this._offsetPosition[2]]},_setTransformFromMatrix:function(t){function e(t){return 1e-6>Math.abs(t)?0:t}function i(t){return Math.min(Math.max(t,-1),1)}function n(t){return Math.round(100*t)/100}if(!t instanceof caph.math.Matrix4)throw Error("argument should be an caph.math.Matrix4");var s=t.clone(),r=s.get();this._position[0]=r[12],this._position[1]=r[13],this._position[2]=r[14];var o=new caph.math.Vector3;this._scale[0]=n(o.set(r[0],r[1],r[2]).length()),this._scale[1]=n(o.set(r[4],r[5],r[6]).length());var a=1/(this._scale[0]||1),h=1/(this._scale[1]||1);r[0]*=a,r[1]*=a,r[2]*=a,r[4]*=h,r[5]*=h,r[6]*=h;var u=[];u[1]=Math.asin(i(r[8])),.99999>Math.abs(r[8])?(u[0]=e(Math.atan2(-r[9],r[10])),u[2]=e(Math.atan2(-r[4],r[0]))):(u[0]=Math.atan2(r[6],r[5]),u[2]=0),this._rotation[0]=n(180*u[0]/Math.PI),this._rotation[1]=n(180*u[1]/Math.PI),this._rotation[2]=n(180*u[2]/Math.PI)},_getMatrixFromTransform:function(){var t,e,i,n=new caph.math.Matrix4,s=n.matrix;t=this._rotation[0]*Math.PI/180||0,e=this._rotation[1]*Math.PI/180||0,i=this._rotation[2]*Math.PI/180||0;var r=Math.cos(t),o=Math.sin(t),a=Math.cos(e),h=Math.sin(e),u=Math.cos(i),c=Math.sin(i),l=r*u,p=r*c,d=o*u,f=o*c;return s[0]=a*u,s[4]=-a*c,s[8]=h,s[1]=p+d*h,s[5]=l-f*h,s[9]=-o*a,s[2]=f-l*h,s[6]=d+p*h,s[10]=r*a,s[0]*=this._scale[0]||1,s[4]*=this._scale[1]||1,s[1]*=this._scale[0]||1,s[5]*=this._scale[1]||1,s[2]*=this._scale[0]||1,s[6]*=this._scale[1]||1,s[3]*=this._scale[0]||1,s[7]*=this._scale[1]||1,s[12]=this._position[0]||0,s[13]=this._position[1]||0,s[14]=this._position[2]||0,s[15]=1,n},update:function(){return this._setTransform(),this.$super()},_getTransformOriginString:function(){var t="";return(null!==this._rotationOrigin[0]&&void 0!==this._rotationOrigin[0]||null!==this._rotationOrigin[1]&&null!==this._rotationOrigin[1])&&(t=100*this._rotationOrigin[0]+"% "+100*this._rotationOrigin[1]+"%"),t},_getTransformString:function(){var t="";return(null!==this._positionOrigin[0]&&void 0!==this._positionOrigin[0]||null!==this._positionOrigin[1]&&void 0!==this._positionOrigin[1])&&(t+="translate(-"+100*this._positionOrigin[0]+"%, -"+100*this._positionOrigin[1]+"%) "),t+=null===this._position[0]||void 0===this._position[0]?"":"translateX("+this._position[0]+"px) ",t+=null===this._position[1]||void 0===this._position[1]?"":"translateY("+this._position[1]+"px) ",t+=null===this._position[2]||void 0===this._position[2]?"":"translateZ("+this._position[2]+"px) ",t+=null===this._rotation[0]||void 0===this._rotation[0]?"":"rotateX("+this._rotation[0]+"deg) ",t+=null===this._rotation[1]||void 0===this._rotation[1]?"":"rotateY("+this._rotation[1]+"deg) ",t+=null===this._rotation[2]||void 0===this._rotation[2]?"":"rotateZ("+this._rotation[2]+"deg) ",t+=null===this._scale[0]||void 0===this._scale[0]?"":"scaleX("+this._scale[0]+") ",t+=null===this._scale[1]||void 0===this._scale[1]?"":"scaleY("+this._scale[1]+") ",t+=null===this._skew[0]||void 0===this._skew[0]?"":"skewX("+this._skew[0]+"deg) ",t+=null===this._skew[1]||void 0===this._skew[1]?"":"skewY("+this._skew[1]+"deg) "},_setTransform:function(){var t;this._isTransformValid===!1&&(t=this._getTransformOriginString(),""!==t&&this.setStyle({WebkitTransformOrigin:t},{verbose:!1}),this.setStyle({WebkitTransform:this._getTransformString()},{verbose:!1}),this._isTransformValid=!0)},_invalidTransform:function(){this._isTransformValid=!1,this.setStyle({WebkitTransform:"invalid"},{verbose:!1})},_matrix:function(t){return arguments.length?(this._setTransformFromMatrix(t),this._invalidTransform(),this):this._getMatrixFromTransform()},_setter:function(){var t=[];if(arguments[0].length){t=caph.isArray(arguments[0][0])?arguments[0][0]:arguments[0];for(var e=0,i=t.length;i>e;e++)(caph.isNumber(t[e])||caph.isNull(t[e]))&&(this[e]=t[e]);return arguments[1]._invalidTransform(),!0}return!1},_getAABB:function(){for(var t=this._getVertexes(),e=this.position(),i=this.size(),n=t[0].x,s=t[0].x,r=t[0].y,o=t[0].y,a=e[0]+i[0]/2,h=e[1]+i[1]/2,u=1,c=t.length;c>u;u++)n>t[u].x&&(n=t[u].x),t[u].x>s&&(s=t[u].x),r>t[u].y&&(r=t[u].y),t[u].y>o&&(o=t[u].y);return{topLeft:[n,r],bottomRight:[s,o],center:[a,h]}},_getVertexes:function(){for(var t=this._matrix().transpose(),n=this.size(),s=new e(n[0]/2,n[1]/2,0),r=[new i(-n[0]/2,-n[1]/2,0,1),new i(n[0]/2,-n[1]/2,0,1),new i(n[0]/2,n[1]/2,0,1),new i(-n[0]/2,n[1]/2,0,1)],o=[],a=0,h=r.length;h>a;a++)o.push(r[a].applyMatrix4(t).toVector3().add(s));return o}}),s={_guideMessage:{},_parse:function(t){var e=[].slice.call(arguments,1),i=0;return t.replace(/%s/g,function(){return e[i++]})},setGuide:function(){for(var t,e=arguments[0],i=1,n=arguments.length;n>i;i++)t=arguments[i],this._guideMessage[t]=this._parse(e,t)},attrFilter:function(t,e){this._guideMessage[e]&&(console.warn(""+this._guideMessage[e]),delete this._guideMessage[e])},styleFilter:function(t,e){this._guideMessage[e]&&(console.warn(""+this._guideMessage[e]),delete this._guideMessage[e])}},r="It is deprecated to set '%s' directly. Please use 'View.position(), translate(), size()' and so on, instead.";s.setGuide(r,"left","top","bottom","right"),s.setGuide(r,"webkitTransform","WebkitTransform"),s.setGuide("For more performance, using ClassList via add/remove/has/toggleClass, or else constructor's corresponding option is recommended.","className")}(this),function(){"use strict";var t=caph.require("module.renderer.VDomRenderer"),e=[];$class({$namespace:"caph.module.renderer.RenderEngine",$constructor:function(){return void 0!==e[0]?e[0]:(e[0]=this,this._renderer=null,this._isRunning=!1,this._option={},void 0)},run:function(t){return t=t||{},"complete"===document.readyState?this._run(t):document.addEventListener("DOMContentLoaded",function(){this._run(t)}.bind(this),!1),this},_terminate:function(t){this._renderer._terminate(t)},_create:function(){return this._renderer=t.getInstance(),this},_initialize:function(){return this},_run:function(t){this._isRunning===!1&&(caph.extend(this._option,t),this._create(),this._initialize(),this._isRunning=!0)}})}(this),function(t){"use strict";function e(t){var e,i,n,r,o,a=[],h={},u={};for(var c in t)if((e=s.exec(c))&&(i=e[1])){if(i=i.toLowerCase(),n="on"+i,r="on"+caph.capitalize(i),o="_on"+i,c!==n&&c!==r&&c!==o)throw Error('IllegalEventHandlerNameError: The event handler name must be "'+n+'" or "'+r+'" or "'+o+'".');if(c=c.toLowerCase(),h[c])throw Error('DuplicateEventHandlerNameError: The "'+c+'" event handler is duplicated.');h[c]=!0,u[i]||(u[i]=!0,a.push(i))}return a}function i(t,e,i){if(!e._isEventObserver)throw Error('IllegalArgumentError: The "observer" parameter must be an array of the objects or an object which mixins the "caph.module.mixins.event.Observer".');if(i instanceof caph.event.Message)t.sendTo(e,i);else{if(!caph.isObject(i))throw Error('IllegalArgumentError: The "message" parameter must be an instance of "caph.event.Message" or an object.');t.sendTo(e,new caph.event.Message(i))}}var n=null,s=/^_?on([\w]+)$/,r=caph.dom.event.DEFAULT_EVENT_TYPE;$class({$namespace:"caph.module.event.Manager",$constructor:function(){if(n)throw Error('IllegalStateError: The "caph.module.event.Manager" must exist only one instance. Use "caph.module.event.Manager.getInstance()" instead of "new caph.module.event.Manager()".');this._mediator=new caph.module.event.Mediator,this._eventHandleManager=new caph.dom.event.HandleManager;for(var e in r)r.hasOwnProperty(e)&&("resize"===e||r[e].bubble)&&(this._mediator.addSubject(new caph.module.event.Subject(e)),this._eventHandleManager.set(e,caph.dom.event.add(t,e,function(t){this._sendDOMEvent(caph.event.Normalizer.getInstance().toMessage(t))}.bind(this))));n=this},$statics:{getInstance:function(){return null===n&&(n=new caph.module.event.Manager),n}},addSubject:function(t){return this._mediator.addSubject(new caph.module.event.Subject(t)),this},addObserver:function(t){if(!t._isEventObserver)throw Error('IllegalArgumentError: The "observer" parameter must mixin the "caph.module.mixins.event.Observer".');for(var i=e(t),n=0,s=i.length;s>n;n++)this._mediator.addObserver(i[n],t);return this},removeObserver:function(t,e){if(!t._isEventObserver)throw Error('IllegalArgumentError: The "observer" parameter must mixin the "caph.module.mixins.event.Observer".');if(e){if(!caph.isArray(e))throw Error('IllegalArgumentError: The "types" parameter must be an array of string.');for(var i=0,n=e.length;n>i;i++)this._mediator.removeObserver(e[i],t)}else{var r,o;for(var a in t)(r=s.exec(a))&&(o=r[1])&&this._mediator.removeObserver(o.toLowerCase(),t)}return this},send:function(t){if(t instanceof caph.event.Message)this._mediator.send(t);else{if(!caph.isObject(t))throw Error('IllegalArgumentError: The "message" parameter must be an instance of "caph.event.Message" or an object.');this._mediator.send(new caph.event.Message(t))}return this},sendTo:function(t,e){if(caph.isArray(t))for(var n=0,s=t.length;s>n;n++)i(this._mediator,t[n],e);else i(this._mediator,t,e);return this},_sendDOMEvent:function(t){this._mediator._sendDOMEvent(t)}})}(this),function(){"use strict";$class({$namespace:"caph.module.event.Mediator",$constructor:function(t){if(this._subjects={},t){if(!caph.isArray(t))throw Error('IllegalArgumentError: The "subjects" parameter must be an array of instance of "caph.module.event.Subject".');for(var e=0,i=t.length;i>e;e++)this.addSubject(t[e])}},addSubject:function(t){if(!(t instanceof caph.module.event.Subject))throw Error('IllegalArgumentError: The "subject" parameter must be an instance of "caph.module.event.Subject".');var e=t.getType();return this._subjects[e]||(this._subjects[e]=t),this},addObserver:function(t,e){var i=this._subjects[t];return i?i.add(e):(this.addSubject(new caph.module.event.Subject(t)),this._subjects[t].add(e)),this},removeObserver:function(t,e){var i=this._subjects[t];return i&&i.remove(e),this},send:function(t){var e=this._subjects[t.getType()];return e&&e.notify(t),this},sendTo:function(t,e){var i=this._subjects[e.getType()];return i&&i.notifyTo(t,e),this},_sendDOMEvent:function(t){var e=this._subjects[t.getType()];e&&e._notifyDOMEvent(t)}})}(this),function(){"use strict";function t(t){return t.isPropagationStopped()?!1:this._isEventObserver?this._handleMessage(t):!0}function e(i){if(t.call(this,i)){var n=this.getParent();n&&e.call(n,i)}}function i(e){if(t.call(this,e)){var s=this.getChildren();if(s&&caph.isArray(s)&&s.length>0)for(var r=0,o=s.length;o>r;r++)s[r]&&i.call(s[r],n.getInstance().createFrom(e))}}var n=caph.require("event.Normalizer");caph.namespace("caph.module.mixins.event",{Observer:{getParent:function(){return null},getChildren:function(){return null},_eventObserverId:null,_isEventObserver:!0,_receiveMessage:function(t){t.isBubbles()?e.call(this,t):i.call(this,t)},_handleMessage:function(t){var e=t.getType(),i=this["on"+e]||this["on"+caph.capitalize(e)],n=this["_on"+e];return caph.isFunction(i)&&i.call(this,t),caph.isFunction(n)&&n.call(this,t),!t.isPropagationStopped()}}})}(this),function(){"use strict";var t=caph.require("event.Normalizer"),e=caph.require("module.renderer.VDomRenderer"),i=/[A-Z]/;$class({$namespace:"caph.module.event.Subject",$constructor:function(t){if(!t||!caph.isString(t))throw Error('IllegalArgumentError: The "caph.module.event.Subject" requires a string value representing subject type as the constructor parameter.');if(i.test(t))throw Error('IllegalArgumentError: The "type" parameter must be a lowercase string.');this._type=t,this._observers=[],this._observerIndexMap={}},getType:function(){return this._type},add:function(t){var e=t._eventObserverId;return e||(e=t._eventObserverId="observer_"+(new Date).getTime()+"_"+Math.floor(1e5*Math.random())),this._observerIndexMap[e]?void 0:(this._observerIndexMap[e]={index:this._observers.length},this._observers.push(t),this)},remove:function(t){var e,i=t._eventObserverId;return i&&(e=this._observerIndexMap[i])&&(this._observers[e.index]=null,this._observerIndexMap[i]=null),this},notify:function(t){return this._observers.forEach(function(e){e&&e._handleMessage(t)}),this},notifyTo:function(t,e){var i,n=t._eventObserverId;return n&&(i=this._observerIndexMap[n])&&this._observers[i.index]._receiveMessage(e),this},_notifyDOMEvent:function(i){"resize"===i.type?e.getInstance()._getMountedVDomList().forEach(function(e){var n=e.vdom;n._isEventObserver&&n._receiveMessage(t.getInstance().createFrom(i))}):this._observers.forEach(function(t){return t&&t._receiveMessage(i),i.isPropagationStopped()?!1:void 0})}})}(this),function(){"use strict";caph.namespace("caph.module.mixins.focus",{Focusable:{_isTypeOfFocusable:!0,_isFocusable:!1,_isFocusContainer:!1,_isActive:!0,_sendDomEvent:!0,_level:0,_defaultNextFocus:void 0,_useKeyEvent:!0,_useMouseEvent:!0,_visibility:!0,NONE:null,DEFAULT:"default",focusable:function(t){return arguments.length?(this._isFocusable=t,this):this._isFocusable},focus:function(){caph.require("module.focus.Manager").getInstance().focus(this)},blur:function(){caph.require("module.focus.Manager").getInstance().blur(this)},focusContainer:function(t){return arguments.length?(this._isFocusContainer=t,this):this._isFocusContainer},active:function(t){return arguments.length?(this._isActive=t,this):this._isActive},domEvent:function(t){return arguments.length?(this._sendDomEvent=t,this):this._sendDomEvent},level:function(t){return arguments.length?(this._level=t,this):this._level},keyEvent:function(t){return arguments.length?(this._useKeyEvent=t,this):this._useKeyEvent},mouseEvent:function(t){return arguments.length?(this._useMouseEvent=t,this):this._useMouseEvent},visibility:function(t){return arguments.length?(this._visibility=t,this):this._visibility},_getDefaultNextFocus:function(t){if(void 0===t||t!==caph.module.focus.Manager.Buttons.UP&&t!==caph.module.focus.Manager.Buttons.DOWN&&t!==caph.module.focus.Manager.Buttons.LEFT&&t!==caph.module.focus.Manager.Buttons.RIGHT)throw Error("IllegalStateError: No correct button given.");return void 0===this._defaultNextFocus?void 0:this._defaultNextFocus[t]===caph.module.mixins.focus.Focusable.NONE?this:this._defaultNextFocus[t]},_setDefaultNextFocus:function(t,e){var i;if(void 0===t||t!==caph.module.focus.Manager.Buttons.UP&&t!==caph.module.focus.Manager.Buttons.DOWN&&t!==caph.module.focus.Manager.Buttons.LEFT&&t!==caph.module.focus.Manager.Buttons.RIGHT)throw Error("IllegalStateError: No correct button given.");void 0===this._defaultNextFocus&&(this._defaultNextFocus={}),i=e===caph.module.mixins.focus.Focusable.DEFAULT?void 0:e,this._defaultNextFocus[t]=i},defaultNextFocus:function(t,e){if(void 0===e){if(caph.isString(t))return this._getDefaultNextFocus(t);for(var i in t)t.hasOwnProperty(i)&&this._setDefaultNextFocus(i,t[i]);return this}return this._setDefaultNextFocus(t,e),this},_hasParentRootNode:function(){for(var t=caph.require("module.focus.Manager").getInstance().getRootNode(),e=this;e;){if(e===t)return!0;e=e.getParent()}return!1},_isFrozen:function(){for(var t=this;t;){if(t._isActive===!1)return!0;t=t.getParent()}return!1}}})}(this),function(){"use strict";var t=caph.require("math.Vector3");$class({$namespace:"caph.module.focus._Finder",$constructor:function(){this._componentAABB=new WeakMap,this._componentPriorities={LOW:1,MIDDLE:2,HIGH:3,INTERSECTION:4},this._distanceCalculationType={REGULAR:1,INTERSECTION:2},this._configurations={useHighPriority:!0,useMiddlePriority:!1,useLowPriority:!1,highPriorityAngle:45}},_getNextFocusableComponent:function(t,e,i){var n,s;return t.getParent()?t instanceof caph.module.renderer.View?(this._componentAABB=new WeakMap,n=this._getComponentsAndDistanceCalculationType(t,e,i),0===n.components.length?t:(s=this._getClosestComponent(t,i,n),s.focusable()?s:this._getClosestComponentInContainer(t,e,i,s))):t:t},_hasEnoughPriority:function(t,e,i){var n=!0;return this._configurations.useHighPriority&&(n=n&&this._isHighPriority(t,e,i)),this._configurations.useMiddlePriority&&(n=n&&this._isMiddlePriority(t,e,i)),this._configurations.useLowPriority&&(n=n&&this._isLowPriority(t,e,i)),n},_getComponentsAndDistanceCalculationType:function(t,e,i){var n,s;return n=this._getFilteredComponentsAndContainersByPriority(t,e,i,this._componentPriorities.INTERSECTION),s=this._distanceCalculationType.INTERSECTION,0!==n.length?this._combineComponentsAndDistanceCalculationType(n,s):(s=this._distanceCalculationType.REGULAR,this._configurations.useHighPriority&&(n=this._getFilteredComponentsAndContainersByPriority(t,e,i,this._componentPriorities.HIGH),0!==n.length)?this._combineComponentsAndDistanceCalculationType(n,s):this._configurations.useMiddlePriority&&(n=this._getFilteredComponentsAndContainersByPriority(t,e,i,this._componentPriorities.MIDDLE),0!==n.length)?this._combineComponentsAndDistanceCalculationType(n,s):this._configurations.useLowPriority&&(n=this._getFilteredComponentsAndContainersByPriority(t,e,i,this._componentPriorities.LOW),0!==n.length)?this._combineComponentsAndDistanceCalculationType(n,s):this._combineComponentsAndDistanceCalculationType(n,s))},_getFilteredComponentsAndContainersByPriority:function(t,e,i,n){var s,r=t.getSiblings(),o=this._getFilteredComponents(e,r),a=this._getFilteredContainers(e,r);switch(n){case this._componentPriorities.INTERSECTION:s=this._getIntersectionPriorityComponents(t,i,o);break;case this._componentPriorities.HIGH:s=this._getHighPriorityComponents(t,i,o).concat(this._getPriorityContainers(t,i,a));break;case this._componentPriorities.MIDDLE:s=this._getMiddlePriorityComponents(t,i,o);break;case this._componentPriorities.LOW:s=this._getLowPriorityComponents(t,i,o);break;default:throw Error("IllegalStateError: No correct component priority given.")}return 0!==s.length?s:(t=t.getParent(),null===t.getParent()?s:this._getFilteredComponentsAndContainersByPriority(t,e,i,n))},_getIntersectionPriorityComponents:function(t,e,i){for(var n=[],s=0,r=i.length;r>s;s++)this._isIntersectionPriority(t,e,i[s])&&n.push(i[s]);return n},_isIntersectionPriority:function(t,e,i){var n=this._getComponentAbsoluteAABB(t),s=this._getComponentAbsoluteAABB(i);return this._areEnoughIntersected(n,e,s)},_getPriorityContainers:function(t,e,i){for(var n=[],s=0,r=i.length;r>s;s++)this._isPriorityContainer(t,e,i[s])&&n.push(i[s]);return n},_isPriorityContainer:function(t,e,i){var n=this._getComponentAbsoluteAABB(t),s=this._getComponentAbsoluteAABB(i);return this._isOnTheSide(n,e,s)},_getHighPriorityComponents:function(t,e,i){for(var n=[],s=0,r=i.length;r>s;s++)this._isHighPriority(t,e,i[s])&&n.push(i[s]);return n},_isHighPriority:function(t,e,i){var n=this._getComponentAbsoluteAABB(t),s=this._getComponentAbsoluteAABB(i);return!this._areIntersected(n,s)&&(this._isOnTheSide(n,e,s)||this._isCorrectQuarter(n,e,s))},_getMiddlePriorityComponents:function(t,e,i){for(var n=[],s=0,r=i.length;r>s;s++)this._isMiddlePriority(t,e,i[s])&&n.push(i[s]);return n},_isMiddlePriority:function(t,e,i){var n=this._getComponentAbsoluteAABB(t),s=this._getComponentAbsoluteAABB(i),r=!this._areIntersected(n,s);if(e===caph.module.focus.Manager.Buttons.LEFT)return r&&s.center.x<=n.topLeft.x;if(e===caph.module.focus.Manager.Buttons.RIGHT)return r&&n.bottomRight.x<=s.center.x;if(e===caph.module.focus.Manager.Buttons.UP)return r&&s.center.y<=n.topLeft.y;if(e===caph.module.focus.Manager.Buttons.DOWN)return r&&n.bottomRight.y<=s.center.y;throw Error("IllegalStateError: No correct button given.")},_getLowPriorityComponents:function(t,e,i){for(var n=[],s=0,r=i.length;r>s;s++)this._isLowPriority(t,e,i[s])&&n.push(i[s]);return n},_isLowPriority:function(t,e,i){var n=this._getComponentAbsoluteAABB(t),s=this._getComponentAbsoluteAABB(i),r=!this._areIntersected(n,s);if(e===caph.module.focus.Manager.Buttons.LEFT)return r&&s.topLeft.x<n.topLeft.x;if(e===caph.module.focus.Manager.Buttons.RIGHT)return r&&n.bottomRight.x<s.bottomRight.x;if(e===caph.module.focus.Manager.Buttons.UP)return r&&s.topLeft.y<n.topLeft.y;if(e===caph.module.focus.Manager.Buttons.DOWN)return r&&n.bottomRight.y<s.bottomRight.y;throw Error("IllegalStateError: No correct button given.")},_isOnTheSide:function(t,e,i){var n,s,r,o,a,h,u,c=this._isCorrectSide(t,e,i);if(e===caph.module.focus.Manager.Buttons.LEFT||e===caph.module.focus.Manager.Buttons.RIGHT)s=Math.max(t.topLeft.y,i.topLeft.y),r=Math.min(t.bottomRight.y,i.bottomRight.y),h=Math.min(t.bottomRight.y-t.topLeft.y,i.bottomRight.y-i.topLeft.y),n=r-s>h/2;else{if(e!==caph.module.focus.Manager.Buttons.UP&&e!==caph.module.focus.Manager.Buttons.DOWN)throw Error("IllegalStateError: No correct button given.");a=Math.max(t.topLeft.x,i.topLeft.x),o=Math.min(t.bottomRight.x,i.bottomRight.x),u=Math.min(t.bottomRight.x-t.topLeft.x,i.bottomRight.x-i.topLeft.x),n=o-a>u/2}return c&&n},_isCorrectQuarter:function(t,e,i){var n,s,r,o,a,h=this._isCorrectSide(t,e,i);if(e===caph.module.focus.Manager.Buttons.LEFT||e===caph.module.focus.Manager.Buttons.RIGHT){if(t.center.x===i.center.x)return!1;n=Math.abs(t.center.y-i.center.y),r=Math.abs(t.topLeft.y-t.bottomRight.y)/2,e===caph.module.focus.Manager.Buttons.LEFT?s=Math.abs(t.topLeft.x+r-i.center.x):e===caph.module.focus.Manager.Buttons.RIGHT&&(s=Math.abs(t.bottomRight.x-r-i.center.x)),a=n/s}else{if(e!==caph.module.focus.Manager.Buttons.UP&&e!==caph.module.focus.Manager.Buttons.DOWN)throw Error("IllegalStateError: No correct button given.");if(t.center.y===i.center.y)return!1;s=Math.abs(t.center.x-i.center.x),o=Math.abs(t.topLeft.x-t.bottomRight.x)/2,e===caph.module.focus.Manager.Buttons.UP?n=Math.abs(t.topLeft.y+o-i.center.y):e===caph.module.focus.Manager.Buttons.DOWN&&(n=Math.abs(t.bottomRight.y-o-i.center.y)),a=s/n}return h&&this._getAngle(a)<=this._configurations.highPriorityAngle},_getAngle:function(t){return 180*Math.atan(t)/Math.PI},_isCorrectSide:function(t,e,i){if(e===caph.module.focus.Manager.Buttons.LEFT)return t.topLeft.x>i.topLeft.x;if(e===caph.module.focus.Manager.Buttons.RIGHT)return t.bottomRight.x<i.bottomRight.x;if(e===caph.module.focus.Manager.Buttons.UP)return t.topLeft.y>i.topLeft.y;if(e===caph.module.focus.Manager.Buttons.DOWN)return t.bottomRight.y<i.bottomRight.y;throw Error("IllegalStateError: No correct button given.")},_getFilteredComponents:function(t,e){for(var i=[],n=0,s=e.length;s>n;n++)this._isFocusable(t,e[n])&&i.push(e[n]);return i},_getFilteredContainers:function(t,e){for(var i=[],n=0,s=e.length;s>n;n++)this._isNotFocusableContainer(e[n])&&this._hasFocusableChildren(t,e[n])&&i.push(e[n]);return i},_hasFocusableChildren:function(t,e){for(var i=e.getChildren(),n=0,s=i.length;s>n;n++)if(this._isFocusable(t,i[n])||this._isNotFocusableContainer(i[n])&&this._hasFocusableChildren(t,i[n]))return!0;return!1},_isFocusable:function(t,e){return e._isTypeOfFocusable&&e.keyEvent()&&e.visibility()&&e.focusable()&&e.active()&&(e.level()===t||-1===e.level())},_isNotFocusableContainer:function(t){return t._isTypeOfFocusable&&t.keyEvent()&&t.visibility()&&!t.focusable()&&t.active()},_getClosestComponent:function(t,e,i){var n,s,r,o=null,a=Number.MAX_VALUE,h=this._getComponentAbsoluteAABB(t);switch(i.distanceCalculationType){case this._distanceCalculationType.INTERSECTION:r=this._getIntersectionDistance;break;case this._distanceCalculationType.REGULAR:r=this._getRegularDistance;break;default:throw Error("IllegalStateError: No correct distance calculation type given.")}for(var u=0,c=i.components.length;c>u;u++)s=this._getComponentAbsoluteAABB(i.components[u]),a>(n=r(h,e,s))&&(a=n,o=i.components[u]);return o},_getClosestComponentInContainer:function(t,e,i,n){var s=this._getFilteredComponents(e,n.getChildren()),r=this._getFilteredContainers(e,n.getChildren()),o=this._combineComponentsAndDistanceCalculationType(s.concat(r),this._distanceCalculationType.REGULAR),a=this._getClosestComponent(t,i,o);
return a.focusable()?a:this._getClosestComponentInContainer(t,e,i,a)},_areEnoughIntersected:function(t,e,i){var n=this._getIntersectionX(t,i),s=this._getIntersectionY(t,i),r=n>0&&s>0,o=this._isCorrectSide(t,e,i);switch(e){case caph.module.focus.Manager.Buttons.LEFT:case caph.module.focus.Manager.Buttons.RIGHT:r=r&&n>s;break;case caph.module.focus.Manager.Buttons.UP:case caph.module.focus.Manager.Buttons.DOWN:r=r&&s>n;break;default:throw Error("IllegalStateError: No correct button given.")}return o&&r},_areIntersected:function(t,e){return this._getIntersectionX(t,e)>0&&this._getIntersectionY(t,e)>0},_getIntersectionX:function(t,e){return Math.min(t.bottomRight.x,e.bottomRight.x)-Math.max(t.topLeft.x,e.topLeft.x)},_getIntersectionY:function(t,e){return Math.min(t.bottomRight.y,e.bottomRight.y)-Math.max(t.topLeft.y,e.topLeft.y)},_getRegularDistance:function(e,i,n){var s,r,o,a;if(i===caph.module.focus.Manager.Buttons.LEFT||i===caph.module.focus.Manager.Buttons.RIGHT)r=e.center.y,a=n.center.y,i===caph.module.focus.Manager.Buttons.LEFT?(s=e.topLeft.x,o=n.bottomRight.x):i===caph.module.focus.Manager.Buttons.RIGHT&&(s=e.bottomRight.x,o=n.topLeft.x);else{if(i!==caph.module.focus.Manager.Buttons.UP&&i!==caph.module.focus.Manager.Buttons.DOWN)throw Error("IllegalStateError: No correct button given.");s=e.center.x,o=n.center.x,i===caph.module.focus.Manager.Buttons.UP?(r=e.topLeft.y,a=n.bottomRight.y):i===caph.module.focus.Manager.Buttons.DOWN&&(r=e.bottomRight.y,a=n.topLeft.y)}return new t(s,r,0).distance(new t(o,a,0))},_getIntersectionDistance:function(t,e,i){if(e===caph.module.focus.Manager.Buttons.LEFT)return t.topLeft.x-i.bottomRight.x;if(e===caph.module.focus.Manager.Buttons.RIGHT)return i.topLeft.x-t.bottomRight.x;if(e===caph.module.focus.Manager.Buttons.UP)return t.topLeft.y-i.bottomRight.y;if(e===caph.module.focus.Manager.Buttons.DOWN)return i.topLeft.y-t.bottomRight.y;throw Error("IllegalStateError: No correct button given.")},_getComponentAbsoluteAABB:function(e){var i,n,s,r=this._componentAABB.get(e),o=e.position();return void 0!==r?r:(i=e._getAABB(),r={topLeft:new t(i.topLeft[0],i.topLeft[1],0),bottomRight:new t(i.bottomRight[0],i.bottomRight[1],0),center:new t(i.center[0],i.center[1],0)},n=e.offset(),s=new t(n[0]-o[0],n[1]-o[1],n[2]-o[2]),r.topLeft.add(s),r.bottomRight.add(s),r.center.add(s),this._componentAABB.set(e,r),r)},_combineComponentsAndDistanceCalculationType:function(t,e){return{components:t,distanceCalculationType:e}},_setConfigurations:function(t){void 0===t&&(t={}),caph.isBoolean(t.useHighPriority)&&(this._configurations.useHighPriority=t.useHighPriority),caph.isBoolean(t.useMiddlePriority)&&(this._configurations.useMiddlePriority=t.useMiddlePriority),caph.isBoolean(t.useLowPriority)&&(this._configurations.useLowPriority=t.useLowPriority),caph.isNumber(t.highPriorityAngle)&&(this._configurations.highPriorityAngle=t.highPriorityAngle)}})}(this),function(){"use strict";var t=caph.require("module.event.Manager"),e=caph.require("event.Message"),i=caph.require("module.focus._Finder"),n=null,s=null,r=null,o=null,a=null,h=null,u=null,c=null,l=0,p=new WeakMap;$class({$namespace:"caph.module.focus.Manager",$mixins:[caph.module.mixins.event.Observer],$constructor:function(){if(n)throw Error('IllegalStateError: The "caph.module.focus.Manager" must exist only one instance. Use "caph.module.focus.Manager.getInstance()" instead of "new caph.module.focus.Manager()".');if(o=new i,s=t.getInstance(),!s)throw Error('IllegalStateError: The "caph.module.event.Manager" is not loaded.');s.addObserver(this),r=caph.module.renderer._VDomLookUpTable.getInstance(),n=this},$statics:{getInstance:function(){return null===n&&(n=new caph.module.focus.Manager),n},Buttons:{ENTER:"enter",UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"}},setRootNode:function(t){t instanceof caph.collection.TreeNode&&(a=t)},getRootNode:function(){return a},setFocusLevel:function(t){l!==t&&(l=t,this.reset())},getFocusLevel:function(){return l},getCurrentFocus:function(){return u},getLastFocus:function(){return h},reset:function(){this.focus(null),h=null},onkeydown:function(t){var i,n,r,p,d,f,_,m;if(t.stopPropagation(),null===u){if(null===h)return this._initializeFocus(a),void 0;if(h.keyEvent())return this.focus(h,"key"),void 0;u=h}else{if(i=new e(this._getEventMessageForVDom(t,{source:u})),s.sendTo(u,i),!u||i.isPropagationStopped()===!0)return;if(n=this._getButton(t),n===caph.module.focus.Manager.Buttons.LEFT||n===caph.module.focus.Manager.Buttons.RIGHT||n===caph.module.focus.Manager.Buttons.UP||n===caph.module.focus.Manager.Buttons.DOWN)r=u.defaultNextFocus(n),void 0===r&&(d=o._getNextFocusableComponent(u,l,n),p=this._getCachedFocus(d.getParent(),n),r=this._needGetCachedFocus(u,n,p)?p:d,this._needSetCachedFocus(u,n,d)&&this._setCachedFocus(n,u)),this.focus(r,"key"),c=n;else if(f=u.getChildren(),_=f.length,n===caph.module.focus.Manager.Buttons.ENTER&&u.focusContainer()===!0&&_>0)if(p=this._getCachedFocus(u,c),void 0!==p)this.focus(p,"key");else for(m=0;_>m&&!this._initializeFocus(f[m]);)m++}},onkeyup:function(t){var i;t.stopPropagation(),null!==u&&(i=new e(this._getEventMessageForVDom(t,{source:u})),s.sendTo(u,i))},onclick:function(t){this._sendMouseEvent(t,!0)},ondblclick:function(t){this._sendMouseEvent(t,!0)},onwheel:function(t){this._sendMouseEvent(t,!0)},onmousedown:function(t){this._sendMouseEvent(t,!0)},onmouseup:function(t){this._sendMouseEvent(t,!0)},onmousemove:function(t){this._sendMouseEvent(t,!0)},onmouseover:function(t){this._sendMouseEvent(t,!0)},onmouseout:function(t){this._sendMouseEvent(t,!1)},_sendMouseEvent:function(t,i){var n,r=this._getFocusableByDOM(t.source);t.stopPropagation(),i===!0&&r!==u&&(!r||r&&r.mouseEvent())&&this.focus(r,"mouse"),null!==r&&(n=new e(this._getEventMessageForVDom(t)),s.sendTo(r,n))},onfocus:function(t){t.stopPropagation()},onblur:function(t){t.stopPropagation()},focus:function(t,e){var i,n;return u===t?!1:null===t?(this.blur(u),u=t,!0):null===t||t.level()!==l&&-1!==t.level()||t._hasParentRootNode()!==!0||t._isFrozen()!==!1?!1:(this.blur(u),u=t,i=this._makeFocusCustomEvent(t,"focus",e),s.sendTo(t,i),t.domEvent()&&(n=r.getDom(t),n&&n.focus()),!0)},blur:function(t){var e,i;u===t&&(null!==u&&(e=this._makeFocusCustomEvent(u,"blur"),s.sendTo(u,e),t.domEvent()&&(i=r.getDom(u),i&&i.blur())),h=u,u=null)},setFocusFinderConfigurations:function(t,e){var i;void 0===e?o._setConfigurations(t):(i={},i[t]=e,o._setConfigurations(i))},_initializeFocus:function(t){var e,i;if(!t)return!1;if(!t instanceof caph.collection.TreeNode)return!1;if(t._isTypeOfFocusable&&t.active()===!1)return!1;if(t._isTypeOfFocusable&&t.visibility()&&t.keyEvent()&&t.focusable()&&(t.level()===l||-1===t.level()))return this.focus(t,"key"),!0;if(t.hasChild()===!1)return!1;i=t.getChildren();for(var n=0,s=i.length;s>n;n++)if(e=i[n],this._initializeFocus(e)===!0)return!0},_makeFocusCustomEvent:function(t,i,n){var s={type:i,bubbles:"true",source:t,detail:{}};return n&&(s.detail.method=n),new e(s)},_getFocusableByDOM:function(t){var e=r.getVDom(t);if(!e)return null;for(;!e._isTypeOfFocusable||!e.focusable()||e.level()!==l&&-1!==e.level()||e._hasParentRootNode()!==!0||e._isFrozen()!==!1;){if(null===e.getParent())return null;e=e.getParent()}return e},_getEventMessageForVDom:function(t,i){return i=i||{},t?new e({_event:t._event,type:i.type||t.type,source:i.source||r.getVDom(t.source),bubbles:i.bubbles||t.bubbles||!0,timeStamp:i.timeStamp||t.timeStamp,detail:i.detail||t.detail}):null},_getButton:function(t){return t.key().enter?caph.module.focus.Manager.Buttons.ENTER:t.key().left?caph.module.focus.Manager.Buttons.LEFT:t.key().right?caph.module.focus.Manager.Buttons.RIGHT:t.key().up?caph.module.focus.Manager.Buttons.UP:t.key().down?caph.module.focus.Manager.Buttons.DOWN:void 0},_getOppositeButton:function(t){if(t===caph.module.focus.Manager.Buttons.LEFT)return caph.module.focus.Manager.Buttons.RIGHT;if(t===caph.module.focus.Manager.Buttons.RIGHT)return caph.module.focus.Manager.Buttons.LEFT;if(t===caph.module.focus.Manager.Buttons.UP)return caph.module.focus.Manager.Buttons.DOWN;if(t===caph.module.focus.Manager.Buttons.DOWN)return caph.module.focus.Manager.Buttons.UP;throw Error("IllegalStateError: No correct button given.")},_needGetCachedFocus:function(t,e,i){return void 0===i?!1:t.getParent()===i.getParent()?!1:o._hasEnoughPriority(t,e,i)},_needSetCachedFocus:function(t,e,i){for(var n=i;n=n.getParent();)if(n===t.getParent())return!1;return!0},_getCachedFocus:function(t,e){var i,n;return i=p.get(t),void 0===i?void 0:(n=i[e],void 0===n?void 0:n.keyEvent()?n:void 0)},_setCachedFocus:function(t,e){var i=p.get(e.getParent());void 0!==i?i[this._getOppositeButton(t)]=e:(i={},i[this._getOppositeButton(t)]=e,p.set(e.getParent(),i))}})}(this),function(){"use strict";var t=caph.require("module.event.Manager");$class({$namespace:"caph.ui.base.Component",$extends:caph.module.renderer.View,$mixins:[caph.module.mixins.event.Observer,caph.module.mixins.focus.Focusable],$constructor:function(t){this.$super(t),t&&t.dom instanceof Object&&(t.dom=void 0),this._initialize(),this.setOption(t||{})},_initialize:function(){this._option={},this._accessibility={},this.addClass("caph-component"),t.getInstance().addObserver(this)},setOption:function(t){void 0===t&&(t={}),t.dom instanceof Object&&this.setProperty(t.dom),t.size instanceof Array&&this.size(t.size),t.position instanceof Array&&this.position(t.position[0],t.position[1],t.position[2]),"boolean"==typeof t.enabled?this.setEnable(t.enabled):"boolean"!=typeof this._option.enabled&&this.setEnable(!0),t.on&&this.on(t.on),t.accessibility&&(this._accessibility.role=t.accessibility.role||this._accessibility.role,this._accessibility.title=t.accessibility.title||this._accessibility.title,this.setARIA(this._accessibility))},on:function(e){for(var i in e)if(e.hasOwnProperty(i)){if(i!==i.toLowerCase())throw Error("The message handler type must be a lowercase string.");this["_on"+i]=e[i]}return t.getInstance().addObserver(this),this},off:function(e){if(caph.isArray(e)){for(var i=0,n=e.length;n>i;i++)this["_on"+e[i].toLowerCase()]=null;t.getInstance().removeObserver(this,e)}else this["_on"+e.toLowerCase()]=null,t.getInstance().removeObserver(this,[e])},innerHTML:function(t){return arguments.length&&this.setProperty({innerHTML:t}),this.getProperty("innerHTML")},setARIA:function(t){return"string"==typeof t?this._accessibility.title=t||this._accessibility.title:t instanceof Object&&(this._accessibility.role=t.role||this._accessibility.role,this._accessibility.title=t.title||this._accessibility.role),this.setProperty(this._accessibility),this},getARIA:function(){return this._accessibility},setEnable:function(e){this._option.enabled!==e&&(this._option.enabled=e,e===!0?t.getInstance().addObserver(this):t.getInstance().removeObserver(this,["click","mousedown","mouseup","keydown","keyup","dblclick"]))},isEnable:function(){return this._option.enabled},_postRender:function(){t.getInstance().sendTo(this,{type:"postrender"})},_clone:function(){var e=this.$super();return e._eventObserverId=null,t.getInstance().addObserver(e),e._children.length>0&&this._recursivelyRender(e._children),e},_recursivelyRender:function(e){for(var i=e.length,n=0;i>n;n++)e[n]._eventObserverId&&(e[n]._eventObserverId=null,t.getInstance().addObserver(e[n]),e[n].__initialize()),e[n]._children.length>0&&this._recursivelyRender(e[n]._children)}})}(this),function(){"use strict";var t=/^\d+%|\d+\.\d+%$/;caph.namespace("caph.ui.base.layout.util",{isPercent:function(e){return t.test(e)},getPxArray:function(t,e){var i=[].concat(t);return i[0]=this.getPxValue(t[0],e[0]),i[1]=this.getPxValue(t[1],e[1]),i},getPxValue:function(t,e){return this.isPercent(t)&&!isNaN(e)?.01*e*t.split("%")[0]:t},isExistSize:function(t){return caph.isArray(t)&&2===t.length?!isNaN(t[0])&&!isNaN(t[1]):!1}})}(this),function(){"use strict";var t=caph.require("ui.base.Component"),e=caph.require("collection.Map"),i=caph.require("module.event.Manager"),n=caph.require("ui.base.layout.util");$class({$namespace:"caph.ui.base.Layout",$extends:t,$constructor:function(t){this.$super(t),this._map=new e},addChild:function(t,e){if(caph.isBlank(e))return this.$super(t);if(!(t instanceof caph.module.renderer.View))throw Error("the 1st param should be an instance of caph.module.renderer.View.");this._beforeAddChild(t,e),this.$super(t),this._map.set(t,e);var i=this.size();return n.isExistSize(i)&&(this._setChildSizePosition(t,e,i),this._setChildSizePositionByLayout(t,e,i)),this},size:function(t,e){if(arguments.length>0){var n=this.$super(),s=caph.isArray(t)?t:[t,e];return(n[0]!==s[0]||n[1]!==s[1])&&(this.$super(t,e),caph.isEmpty(this.getChildren())||i.getInstance().sendTo(this,{type:"resize",bubbles:!1})),this}return this.$super()},onresize:function(t){t.stopPropagation();var e=this.size();if(n.isExistSize(e)){var i=this.getChildren();caph.isEmpty(i)||(i.forEach(function(t){var i=this._map.get(t);i&&this._setChildSizePosition(t,i,e)},this),this._setChildSizePositionByLayout(null,null,e))}},_setChildSizePosition:function(t,e,i){e.size&&t.size(n.getPxArray(e.size,i)),e.position&&t.position(n.getPxArray(e.position,i))},_beforeAddChild:function(){},_setChildSizePositionByLayout:function(){}})}(this),function(){"use strict";var t=caph.require("ui.base.Layout"),e=caph.require("ui.base.layout.util");$class({$namespace:"caph.ui.base.layout.Absolute",$extends:t,_beforeAddChild:function(t,e){this.$super(),this._checkOption(e)},_checkOption:function(t){t=t||{},t.size&&this._checkParameter(t.size),t.position&&this._checkParameter(t.position)},_checkParameter:function(t){if(!caph.isArray(t))throw Error("The arguments should be a array.");t.forEach(function(t){if(e.isPercent(t))throw Error("The arguments must be a PX absolute value in Absolue Layout.")},this)}})}(this),function(){"use strict";var t=caph.require("ui.base.Layout"),e={HALIGN:"center",VALIGN:"center",CENTER:"center",BOTTOM:"bottom",RIGHT:"right"};$class({$namespace:"caph.ui.base.layout.Float",$extends:t,addChild:function(t,e){return this.$super(t,e||{})},setOption:function(t){t=t||{},this.$super(t),this.hInterval=caph.isBlank(t.hInterval)?0:t.hInterval,this.vInterval=caph.isBlank(t.vInterval)?0:t.vInterval,this.hAlign=caph.isBlank(t.hAlign)?e.HALIGN:t.hAlign,this.vAlign=caph.isBlank(t.vAlign)?e.VALIGN:t.vAlign},_setChildSizePositionByLayout:function(t,e,i){this.$super(t,e,i),this._rowCountArray=[0],this._rowWidthArray=[0];var n=this.getChildren();caph.isEmpty(n)||(n.forEach(function(t){this._calculateRowCountAndWidth(t,i)},this),this._setChildPosition())},_calculateRowCountAndWidth:function(t,e,i){i||(i=t.size()[0]);var n=this._rowCountArray.length-1,s=this._rowWidthArray[n]+i+this.hInterval;s===e[0]?(this._rowCountArray[n]++,this._rowWidthArray[n]=s,this._rowCountArray[++n]=0,this._rowWidthArray[n]=this.hInterval):s>e[0]?(this._rowCountArray[++n]=1,this._rowWidthArray[n]=i+2*this.hInterval):(this._rowWidthArray[n]=s,this._rowCountArray[n]++)},_setChildPosition:function(){for(var t=0,i=this.vInterval,n=this.getChildren(),s=0;this._rowCountArray.length>s;s++){var r=this._rowCountArray[s],o=this._getMaxHeight(n,t,r+t),a=this.hInterval+this._getBlankWidth(s);n.forEach(function(n,s){if(s>=t&&r+t>s){var h=i,u=n.size();s>t&&(a+=this.hInterval),this.vAlign===e.CENTER?h+=(o-u[1])/2:this.vAlign===e.BOTTOM&&(h+=o-u[1]),n.position(a,h),a+=u[0],s===r+t-1&&(i+=o+this.vInterval)}},this),t+=r}},_getMaxHeight:function(t,e,i){var n=0;if(caph.isNumber(e)&&caph.isNumber(i)&&i>=e&&e>=0&&t.length>=i)for(var s=null,r=e;i>r;r++)s=t[r].size(),s[1]>n&&(n=s[1]);return n},_getBlankWidth:function(t){var i=0;return this.hAlign===e.RIGHT?i=this.size()[0]-this._rowWidthArray[t]:this.hAlign===e.CENTER&&(i=(this.size()[0]-this._rowWidthArray[t])/2),i}})}(this),function(){"use strict";var t=caph.require("ui.base.layout.Float"),e=caph.require("ui.base.layout.util"),i={HALIGN:"center",VALIGN:"center",CENTER:"center",BOTTOM:"bottom",RIGHT:"right",COLUMN_SUM:960,LARGE_SCREEN:1200,MIDDLE_SCREEN:992,SMALL_SCREEN:768,DEFAULT_COLS:{xs:960,sm:960,md:960,lg:960}};$class({$namespace:"caph.ui.base.layout.Fluid",$extends:t,addChild:function(t,e){return this.$super(t,e||{})},_calculateRowCountAndWidth:function(t,n){var s=this._map.get(t),r=caph.isBlank(s.cols)?i.DEFAULT_COLS:s.cols,o=caph.isBlank(s["max-width"])?null:s["max-width"],a=caph.isBlank(s["min-width"])?0:s["min-width"],h=this._getProportion(n[0],r),u=n[0]*h;if(a>u&&(u=a),o&&u>o&&(u=o),e.isPercent(s.size[1])){var c=e.getPxArray(s.size,n);t.size([u,c[1]])}else t.size([u,t.size()[1]]);this.$super(t,n,u)},_getProportion:function(t,e){var n=i.COLUMN_SUM;return t>=i.LARGE_SCREEN&&!isNaN(e.lg)?n=e.lg:t>=i.MIDDLE_SCREEN&&!isNaN(e.md)?n=e.md:t>=i.SMALL_SCREEN&&!isNaN(e.sm)?n=e.sm:isNaN(e.xs)||(n=e.xs),n/=i.COLUMN_SUM}})}(this),function(){"use strict";var t=caph.require("ui.base.Layout"),e={PARENT_TOP:"PARENT_TOP",PARENT_BOTTOM:"PARENT_BOTTOM",PARENT_LEFT:"PARENT_LEFT",PARENT_RIGHT:"PARENT_RIGHT",CENTER_IN_PARENT:"CENTER_IN_PARENT",CENTER_HORIZONTAL:"CENTER_HORIZONTAL",CENTER_VERTICAL:"CENTER_VERTICAL",TO_LEFT_OF:"TO_LEFT_OF",TO_RIGHT_OF:"TO_RIGHT_OF",ABOVE:"ABOVE",BELOW:"BELOW",TOP:"TOP",LEFT:"LEFT",BOTTOM:"BOTTOM",RIGHT:"RIGHT"},i={PARENT_LEFT:function(t){return[t.x-t.offset,t.y]},PARENT_TOP:function(t){return[t.x,t.y+t.offset]},PARENT_RIGHT:function(t){return[t.layoutSize[0]-t.childSize[0]+t.offset,t.y]},PARENT_BOTTOM:function(t){return[t.x,t.layoutSize[1]-t.childSize[1]-t.offset]},CENTER_IN_PARENT:function(t){return[(t.layoutSize[0]-t.childSize[0])/2+t.offset,(t.layoutSize[1]-t.childSize[1])/2+t.offset]},CENTER_HORIZONTAL:function(t){return[(t.layoutSize[0]-t.childSize[0])/2+t.offset,t.y]},CENTER_VERTICAL:function(t){return[t.x,(t.layoutSize[1]-t.childSize[1])/2+t.offset]},TO_LEFT_OF:function(t){return[t.referPosition[0]-t.childSize[0]-t.offset,t.y]},TO_RIGHT_OF:function(t){return[t.referPosition[0]+t.referSize[0]+t.offset,t.y]},ABOVE:function(t){return[t.x,t.referPosition[1]-t.childSize[1]-t.offset]},BELOW:function(t){return[t.x,t.referPosition[1]+t.referSize[1]+t.offset]},TOP:function(t){return[t.x,t.referPosition[1]+t.offset]},LEFT:function(t){return[t.referPosition[0]-t.offset,t.y]},BOTTOM:function(t){return[t.x,t.referPosition[1]+t.referSize[1]-t.childSize[1]-t.offset]},RIGHT:function(t){return[t.referPosition[0]+t.referSize[0]-t.childSize[0]+t.offset,t.y]}};$class({$namespace:"caph.ui.base.layout.Relative",$extends:t,$statics:{LayoutParam:e},addChild:function(t,e){return this.$super(t,e||{})},_setChildSizePositionByLayout:function(t,e,i){this.$super(t,e,i),this.getChildren().forEach(function(t){this._setRelativeLocation(t,i)},this)},_setRelativeLocation:function(t,e){var n=this._map.get(t);if(n&&n.location){n=n.location,!caph.isArray(n)&&(n=[].concat(n));var s=null,r=null,o=[0,0],a=[0,0],h=[0,0],u=t.size();n.forEach(function(t){if(t.align){s=t.refer,r=1*t.offset,isNaN(r)&&(r=0),s&&(a=s.size(),h=s.position());var n=i[t.align];caph.isFunction(n)&&(o=n({x:o[0],y:o[1],layoutSize:e,childSize:u,referSize:a,referPosition:h,offset:r}))}}),t.position(o)}}})}(this),function(){"use strict";var t=caph.require("ui.base.Layout"),e={DEFAULT_INTERVAL:0},i={HORIZONTAL:"horizontal",VERTICAL:"vertical",FILL_PARENT:"FILL_PARENT",WRAP_CONTENT:"WRAP_CONTENT"};$class({$namespace:"caph.ui.base.layout.Linear",$extends:t,$statics:{LayoutParam:i},setOption:function(t){this.$super(t),t.fillType&&(caph.isUndefined(this._weightSum)&&(this._weightSum=0),this._widthFillType=t.fillType.width,this._heightFillType=t.fillType.height),this.direction=caph.isBlank(t.direction)?i.HORIZONTAL:t.direction,this.interval=caph.isBlank(t.interval)?e.DEFAULT_INTERVAL:t.interval},addChild:function(t,e){return this.$super(t,e||{})},_beforeAddChild:function(t,e){this.$super(t,e),(this._widthFillType===i.FILL_PARENT||this._heightFillType===i.FILL_PARENT)&&(this._weightSum+=caph.isUndefined(e.weight)?1:e.weight)},_setChildSizePositionByLayout:function(t,e,n){this.$super(t,e,n);var s=0,r=0,o=[0,0],a=this._widthFillType===i.FILL_PARENT||this._heightFillType===i.FILL_PARENT,h=this.getChildren(),u=1,c=(h.length-1)*this.interval;caph.isEmpty(h)||h.forEach(function(t){a&&(e=this._map.get(t),u=(e&&e.weight?e.weight:1)/this._weightSum,o=this._calculateChildSize(t,c,u,n),t.size(o)),t.position(s,r),this.direction===i.HORIZONTAL?s+=t.size()[0]+this.interval:r+=t.size()[1]+this.interval},this)},_calculateChildSize:function(t,e,n,s){var r=t.size();return this._applyFillParent(this._widthFillType,s,r,0,i.HORIZONTAL,e,n),this._applyFillParent(this._heightFillType,s,r,1,i.VERTICAL,e,n),r},_applyFillParent:function(t,e,n,s,r,o,a){t===i.FILL_PARENT&&(n[s]=e[s],this.direction===r&&(n[s]=(n[s]-o)*a))}})}(this),function(){"use strict";var t=caph.require("ui.base.Layout"),e=caph.require("ui.base.layout.util"),i={DEFAULT_COLUMN:3,DEFAULT_CELLWIDTH:200,DEFAULT_CELLHIGHT:100};$class({$namespace:"caph.ui.base.layout.Table",$extends:t,setOption:function(t){this.$super(t),this.columns=caph.isBlank(t.columns)?i.DEFAULT_COLUMN:t.columns,this.cellWidth=caph.isBlank(t.cellWidth)?i.DEFAULT_CELLWIDTH:t.cellWidth,this.cellHeight=caph.isBlank(t.cellHeight)?i.DEFAULT_CELLHIGHT:t.cellHeight},addChild:function(t,e){return this.$super(t,e||{})},_setChildSizePositionByLayout:function(t,e,i){this.$super(t,e,i),this._cells=[],this.getChildren().forEach(function(t){this._calculateItemPosition(t,i)},this)},_calculateItemPosition:function(t,i){var n=0,s=0,r=e.getPxArray([this.cellWidth,this.cellHeight],i),o=this._map.get(t);caph.isBlank(o.rowSpan)?o.rowSpan=1:o.rowSpan,caph.isBlank(o.colSpan)?o.colSpan=1:o.colSpan;var a=r[0]*o.colSpan,h=r[1]*o.rowSpan;t.size(a,h);var u=this._getNextSpace(n,s);n=u[0],s=u[1];for(var c=s;s+(o.rowSpan||1)>c;c++){!this._cells[c]&&(this._cells[c]=[]);for(var l=n;n+(o.colSpan||1)>l;l++)this._cells[c][l]=!0}var p=r[0]*(n+(o.colSpan||1)/2)-a/2,d=r[1]*(s+(o.rowSpan||1)/2)-h/2;t.position(p,d)},_getNextSpace:function(t,e){for(;t>=this.columns||this._cells[e]&&this._cells[e][t];)t>=this.columns?(e++,t=0):t++;return[t,e]}})}(this),function(){"use strict";var t=caph.require("ui.base.Layout"),e=caph.require("ui.base.layout.util"),i={isShow:!0,height:"15%"},n={isShow:!0,width:"15%"},s={DEFAULT_HEADER:i,DEFAULT_LEFT:n,DEFAULT_RIGHT:n,DEFAULT_FOOTER:i},r={HEADER:"HEADER",LEFT:"LEFT",RIGHT:"RIGHT",CONTENT:"CONTENT",FOOTER:"FOOTER"},o={HEADER:function(t,e,i){t.size=[e[0],i.headerHeight]},LEFT:function(t,e,i){t.size=[i.leftWidth,e[1]-i.headerHeight-i.footerHeight],t.position[1]=i.headerHeight},RIGHT:function(t,e,i){t.size=[i.rightWidth,e[1]-i.headerHeight-i.footerHeight],t.position=[e[0]-i.rightWidth,i.headerHeight]},FOOTER:function(t,e,i){t.size=[e[0],i.footerHeight],t.position[1]=e[1]-i.footerHeight},CONTENT:function(t,e,i){t.size=[e[0]-i.leftWidth-i.rightWidth,e[1]-i.headerHeight-i.footerHeight],t.position=[i.leftWidth,i.headerHeight]}};$class({$namespace:"caph.ui.base.template.Template",$extends:t,$constructor:function(t){for(var e in r)this[e]={};this.$super(t)},$statics:{TemplateParam:r},addChild:function(t,e){return this.$super(t,e||{})},setOption:function(t){this.$super(t),this[r.HEADER].option=t.header||s.DEFAULT_HEADER,this[r.LEFT].option=t.left||s.DEFAULT_LEFT,this[r.RIGHT].option=t.right||s.DEFAULT_RIGHT,this[r.FOOTER].option=t.footer||s.DEFAULT_FOOTER,this[r.CONTENT].option={isShow:!0}},_beforeAddChild:function(t,e){this.$super(t,e),this[e.region||r.CONTENT].object=t},_setChildSizePositionByLayout:function(t,e,i){this.$super(t,e,i);for(var n in r)this._setRegion(n,i)},_setRegion:function(t,e){var i=this[t].object;if(i){var n={size:[0,0],position:[0,0]},s=o[t];caph.isFunction(s)&&s(n,e,this._getRegionSize(e)),i.size(n.size),i.position(n.position)}},_getRegionSize:function(t){return{headerHeight:this._calRegionSize(r.HEADER,t[1]),footerHeight:this._calRegionSize(r.FOOTER,t[1]),leftWidth:this._calRegionSize(r.LEFT,t[0]),rightWidth:this._calRegionSize(r.RIGHT,t[0])}},_calRegionSize:function(t,i){var n=this[t].option;return n.isShow?e.getPxValue(n.height||n.width,i):0}})}(this),function(){"use strict";var t=caph.require("ui.base.layout.Absolute"),e=caph.require("module.event.Manager"),i=caph.require("event.Message"),n=caph.require("module.focus.Manager");$class({$namespace:"caph.ui.base.Scene",$extends:t,$constructor:function(t){this.$super(t),this._sceneManager=null,this._callback=null,this._preLoadFlag=!1,this.focusManager=n.getInstance(),this._lastFocus=null,this.active(!1),this._lifeCycleEnum=["destroy","ready","inactive","active"],this._currentState=this._lifeCycleEnum[0],this._flagEnum={save_focus:!1,show_animation:!0,hide_animation:!0,clear_top:!1,single_top:!1,no_history:!1}},$statics:{state:{DESTROY:0,READY:1,INACTIVE:2,ACTIVE:3},FLAG_SCENE_USE_SAVE_FOCUS:"save_focus",FLAG_SCENE_USE_SHOW_ANIMATION:"show_animation",FLAG_SCENE_USE_HIDE_ANIMATION:"hide_animation",FLAG_SCENE_CLEAR_TOP:"clear_top",FLAG_SCENE_SINGLE_TOP:"single_top",FLAG_SCENE_NO_HISTORY:"no_history"},go:function(t,e,i,n){return this._sceneManager.go(t,e,i,n)},back:function(t,e,i){return this._sceneManager.back(t,e,i)},preLoad:function(t,e){return this._sceneManager.preLoad(t,e)},setFlag:function(t,e){return void 0!==this._flagEnum[t]?(this._flagEnum[t]=e,!0):!1},getFlag:function(t){return void 0!==this._flagEnum[t]?this._flagEnum[t]:void 0},dim:function(t,e){var i=this.getDim();t===!0?(this._sceneManager._surface.addChild(i),i.show(e)):i.hide(e)},getDim:function(){return this._sceneManager._getDim()},oncreate:function(){},ondestroy:function(){},onshow:function(){},onhide:function(){},onattach:function(){},ondetach:function(){},_postRender:function(){var t,e;this.$super(),this._preLoadFlag||"inactive"!==this._getCurrentState()?this._preLoadFlag=!1:(t=this._callback,e={sceneID:this._getId(),nextState:"active",cb:t},this._complete(e))},_complete:function(t){var n=new i({type:"complete",bubbles:!1,detail:t}),s=e.getInstance();s.sendTo(this._sceneManager,n)},_attach:function(t){this._callback=t.cb,"inactive"===t.nextState&&(this._preLoadFlag=!0),this._sceneManager._surface.addChild(this),this.visibility(!1)},_detach:function(){this._sceneManager._surface.removeChild(this)},_show:function(){this.visibility(!0),this.active(!0),this._restoreFocus()},_hide:function(){this._saveFocus(),this.visibility(!1),this.active(!1)},_saveFocus:function(){this.getFlag(caph.ui.base.Scene.FLAG_SCENE_USE_SAVE_FOCUS)===!0&&(this._lastFocus=this.focusManager.getCurrentFocus()),this.focusManager.reset()},_restoreFocus:function(){this.getFlag(caph.ui.base.Scene.FLAG_SCENE_USE_SAVE_FOCUS)===!0&&null!==this._lastFocus&&this.focusManager.focus(this._lastFocus)},_updateLifeCycle:function(t){return-1===this._lifeCycleEnum.indexOf(t)?!1:(this._currentState=t,!0)},_getCurrentState:function(){return this._currentState},_getId:function(){return this.getProperty("id")}})}(this),function(){"use strict";var t=caph.require("ui.base.Scene");$class({$namespace:"caph.ui.base.scene.Html",$extends:t,$constructor:function(t){if(this.$super(t),this.source){if(this.source.html){var e=caph.xhr(this.source.html,{method:"get",type:"TEXT",async:!1});this.innerHTML(e.value)}if(this.source.css){var i=document.getElementsByTagName("head")[0],n=document.createElement("link");n.setAttribute("href",this.source.css),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/stylesheet"),i.appendChild(n)}}},registerKeyHandler:function(t){this._keyHandler=t,this.focusable(!0)},onkeydown:function(t){this._keyHandler&&(this._isreturnFocus=!1,this._keyHandler(t),this._isreturnFocus===!1&&t.stopPropagation())},returnFocus:function(){this._isreturnFocus=!0}})}(this),function(t){"use strict";var e=caph.require("ui.base.Component"),i=caph.require("module.event.Manager"),n=caph.require("module.focus.Manager"),s={initClass:"caph-dim-init",translucentClass:"caph-dim-translucent",innerContentClass:"caph-dim-inner-content",size:[t.innerWidth,t.innerHeight],opacity:.6,backgroundColor:"#666666",duration:0,easing:"ease-out",remain:!1},r={TRANSITION:"Transition",TRANSITION_TYPE:"all",TRANSITION_DURATION:"TransitionDuration",TRANSITION_TIMING_FUNCTION:"TransitionTimingFunction",TRANSITION_DELAY:"TransitionDelay",TRANSLATE_X:"translateX",TRANSLATE_Y:"translateY",TRANSFORM:"Transform",ANIMATION_ITERATION_COUNT:"AnimationIterationCount",REDUCE_MOVE_BACK_DURATION:4,RESET_DELAY_TIME:1.15,VENDER_PREFIX:["webkit","Moz","ms","O",""],SECOND_TO_MILLISECOND:1e3,LENGTH_UNIT:"px",TIME_UNIT:"s"};$class({$namespace:"caph.ui.base.component.Dim",$extends:e,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this._innerContents=null,this._opacity=null,this._background_color=null,this._duration=null,this._easing=null,this._focus_manager=n.getInstance(),this.level(9998)},setOption:function(t){this._option=this._extendOptions(s,t),this.setARIA({title:"dim",role:"dim"}),this.$super(this._option),this._create(this._option)},_create:function(){this.addClass(this._option.initClass),this.focusable(!0),this.active(!0),i.getInstance().addObserver(this)},_extendOptions:function(t,e){return caph.isBlank(e)?caph.clone(t):caph.extend(t,e,!0)},show:function(t){var e={},i=null,n=null,s=null,o=null;try{caph.isBlank(t)?(s=this._option.easing,n=this._option.duration,o=this._option.opacity,i=this._option.backgroundColor,r.VENDER_PREFIX.map(function(t){e[t+r.TRANSITION]=r.TRANSITION_TYPE+" "+n+r.TIME_UNIT+" "+s})):(s=t.easing||this._option.easing,n=t.duration||this._option.duration,o=t.opacity||this._option.opacity,i=t.backgroundColor||this._option.backgroundColor,r.VENDER_PREFIX.map(function(t){e[t+r.TRANSITION]=r.TRANSITION_TYPE+" "+n+r.TIME_UNIT+" "+s}))}catch(a){throw Error("show occur error : "+a.message)}finally{this._focus_manager.setFocusLevel(9998),this.focus(),this.setStyle(e),this.addClass(this._option.translucentClass),this.setStyle({opacity:o,backgroundColor:i}),this._option.backgroundColor=i,this._option.duration=n,this._option.easing=s,this._option.opacity=o}},hide:function(t){var e={},i=null,n=null,s=null,o=null;try{caph.isBlank(t)?(i=this._option.easing,n=this._option.duration,s=this._option.opacity,o=this._option.backgroundColor,r.VENDER_PREFIX.map(function(t){e[t+r.TRANSITION]=r.TRANSITION_TYPE+" "+n+r.TIME_UNIT+" "+i}),this.removeFromParent()):(i=t.easing||this._option.easing,n=t.duration||this._option.duration,s=t.opacity||this._option.opacity,o=t.backgroundColor||this._option.backgroundColor,r.VENDER_PREFIX.map(function(t){e[t+r.TRANSITION]=r.TRANSITION_TYPE+" "+n+r.TIME_UNIT+" "+i}),t.remain!==!0&&this.removeFromParent())}catch(a){throw Error("show occur error : "+a.message)}finally{this._focus_manager.setFocusLevel(0),this.setStyle(e),this.removeClass(this._option.translucentClass),this.setStyle({opacity:s,backgroundColor:o})}},setContent:function(t){caph.isBlank(t)||(this._innerContents&&this.removeChild(this._innerContents),t instanceof caph.module.renderer.View&&(this._innerContents=t,this._innerContents.addClass(this._option.innerContentClass),this.addChild(this._innerContents)))}})}(this),function(){"use strict";var t=caph.require("module.renderer.View");$class({$namespace:"caph.ui.base.component.Label",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t),this._createElement()},setText:function(t){return this.text=t,this._textView.setProperty({innerText:this.text}),this},getText:function(){return this.text},setAlign:function(t){return this.align.horizontal=this._setAlign(this.align.horizontal,t.horizontal),this.align.vertical=this._setAlign(this.align.vertical,t.vertical),this},setMultiLine:function(t){return this._toggleClass(!t,"single-line"),this.multiLine=t,this},setWordBreak:function(t){return this._toggleClass(t,"word-break"),this.wordBreak=t,this},setEllipsis:function(t){return this._toggleClass(t,"ellipsis"),this.ellipsis=t,this},setTextColor:function(t){return this._textView.setStyle({color:t}),this},setTextFont:function(t){return this._textView.setStyle({font:t}),this},setTextSize:function(t){return this._textView.setStyle({fontSize:t}),this},setBackgroundColor:function(t){return this.setStyle({backgroundColor:t}),this
},setTextStyle:function(t){return this._textView.setStyle(t),this},addTextClass:function(t){return this._textView.addClass(t),this},removeTextClass:function(t){return this._textView.removeClass(t),this},size:function(t){return caph.isBlank(t)?this.$super():(this.$super(t),this._textView&&this._setTextViewSize(),this)},setOption:function(t){this.text=t.text||"",this.align=t.align||{horizontal:"center",vertical:"middle"},this.multiLine=caph.isBlank(t.multiLine)?!0:t.multiLine,this.wordBreak=caph.isBlank(t.wordBreak)?!1:t.wordBreak,this.ellipsis=caph.isBlank(t.ellipsis)?!1:t.ellipsis,this.setARIA({role:"textbox",title:"label"}),this.$super(t)},_initialize:function(){this.$super(),this._alignView=null,this._textView=null,this.addClass("caph-label")},_createElement:function(){this._alignView=new t,this._alignView.removeClass("caph-view"),this._alignView.addClass("caph-label-align"),this.align.horizontal&&this._alignView.addClass(this.align.horizontal),this.align.vertical&&this._alignView.addClass(this.align.vertical),this._textView=new t,this._textView.removeClass("caph-view"),this._textView.addClass("caph-label-text"),this.multiLine||this._textView.addClass("single-line"),this.wordBreak&&this._textView.addClass("word-break"),this.ellipsis&&this._textView.addClass("ellipsis"),this._textView.setProperty({innerText:this.text}),this._setTextViewSize(),this._alignView.addChild(this._textView),this.addChild(this._alignView)},_setTextViewSize:function(){var t=this.size();t[0]&&this._textView.setStyle({width:t[0]+"px"}),t[1]&&this._textView.setStyle({maxHeight:t[1]+"px"})},_setAlign:function(t,e){return e&&e!==t?(this._alignView.removeClass(t),this._alignView.addClass(e),e):t},_toggleClass:function(t,e){t?this._textView.hasClass(e)||this._textView.addClass(e):this._textView.removeClass(e)}})}(this),function(){"use strict";var t,e=caph.require("ui.base.Scene"),i=caph.require("module.event.Manager"),n=caph.require("event.Message"),s=caph.require("ui.base.component.Dim");$class({$namespace:"caph.ui.base.scene.Manager",$mixins:[caph.module.mixins.event.Observer],$constructor:function(e){this._surface=e,this._currentScene=null,this._topScene=null,this._parameter=null,this._sceneList=[],this._sceneStack=[],this._dim=new s,t=i.getInstance(),t.addObserver(this)},add:function(t,i){var n={surface:this._surface,size:this._surface.size()},s=new i(n);s instanceof e&&s.setProperty({id:t}),this._register(s)},go:function(t,i,n,s){var r;return"string"!=typeof t?!1:(r=this._getSceneById(t),void 0!==n&&(this._parameter=n),r instanceof e?(this._sceneStack.push(t),this._updateStackBySceneFlag(r),this._changeScene(i,s),!0):!1)},back:function(t,e,i){return void 0!==e&&(this._parameter=e),this._sceneStack.length>1?(this._sceneStack.pop(),this._topScene=this._getSceneById(this._sceneStack[this._sceneStack.length-1]),this._changeScene(t,i),!0):!1},preLoad:function(t,i){var n;return"string"!=typeof t?!1:(n=this._getSceneById(t),n instanceof e?(this._updateLifeCycle(n,"inactive",i),!0):!1)},setMainScene:function(t){var i;"string"==typeof t&&(i=this._getSceneById(t)),this._mainScene=i instanceof e?i:this._sceneList[0],this._sceneStack.push(this._mainScene._getId()),this._updateStackBySceneFlag(this._mainScene),this._updateLifeCycle(this._mainScene,"active")},oncomplete:function(t){var i=this._getSceneById(t.detail.sceneID),n=t.detail.nextState,s=t.detail.cb;i instanceof e&&this._updateLifeCycle(i,n,s)},_getMainScene:function(){return this._mainScene},_getSceneById:function(t){for(var e,i=0,n=this._sceneList.length;n>i;i++)if(e=this._sceneList[i],e._getId()===t)return e},_getDim:function(){return this._dim},_changeScene:function(t,i){var n=this._topScene._getCurrentState();null!==this._currentScene&&this._topScene._getId()!==this._currentScene._getId()&&(("destroy"===n||"ready"===n)&&this._updateLifeCycle(this._topScene,"active",i),t===e.state.READY&&this._currentScene._getId()!==this._mainScene._getId()?this._updateLifeCycle(this._currentScene,"ready"):t===e.state.DESTROY&&this._currentScene._getId()!==this._mainScene._getId()?this._updateLifeCycle(this._currentScene,"destroy"):this._updateLifeCycle(this._currentScene,"inactive"),"inactive"===n&&this._updateLifeCycle(this._topScene,"active",i))},_isPreLoaded:function(t){return"attach"===t._getCurrentState()?!0:!1},_isRegistered:function(t){var e=this._sceneList.indexOf(t);return-1===e?!1:!0},_updateStackBySceneFlag:function(t){var e,i,n;if(t.getFlag(caph.ui.base.Scene.FLAG_SCENE_SINGLE_TOP)===!0&&this._sceneStack.length>1)for(i=1,n=this._sceneStack.length;n>i;i++)this._sceneStack[i]===t._getId()&&this._sceneStack[i]===this._sceneStack[i-1]&&(this._sceneStack.splice(i,1),n--,i--);if(t.getFlag(caph.ui.base.Scene.FLAG_SCENE_CLEAR_TOP)===!0&&this._sceneStack.length>1){for(i=0,n=this._sceneStack.length;n>i;i++)this._sceneStack[i]!==t._getId()||e||(e=i);this._sceneStack.splice(e+1,this._sceneStack.length-e-1)}this._topScene=this._getSceneById(this._sceneStack[this._sceneStack.length-1]),t.getFlag(caph.ui.base.Scene.FLAG_SCENE_NO_HISTORY)===!0&&this._sceneStack.pop()},_register:function(t){return this._isRegistered(t)?!1:(this._sceneList.push(t),t._sceneManager=this,!0)},_deRegister:function(t){var e;return this._isRegistered(t)?(e=this._sceneList.indexOf(t),this._sceneList.splice(e,1),!0):!1},_updateLifeCycle:function(t,e,i){var n=t._getCurrentState();n!==e?this._next(t,e,i):n===e&&"function"==typeof i&&(t.update(),i())},_updateParam:function(t){null!==this._parameter&&(t.parameter=this._parameter,this._parameter=null)},_makeSceneCustomEvent:function(t,e){var i={type:t,bubbles:!1,detail:e};return new n(i)},_next:function(e,i,n){var s,r=e._getId(),o=e._getCurrentState(),a={sceneID:r,nextState:i,cb:n};switch(o){case"destroy":e._updateLifeCycle("ready"),s=this._makeSceneCustomEvent("create",a),t.sendTo(e,s),e._complete(a);break;case"ready":"inactive"===i||"active"===i?(e._updateLifeCycle("inactive"),e.requestPostRender(),e._attach(a),s=this._makeSceneCustomEvent("attach",a),t.sendTo(e,s)):"destroy"===i&&(e._updateLifeCycle("destroy"),this._deRegister(e),e.destroy(),s=this._makeSceneCustomEvent("destroy",a),t.sendTo(e,s),e._complete(a));break;case"inactive":"active"===i?(e._updateLifeCycle("active"),this._currentScene=e,this._updateParam(a),e._show(),s=this._makeSceneCustomEvent("show",a),t.sendTo(e,s),e._complete(a)):("ready"===i||"destroy"===i)&&(e._updateLifeCycle("ready"),e._detach(),s=this._makeSceneCustomEvent("detach",a),t.sendTo(e,s),e._complete(a));break;case"active":e._updateLifeCycle("inactive"),e._hide(),s=this._makeSceneCustomEvent("hide",a),t.sendTo(e,s),e._complete(a);break;default:}}})}(this),function(){"use strict";var t=caph.require("module.renderer.View"),e=caph.require("module.event.Manager");$class({$namespace:"caph.ui.base.component.Surface",$extends:t,$mixins:[caph.module.mixins.event.Observer],type:"caph-surface",$constructor:function(t){this.$super(t),this._sceneManager=null,this._option={size:t.size},this.size(t.size),e.getInstance().addObserver(this)},go:function(t,e,i,n){return null!==this._sceneManager?this._sceneManager.go(t,e,i,n):void 0},back:function(t,e,i){return null!==this._sceneManager?this._sceneManager.back(t,e,i):void 0},_setSceneManager:function(t){null===this._sceneManager&&t instanceof caph.ui.base.scene.Manager&&(this._sceneManager=t)},_getSceneManager:function(){return this._sceneManager}})}(this),function(t){"use strict";var e=caph.require("ui.base.Component"),i=caph.require("module.renderer.View"),n=caph.require("event.Message"),s=caph.require("module.event.Manager"),r={progress:0,increment:.1,position:[t.innerWidth/2-250,t.innerHeight/2,0],size:[500,2]},o={MIN_INCREMENT:0,MIN_PROGRESS:0,MAX_PROGRESS:1,MAX_INCREMENT:1};$class({$namespace:"caph.ui.base.component.ProgressBar",$extends:e,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.thread=null,this.body=new i,this.label=new i},setOption:function(t){this._option=caph.isBlank(t)?caph.clone(r):caph.extend(r,t,!0),this.setARIA({title:"progressbar",role:"progressbar"}),this.$super(this._option),this.focusable(!1),this._create()},setIncrement:function(t){if(caph.isBlank(this.body)&&caph.isBlank(this.label))return!1;if(caph.isBlank(t)||!caph.isNumber(t)||o.MIN_INCREMENT>t||t>o.MAX_INCREMENT)return!1;try{return this._option.increment=t,!0}catch(e){return console.log(e),!1}},getIncrement:function(){return this._option.increment},setCurrentProgress:function(t){if(caph.isBlank(this.body)&&caph.isBlank(this.label))return!1;if(t=Math.round(1e3*t)/1e3,caph.isBlank(t)||!caph.isNumber(t)||o.MIN_PROGRESS>t)return!1;try{return t>o.MAX_PROGRESS&&(t=o.MAX_PROGRESS),this._option.progress=t,this._run(!1),!0}catch(e){return console.log(e),!1}},getCurrentProgress:function(){return Math.round(1e3*(this._option.progress-this._option.increment))/1e3},_run:function(t){0===arguments.length&&(t=!0);try{this._option.progress=Math.round(1e3*this._option.progress)/1e3;var e=null;return this._option.progress<o.MAX_PROGRESS?e=Math.round(this._option.size[0]*this._option.progress):(this._option.progress=o.MAX_PROGRESS,e=this._option.size[0]),this.body.setStyle({width:e+"px"}),this._option.progress>=o.MAX_PROGRESS?this._complete():(!caph.isBlank(this._option.increment)&&caph.isNumber(this._option.increment)&&t&&(this._option.progress+=this._option.increment),this._update())}catch(i){throw Error("progressbar : _run occur error : "+i.message)}},_create:function(){var t=this,e=this.body,i=this.label,n=t._option.size;e.setStyle({width:"0px",height:n[1]+"px"}),t.addChild(i),t.addChild(e),this._run()},_update:function(){if(caph.isBlank(this.body)&&caph.isBlank(this.label))return!1;try{var t=new n({type:"update",detail:{data:this._option.progress}});return s.getInstance().sendTo(this,t),this._option.progress+=this._option.increment,Math.round(1e3*this._option.progress)/1e3}catch(e){throw Error("progressbar : _update occur error : "+e.message)}},_complete:function(){if(caph.isBlank(this.body)&&caph.isBlank(this.label))return!1;try{caph.isBlank(this.thread)||(clearInterval(this.thread),this.thread=null);var t=new n({type:"complete",detail:{data:this._option.progress}});return s.getInstance().sendTo(this,t),this._option.progress}catch(e){throw Error("progressbar : _complete occur error : "+e.message)}}})}(this),function(){"use strict";$class({$namespace:"caph.ui.base.component.Icon",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t),this.addClass(this._prefix+this._type)},setOption:function(t){if(!t.type)throw Error('IllegalArgumentError: The "caph.ui.base.component.Icon" needs to know the icon type. Please identify that the "type" property has been passed.');this._type=t.type,this._prefix=t.prefix||"caph-icon-",this.setARIA({role:"button",title:"icon"}),this.$super(t)}})}(this),function(){"use strict";var t=caph.require("module.renderer.View"),e=caph.require("module.event.Manager");$class({$namespace:"caph.ui.base.component.Button",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.addClass("caph-button"),this.focusable(!0)},setOption:function(t){this.$super(t),t&&(t.contents&&this.setContent(t.contents),t.align&&this.setAlign(t.align))},setAlign:function(t){if(t&&(t=t.replace(/\s+/g,""),this._option.align=t,this._option.contents&&caph.isFunction(this._option.contents.setAlign)))for(var e=t.split("|"),i=0;e.length>i;i++)this._option.contents.setAlign(this,e[i]);return this},setContent:function(e){if(e&&e instanceof t){if(e===this._option.contents)return this;this._option.contents&&this.removeChild(this._option.contents),e._isTypeOfFocusable===!0&&e.focusable(!1),this._option.contents=e._clone(),this.addChild(this._option.contents)}return this},setEnable:function(t){return this.$super(t),t===!0?this.removeClass("disable"):this.addClass("disable"),this},onfocus:function(t){if(this.addClass("focus"),this._option.contents instanceof caph.ui.base.Component){var i={detail:t.detail,source:this._option.contents,type:"focus",bubbles:!1};e.getInstance().sendTo(this._option.contents,i)}},onblur:function(t){if(this.removeClass("focus"),this.hasClass("select")&&this.removeClass("select"),this._option.contents instanceof caph.ui.base.Component){var i={detail:t.detail,source:this._option.contents,type:"blur",bubbles:!1};e.getInstance().sendTo(this._option.contents,i)}},onkeydown:function(t){this.isEnable()&&t.key().enter&&this.addClass("select")},onkeyup:function(t){this.isEnable()&&t.key().enter&&this.removeClass("select")},onmousedown:function(){this.isEnable()&&this.addClass("select")},onmouseup:function(){this.isEnable()&&this.removeClass("select")}})}(this),function(){"use strict";$class({$namespace:"caph.ui.base.component.Sprite",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this._option.frame=[],this.addClass("caph-sprite")},setOption:function(t){this.$super(t),t.frame&&this.addFrame(t.frame),t.src&&(this._option.src=t.src,this.setStyle({"background-image":'url("'+t.src+'")'})),this._option.duration=t.duration||this._option.duration||66},_separateFrame:function(t){var e;if("horizontal"===t.direction)for(e=0;t.number>e;e++)this.addFrame({x:t.x+t.width*e,y:t.y,width:t.width,height:t.height});else if("vertical"===t.direction)for(e=0;t.number>e;e++)this.addFrame({x:t.x,y:t.y+t.height*e,width:t.width,height:t.height})},addFrame:function(t){if(t instanceof Array)for(var e=t.length,i=0;e>i;i++)this._option.frame.push(t[i]);else t.direction?this._separateFrame(t):"object"==typeof t&&this._option.frame.push(t);return this},getFrame:function(t){return"number"==typeof t?this._option.frame[t]:this._option.frame},removeFrame:function(t){return t?this._option.frame.splice(t,1):this._option.frame=[],this},setDuration:function(t){return this._option.duration=t,this},getDuration:function(){return this._option.duration},run:function(){var t=this,e=0,i=this.getFrame().length;this._option.timer||(this._option.settingTimer=setInterval(function(){"number"!=typeof i||0===i?(e=0,i=t.getFrame().length):(t._option.timer=setInterval(function(){t._setFrame(e),e=(e+1)%i},t._option.duration),clearInterval(t._option.settingTimer))},100))},stop:function(){this._option.settingTimer&&(clearInterval(this._option.settingTimer),this._option.settingTimer=null),this._option.timer&&(clearInterval(this._option.timer),this._option.timer=null)},_setFrame:function(t){var e=t?t:0,i=this.getFrame(e);i&&(i.width&&this.size([i.width,i.height]),this.setStyle({"background-position":-1*i.x+"px "+-1*i.y+"px"}))}})}(this),function(){"use strict";var t=caph.require("module.event.Manager"),e={baseCls:"caph-checkbox",selectedCls:"select",checkWithoutBoxCls:"check",focusCls:"focus"};$class({$namespace:"caph.ui.base.component.Checkbox",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.setARIA({title:"checkbox",role:"checkbox"}),this.addClass(e.baseCls),this.focusable(!0),this._option.hasBox=!0,this._option.checked=!1},setOption:function(t){this.$super(t),t&&caph.extend(this._option,t),this._setClass()},setChecked:function(t){caph.isBoolean(t)&&(this._option.checked=t,this._setClass(),this._stateChange())},isChecked:function(){return this._option.checked},onfocus:function(){this.addClass(e.focusCls)},onblur:function(){this.removeClass(e.focusCls)},onclick:function(){this.isEnable()&&this.setChecked(!this._option.checked)},onkeydown:function(t){this.isEnable()&&t.key().enter&&this.setChecked(!this._option.checked)},_setClass:function(){caph.isBoolean(this._option.checked)&&(this._option.checked?(this.addClass(e.selectedCls),this._option.hasBox?this.removeClass(e.checkWithoutBoxCls):this.addClass(e.checkWithoutBoxCls)):(this.removeClass(e.selectedCls),this._option.hasBox?this.removeClass(e.checkWithoutBoxCls):this.addClass(e.checkWithoutBoxCls)))},_stateChange:function(){try{var e=new caph.event.Message({type:"statechange",detail:{state:this._option.checked}});t.getInstance().sendTo(this,e)}catch(i){throw Error("checkbox : _statechange occur error : "+i.message)}}})}(this),function(){"use strict";var t=["small","medium","large"],e=["left","right","up","down"];$class({$namespace:"caph.ui.base.component.Indicator",$extends:caph.require("ui.base.Component"),$constructor:function(t){this.$super(t),this._initCssClass()},setEnable:function(t){return this.$super(t),t?this.removeClass("disabled"):this.addClass("disabled"),this},setOption:function(i){if(this.setARIA({title:"button",role:"button"}),this.indicatorClass=i.indicatorClass,null===i.type||void 0===i.type||-1===t.indexOf(i.type.toLowerCase()))throw Error("IllegalArgumentError: The value of property.type should be only small, medium and large.");if(this.type=i.type,null===i.direction||void 0===i.direction||-1===e.indexOf(i.direction.toLowerCase()))throw Error("IllegalArgumentError: The value of property.direction should be only left, right, up and down.");this.direction=i.direction,this.$super(i)},onfocus:function(){this.addClass("focused")},onblur:function(){this.removeClass("focused")},_initialize:function(){this.$super(),this.focusable(!0)},_initCssClass:function(){this.addClass(this.indicatorClass),this.addClass(this.type),this.addClass(this.direction)}})}(this),function(t){"use strict";var e=caph.require("ui.base.Component"),i=caph.require("ui.base.component.Dim"),n=caph.require("ui.base.component.Label"),s=caph.require("module.focus.Manager");$class({$namespace:"caph.ui.base.component.Popup",$extends:caph.require("ui.base.Component"),$constructor:function(t){this.$super(t),this._create(t),this.active(!1),this.visibility(!1)},setOption:function(e){this._Button=e._Button,this._dimOpacity=e._dimOpacity,this._dimColor=e._dimColor,this._popupOpacity=e._popupOpacity,this._popupColor=e._popupColor,this._fillWidth=e._fillWidth,this._fillHeight=e._fillHeight,this._popupType=e.popupType||null,this._width=e.width||600,this._height=e.height||400,this._fillWidth&&(this._width=t.innerWidth),this._fillHeight&&(this._height=t.innerHeight),this._messageTextAlign=e.messageTextAlign||"center",this._useTitleArea=caph.isBlank(e.useTitleArea)?!0:e.useTitleArea,this._useButtonArea=e.useButtonArea,("ALERT"===this._popupType||"CONFIRM"===this._popupType)&&(this._useButtonArea=!0),this._callback=e.callback,this._buttons=[],this.$super(e)},size:function(t){return caph.isBlank(t)?this.$super():(this._fillWidth||(this._width=t[0]),this._fillHeight||(this._height=t[1]),this.$super(t))},setTitle:function(t){return this._useTitleArea&&this.popupTitleBox.setText(t),this},setMessageText:function(t){return this.popupMessageBox.setProperty({innerText:t}),this},getTitleAreaLabel:function(){return this.popupTitleBox},getMessageAreaComponent:function(){return this.popupMessageBox},getButtonAreaComponent:function(){return this.popupButtonBox},show:function(){this._showPopup(!0)},close:function(){this._showPopup(!1)},onpostrender:function(){this._getRoot().addChild(this)},onkeydown:function(){this._useButtonArea&&this._buttons[0]||this.close()},onclick:function(){this._useButtonArea&&this._buttons[0]||this.close()},_initialize:function(){this.$super(),this.focusable(!0),this.requestPostRender()},_getRoot:function(){for(var t=this;null!==t.getParent();)t=t.getParent();return t},_create:function(s){if(this.position([0,0]),this.visibility(!1),this.setStyle({zIndex:9999}),this.addChild(this.popupOuter=new e({size:[this._width,this._height],position:[(t.innerWidth-this._width)/2,(t.innerHeight-this._height)/2],dom:{style:{zIndex:9999,backgroundColor:this._popupColor,opacity:this._popupOpacity}}}).level(2)),this._useTitleArea&&this.popupOuter.addChild(this.popupTitleBox=new n),this.popupOuter.addChild(this.popupMessageBox=new e({dom:{style:{overflow:"hidden",textAlign:this._messageTextAlign}}})),this._useButtonArea){this.popupOuter.addChild(this.popupButtonBox=new e({dom:{style:{overflow:"hidden"}}}));var r=s.buttonContent||"CLOSE";"ALERT"===this._popupType?(caph.isString(r)||(r="OK"),this._createButton(r)):"CONFIRM"===this._popupType&&(caph.isArray(r)&&2===r.length||(r=["YES","NO"]),this._createButton(r[0],!0),this._createButton(r[1],!1))}this.addChild(this.layerDim=new i({opacity:this._dimOpacity,backgroundColor:this._dimColor}).setStyle({zIndex:9998}))},_createButton:function(t,e){var i=this,n=function(){caph.isFunction(i._callback)&&i._callback(e),i.close()},s=new this._Button({contents:t,on:{click:function(){n()},keydown:function(t){t.key().enter&&n()}}}).level(2);this._buttons.push(s),this.popupButtonBox.addChild(s)},_showPopup:function(t){this.active(t),this.visibility(t),t?(this.layerDim.show(),s.getInstance().setFocusLevel(2),this._useButtonArea&&this._buttons[0]?this._buttons[0].focus():(this.level(2),this.focus())):(this.layerDim.hide({remain:!0}),caph.module.focus.Manager.getInstance().setFocusLevel(0))}})}(this),function(){"use strict";var t=caph.require("module.event.Manager"),e=caph.require("module.renderer.View");$class({$namespace:"caph.ui.base.component.Slider",$extends:caph.require("ui.base.Component"),$constructor:function(t){this.$super(t),this._create(t)},setOption:function(t){this.setARIA({title:"slider",role:"slider"}),this._isBarImgSplit=t._isBarImgSplit,this._sliderBarClass=t._sliderBarClass,this._sliderFocusClass=t._sliderFocusClass;var e=t.step||10;"number"!=typeof e&&(e=10),1!==e&&10!==e&&(e=10),this._isEnter=!1,this.width=t.width||50,this.selectedValue=t.value||0,this.step=e,this.thisFocusClass="","number"!=typeof this.width&&(this.width=50),50>this.width&&(this.width=50),"number"!=typeof this.selectedValue&&(this.selectedValue=0),0>this.selectedValue?this.selectedValue=0:this.selectedValue>this.width&&(this.selectedValue=this.width),this._isUseMouse=t._isUseMouse,this._isUseKey=t._isUseKey,caph.isBlank(this._isUseMouse)&&(this._isUseMouse=!0),caph.isBlank(this._isUseKey)&&(this._isUseKey=!0),this.$super(t)},size:function(t){return caph.isBlank(t)?this.$super():(this.width=t[0],this.$super(t))},getSelectedValue:function(){return this.selectedValue},setSelectedValue:function(e){return e>=0&&this.width>=e&&this.selectedValue!==e&&(this.selectedValue=e,this._renderBar(),t.getInstance().sendTo(this,{type:"change",detail:this.selectedValue})),this},onfocus:function(){this._changeFoucsClass("focused")},onblur:function(){this._setEnterStatus(!1),this._changeFoucsClass("normal")},onkeydown:function(t){if(this._isUseKey){var e=t.key();if(e.enter)return this._setEnterStatus(),t.stopPropagation(),void 0;if(this._isEnter){if(this._isMoveKey(e)){var i=this.step*(e.left?-1:1),n=this.selectedValue+i;n>=0&&this.width>=n&&this._setSelectedValue(i)}t.stopPropagation()}}},onmousedown:function(t){if(this._isMouseMove=t.source===this.focus){var e=t.mouse();this._correctionValue=e.clientX-e.offsetX-this.selectedValue}},_initialize:function(){this.$super(),this.focusable(!0),caph.window.bind("mousemove",function(t){if(this._isUseMouse&&this._isMouseMove){var e=t.clientX-this.focus.x()-10-this._correctionValue;return 0>e?this.setSelectedValue(0):e>this.width?this.setSelectedValue(this.width):(this.focusBox.x(e),this.setSelectedValue(e)),t.preventDefault(),t.stopPropagation(),!1}}.bind(this)),caph.window.bind("mouseup",function(){this._isMouseMove=!1,this._correctionValue=0}.bind(this))},_create:function(){this.addClass("caph-slider-normal"),this.setStyle({width:this.width+25+"px"}),this.bar=new e,this._appendChild(this.bar,this,this._sliderBarClass+"unselected",{x:9,y:9},{width:this.width+"px"}),this._isBarImgSplit&&(this._appendChild(null,this.bar,this._sliderBarClass+"unselected-left",{x:-6,y:0},null),this._appendChild(null,this.bar,this._sliderBarClass+"unselected-right",{x:this.width,y:0},null)),this.barSelected=new e,this._appendChild(this.barSelected,this,this._sliderBarClass+"selected",{x:9,y:9},{width:this.selectedValue+"px"}),this._isBarImgSplit&&(this._appendChild(null,this.barSelected,this._sliderBarClass+"selected-left",{x:-6,y:0},null),this.barSelectedRight=new e,this._appendChild(this.barSelectedRight,this.barSelected,this._sliderBarClass+"selected-right",{x:this.selectedValue,y:0},null)),this.focusBox=new e,this.addChild(this.focusBox),this.focus=new e,this.focusBox.addChild(this.focus),this.focus.position(0,0),this.arrowLeft=new e,this._appendChild(this.arrowLeft,this.focusBox,this._sliderFocusClass+"focused-left",null,{visibility:"hidden"}),this.arrowRight=new e,this._appendChild(this.arrowRight,this.focusBox,this._sliderFocusClass+"focused-right",null,{visibility:"hidden"}),this._changeFoucsClass("normal"),this._renderBar()},_appendChild:function(t,i,n,s,r){null===t&&(t=new e),i.addChild(t),t.addClass(n),t.setStyle(r),s&&t.position(s.x,s.y)},_changeFoucsClass:function(t){""!==this.thisFocusClass&&this.focus.removeClass(this.thisFocusClass),this.thisFocusClass=this._sliderFocusClass+t,this.focus.addClass(this.thisFocusClass)},_setSelectedValue:function(e){this.selectedValue+=e,0>this.selectedValue&&(this.selectedValue=0),this.selectedValue>this.width&&(this.selectedValue=this.width),this._renderBar(),t.getInstance().sendTo(this,{type:"change",detail:this.selectedValue})},_setEnterStatus:function(t){this._isEnter=void 0===t?!this._isEnter:t,this.arrowLeft.visibility(this._isEnter),this.arrowRight.visibility(this._isEnter)},_renderBar:function(){this.focusBox.x(this.selectedValue),this.barSelected.setStyle({width:this.selectedValue+"px"}),this._isBarImgSplit&&this.barSelectedRight.x(this.selectedValue)},_isMoveKey:function(t){return t.left||t.right}})}(this),function(){"use strict";var t=caph.require("module.renderer.View");$class({$namespace:"caph.ui.base.component.Tooltip",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t),this._createElement()},$statics:{TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom",CENTER:"center"},size:function(t){return caph.isBlank(t)?this.$super():(this.setWidth(t[0]),this.setHeight(t[1]),this)},setWidth:function(t){return this._setSize("width",t),this},setHeight:function(t){return this._setSize("height",t),this},setText:function(t){var e=this.size();return this.text=t,this._view.text.setProperty({innerHTML:'<div style="max-width: '+e[0]+"px; max-height:"+e[1]+'px">'+this.text+"</div>"}),this},setTextFont:function(t){return this._view.text.setStyle({font:t}),this},setTextStyle:function(t){return this._view.text.setStyle(t),this},setTimeout:function(t){return this.timeout=t,this},setTailDirection:function(t){if(this.tailDirection===t)return this;var e=this._view.tail;return e.removeClass(this.tailClassPrefixName+this.tailDirection),e.addClass(this.tailClassPrefixName+(this.tailDirection=t)),this._setTailViewSize(e,this.size()),this},setTailAlign:function(t){if(this.tailAlign===t)return this;var e=this._view.tail;return e.removeClass(this.tailAlign),e.addClass(this.tailAlign=t),this},show:function(){return this._handle&&clearTimeout(this._handle),this.addClass("show"),this.timeout>0&&(this._handle=setTimeout(function(){this.hide()}.bind(this),this.timeout)),this},hide:function(){return this.removeClass("show"),this._handle&&clearTimeout(this._handle),this},setOption:function(t){this.text=t.text||"",this.timeout=caph.isBlank(t.timeout)?5e3:t.timeout,this.tailDirection=t.tailDirection||caph.ui.base.component.Tooltip.BOTTOM,this.tailAlign=t.tailAlign||caph.ui.base.component.Tooltip.CENTER,this.textClassName=t.textClassName||"caph-tooltip-text",this.tailClassPrefixName=t.tailClassPrefixName||"caph-tooltip-tail-",this.setARIA({role:"tooltip",title:"tooltip"}),this.$super(t)},_initialize:function(){this.$super(),this._view={},this._handle,this.addClass("caph-tooltip")},_createElement:function(){var t=this.size();this.addChild(this._view.text=this._createTextView(t)),this.addChild(this._view.tail=this._createTailView(t))},_createTextView:function(e){var i=new t;return i.removeClass("caph-view"),i.addClass(this.textClassName),i.setProperty({innerHTML:'<div style="max-width: '+e[0]+"px; max-height:"+e[1]+'px">'+this.text+"</div>"}),i.setStyle({width:e[0]+"px",height:e[1]+"px"}),i},_createTailView:function(e){var i=new t;return i.removeClass("caph-view"),i.addClass(this.tailClassPrefixName+this.tailDirection),i.addClass(this.tailAlign),this._setTailViewSize(i,e),i},_setTailViewSize:function(t,e){switch(this.tailDirection){case caph.ui.base.component.Tooltip.TOP:case caph.ui.base.component.Tooltip.BOTTOM:t.setStyle({width:e[0]+"px",height:""});break;case caph.ui.base.component.Tooltip.LEFT:case caph.ui.base.component.Tooltip.RIGHT:t.setStyle({width:"",height:e[1]+"px"})}},_setSize:function(t,e){var i=this._view.text,n=this._view.tail,s={};s[t]=e+"px",this.setStyle(s),i&&i.setStyle(s),n&&this._setTailViewSize(n,this.size())}})}(this),function(){"use strict";var t=caph.require("module.renderer.View"),e=caph.require("module.event.Manager"),i="arrow",n="left",s="right",r="hidden",o="rating",a="star",h="full",u="half";$class({$namespace:"caph.ui.base.component.Rating",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t),this._createElement(),["caph-rating",this.className].forEach(this.addClass.bind(this))},$statics:{MIN:0,MAX:5,MIN_INCREMENTS:.5,MAX_INCREMENTS:1},setIncrements:function(t){return this.increments=t===caph.ui.base.component.Rating.MIN_INCREMENTS||t===caph.ui.base.component.Rating.MAX_INCREMENTS?t:caph.ui.base.component.Rating.MIN_INCREMENTS,this},getRatingValue:function(){return this.rating},setRatingValue:function(t){return t=this._normalizeNumber(t,caph.ui.base.component.Rating.MIN,caph.ui.base.component.Rating.MAX),this.rating===t?this:(this.rating=t,this._hideArrow(this._view[n],this._view[s]),this._initStar(this._view[o]),e.getInstance().sendTo(this,{type:"change"}),this)},setEnable:function(t){return this.$super(t),t?(this._view[n]&&this._view[n].removeClass("disabled"),this._view[s]&&this._view[s].removeClass("disabled")):(this._view[n]&&this._view[n].addClass("disabled"),this._view[s]&&this._view[s].addClass("disabled")),this},onfocus:function(){this._view[o].addClass("focus")},onblur:function(){this._view[o].removeClass("focus")},onmouseover:function(t){this._view[o].removeClass("focus"),this._view[n].addClass("pointer"),this._view[s].addClass("pointer"),this._isArrow(t.source,n)?this._focusArrow(n):this._isArrow(t.source,s)&&this._focusArrow(s)},onmouseout:function(t){this._view[n].removeClass("pointer"),this._view[s].removeClass("pointer"),this._isArrow(t.source,n)?this._blurArrow(n):this._isArrow(t.source,s)&&this._blurArrow(s)},onkeydown:function(t){var e=t.key();e.left?(this._focusArrow(n),this._decreaseStar(t)):e.right&&(this._focusArrow(s),this._increaseStar(t)),this._view[o].addClass("focus"),this._view[n].removeClass("pointer"),this._view[s].removeClass("pointer")},onkeyup:function(t){var e=t.key();e.left?this._blurArrow(n):e.right&&this._blurArrow(s)},onmousedown:function(t){this._isMouseDown=!0,this._isArrow(t.source,n)?this._decreaseStar():this._isArrow(t.source,s)?this._increaseStar():this._setStarRating(t)},onmouseup:function(){this._isMouseDown=!1},onmousemove:function(t){this._isMouseDown&&this._setStarRating(t)},onchange:function(t){t.setSource(this),t.setDetail(this.rating)},setOption:function(t){this.rating=caph.isBlank(t.rating)?caph.ui.base.component.Rating.MIN:t.rating,this.increments=caph.isBlank(t.increments)?caph.ui.base.component.Rating.MIN_INCREMENTS:t.increments,this.className=t.className||"caph-base-rating",this.setARIA({role:"slider",title:"rating"}),this.$super(t)},_initialize:function(){this.$super(),this._view={},this._isMouseDown=!1,this.focusable(!0)},_normalizeNumber:function(t,e,i){return e>t?e:t>i?i:t},_createElement:function(){var t=this._createArrow(n),e=this._createArrow(s),i=this._createRating();this._hideArrow(t,e),this._initStar(i),this.addChild(this._view[n]=t),this.addChild(this._view[o]=i),this.addChild(this._view[s]=e)},_createArrow:function(e){var n=new t;return n.removeClass("caph-view"),["caph-rating",this.className,i,e].forEach(n.addClass.bind(n)),n},_createRating:function(){var e=new t;e.removeClass("caph-view"),["caph-rating",this.className,o].forEach(e.addClass.bind(e));
for(var i=0;caph.ui.base.component.Rating.MAX>i;i++){var n=new t;n.removeClass("caph-view"),["caph-rating",this.className,a].forEach(n.addClass.bind(n)),e.addChild(n)}return e},_hideArrow:function(t,e){this.rating<caph.ui.base.component.Rating.MIN+this.increments?(t.addClass(r),e.removeClass(r)):this.rating>caph.ui.base.component.Rating.MAX-this.increments?(t.removeClass(r),e.addClass(r)):(t.removeClass(r),e.removeClass(r))},_initStar:function(t){for(var e=t.getChildren(),i=0;caph.ui.base.component.Rating.MAX>i;i++)[u,h].forEach(e[i].removeClass.bind(e[i]));var n=Math.floor(this.rating),s=this.rating-n;for(i=0;n>i;i++)e[i].addClass(h);s>=caph.ui.base.component.Rating.MIN_INCREMENTS&&e[n].addClass(u)},_decreaseStar:function(t){this._changeStar(this.rating-this.increments,t)},_increaseStar:function(t){this._changeStar(this.rating+this.increments,t)},_changeStar:function(t,e){var i=this.rating;this.setRatingValue(t),i!==this.rating&&e&&e.stopPropagation()},_focusArrow:function(t){this._view[t].addClass("focus")},_blurArrow:function(t){this._view[t].removeClass("focus")},_isArrow:function(t,e){return t===this._view[e]},_setStarRating:function(t){for(var e=t.source,i=this._view[o].getChildren(),n=0,s=i.length;s>n;n++)if(e===i[n]){var r=t.mouse().offsetX,a=e.getStyle("width").replace("px","");this.increments===caph.ui.base.component.Rating.MIN_INCREMENTS?r>a/2?this.setRatingValue(n+caph.ui.base.component.Rating.MAX_INCREMENTS):r>a/4?this.setRatingValue(n+caph.ui.base.component.Rating.MIN_INCREMENTS):this.setRatingValue(n):r>a/4?this.setRatingValue(n+caph.ui.base.component.Rating.MAX_INCREMENTS):this.setRatingValue(n);break}}})}(this),function(){"use strict";var t=caph.require("ui.base.Component");$class({$namespace:"caph.ui.base.component.Html",$extends:t})}(this),function(){"use strict";$class({$namespace:"caph.ui.base.component.RadioButton._Group",$constructor:function(t){this.initialize(),this.setOption(t)},initialize:function(){this._option={},this._option.element=[],this._option.currentSelected=null},setOption:function(t){this._option.name=t.name||this._option.name||"default"},add:function(t){this.isMember(t)===!1&&(this._option.element.push(t),t._setGroupName(this._option.name))},remove:function(t){var e=this.isMember(t);return e>-1&&this._option.element.splice(e,1),this},isMember:function(t){var e=this._option.element.indexOf(t);return e>-1?e:!1},select:function(t){var e=this._option.element.indexOf(t);this._option.currentSelected=e>-1?e:null,t._setChecked(!0)},deselect:function(t){this._option.currentSelected=null,t._setChecked(!1)},setChecked:function(t,e){var i=this._option.currentSelected;null!==this._option.currentSelected&&this._option.element[i]!==t&&this.deselect(this._option.element[i]),e?this.select(t):this.deselect(t)},getCheckedElement:function(){return this._option.element[this._option.currentSelected]||null}})}(this),function(){"use strict";var t=caph.require("ui.base.component.RadioButton._Group"),e=$class({$constructor:function(){this.initialize()},initialize:function(){this._groups={}},createGroup:function(e){return this._groups[e]instanceof t||(this._groups[e]={},this._groups[e]=new t({name:e})),this._groups[e]},setGroup:function(t,e){var i=this._groups[e._option.group],n=this._groups[t];return i&&i.isMember(e)!==!1&&i.remove(e),n?n.add(e):this.createGroup(t).add(e),this._groups[t]},getGroup:function(t){return this._groups[t]||this.createGroup(t)}});caph.namespace("caph.ui.base.component.RadioButton._Manager",caph.pattern.singleton(e))}(this),function(){"use strict";var t=caph.require("module.event.Manager"),e=caph.require("ui.base.component.RadioButton._Manager"),i={baseCls:"caph-radiobutton",checkedCls:"check",focusedCls:"focus",disabledCls:"disable"};$class({$namespace:"caph.ui.base.component.RadioButton",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.setARIA({title:"radiobutton",role:"radiobutton"}),this.addClass(i.baseCls),this.focusable(!0),this._option.checked=!1,this._option.group="default",this._option.groupObject=e.getInstance().setGroup("default",this),this._option.groupObject.setChecked(this,this._option.checked)},setOption:function(t){this.$super(t),t&&(caph.extend(this._option,t),t.group&&"string"==typeof t.group&&(this._option.groupObject=e.getInstance().setGroup(this._option.group,this)),t.checked&&"boolean"==typeof t.checked&&this._option.groupObject.setChecked(this,this._option.checked)),this._setClass()},_setGroupName:function(t){this._option.group=t},_setClass:function(){caph.isBoolean(this._option.checked)&&(this._option.checked?this.addClass(i.checkedCls):this.removeClass(i.checkedCls))},setChecked:function(t){this._option.groupObject.setChecked(this,t)},_setChecked:function(t){caph.isBoolean(t)&&(this._option.checked=t,this._setClass(),this._stateChange())},isChecked:function(){return this._option.checked},setEnable:function(t){this.$super(t),t===!0?this.removeClass(i.disabledCls):this.addClass(i.disabledCls)},_stateChange:function(){try{var e=new caph.event.Message({type:"statechange",detail:{state:this._option.checked}});t.getInstance().sendTo(this,e)}catch(i){throw Error("radiobutton : _statechange occur error : "+i.message)}},onfocus:function(){this.addClass(i.focusedCls)},onblur:function(){this.removeClass(i.focusedCls)},onclick:function(){this.isEnable()&&this._option.groupObject.setChecked(this,!0)},onkeydown:function(t){this.isEnable()&&t.key().enter&&this._option.groupObject.setChecked(this,!0)}})}(this),function(){"use strict";var t=caph.require("module.renderer.View"),e=caph.require("ui.base.Component"),i=caph.require("module.event.Manager"),n=caph.require("module.focus.Manager"),s=caph.require("module.renderer._VDomLookUpTable"),r={TAB:9,DONE:65376},o=$class({$extends:caph.ui.base.Component,$constructor:function(t){this.tag=t.tag,this.maxLength=t.maxLength,this.isShowTextLength=t.isShowTextLength,this.callback=t.callback,this.$super(t),this.domEvent(!1)},onkeydown:function(t){var e=t.key();"textarea"===this.tag?e.code===r.TAB||e.code===r.DONE?(t.preventDefault(),t.stopPropagation(),s.getInstance().getDom(this).blur(),n.getInstance().focus(this.getParent()),"function"==typeof this.callback&&this.callback(t)):e.enter&&t.stopPropagation():e.enter&&(t.preventDefault(),t.stopPropagation(),s.getInstance().getDom(this).blur(),n.getInstance().focus(this.getParent()),"function"==typeof this.callback&&this.callback(t)),(e.left||e.right||e.up||e.down)&&t.stopPropagation()},oninput:function(t){var e=s.getInstance().getVDom(t.source);if(e===this){var n=this.getProperty("value"),r=n.length,o={value:n,length:r};i.getInstance().sendTo(this.getParent(),{type:"change",detail:o})}},onfocus:function(){s.getInstance().getDom(this).focus()}});$class({$namespace:"caph.ui.base.component.Inputbox",$extends:e,$statics:{INPUT:"input",TEXTAREA:"textarea"},$constructor:function(t){this.$super(t),this._create(t)},setOption:function(t){if(this.setARIA({title:"inputbox",role:"inputbox"}),this.type=t.type||caph.ui.base.component.Inputbox.INPUT,this.className=t.className||"caph-base-inputbox",this.maxLength=t.maxLength||40,this.scrollbar=t.scrollbar||!1,this.placeholder=t.placeholder||"",this.isShowTextLength=t.isShowTextLength||!1,this.value=t.value||"",this.align=t.align||"left",this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength)),!caph.isNumber(this.maxLength))throw Error("width/maxLength should be a number");if(!caph.isBoolean(this.scrollbar)||!caph.isBoolean(this.isShowTextLength))throw Error("scrollbar/isShowTextLength should be a boolean type");if(!caph.isString(this.align)||!caph.isString(this.placeholder))throw Error("align/placeholder should be a string type");if(this.type!==caph.ui.base.component.Inputbox.INPUT&&this.type!==caph.ui.base.component.Inputbox.TEXTAREA)throw Error("Unsupported Inputbox type");this.$super(t)},setPlaceholder:function(t){this.inputbox.setProperty({placeholder:t})},setValue:function(t){t.length>this.maxLength&&(t=t.slice(0,this.maxLength)),this.inputbox.setProperty({value:t}),this._setTextLengthLabel(t.length)},setMaxLength:function(t){this.maxLength=t,this.inputbox.setProperty({maxLength:this.maxLength});var e=this.inputbox.getProperty("value");e.length>t&&(e=e.slice(0,this.maxLength)),this.inputbox.setProperty({value:e}),this._setTextLengthLabel(e.length)},onfocus:function(){this.inputbox.addClass("focus")},onblur:function(t){t.stopPropagation(),this.inputbox.removeClass("focus"),s.getInstance().getDom(this.inputbox).blur()},onchange:function(t){t.stopPropagation(),this._setTextLengthLabel(t.detail.length)},getValue:function(){return this.inputbox.getProperty("value")},setReadOnly:function(){this.inputbox.setProperty({readOnly:!0})},onkeydown:function(t){var e=t.key();e.enter&&(t.preventDefault(),t.stopPropagation(),n.getInstance().focus(this.inputbox))},hideTextLength:function(){this.textLengthLabel&&this.textLengthLabel.visibility(!1)},showTextLength:function(){this.textLengthLabel?this.textLengthLabel.visibility(!0):this._createTextLengthLabel()},size:function(t){return caph.isBlank(t)?this.$super():(this.$super(t),this.inputbox&&this.inputbox.size(t),this.textLengthLabel&&this.textLengthLabel.setStyle({width:t[0]+"px"}),this)},setEnable:function(t){return this.$super(t),this.inputbox&&(t?(this.inputbox.removeClass("dim"),this.inputbox.getProperty("disabled")&&this.inputbox.setProperty({disabled:""})):(this.inputbox.addClass("dim"),this.inputbox.setProperty({disabled:"disabled"}))),this},_initialize:function(){this.$super(),this.focusable(!0),i.getInstance().addObserver(this),this.requestPostRender()},_create:function(t){var e=this.size();this.placeholder.length>0&&this.value.length>0&&(this.placeholder=""),this.inputbox=new o({tag:this.type,isShowTextLength:this.isShowTextLength,maxLength:this.maxLength,callback:t.callback}),this.scrollbar||this.inputbox.setStyle({overflow:"hidden"}),this.inputbox.size(e),this.inputbox.setProperty({value:this.value,placeholder:this.placeholder}),this.isShowTextLength&&this._createTextLengthLabel(),this.addClass(this.className),this.inputbox.addClass(this.className),this.inputbox.addClass(this.align),this.inputbox.addClass("normal"),this.inputbox.addClass("caph-stripe-inputbox-align"),this.addChild(this.inputbox)},_createTextLengthLabel:function(){this.textLengthLabel=new t;var e=this.inputbox.getProperty("value").length;this.textLengthLabel.addClass("caph-stripe-inputbox-showTextLength"),this.textLengthLabel.setProperty({innerText:e+"/"+this.maxLength}),this.addChild(this.textLengthLabel)},_setTextLengthLabel:function(t){this.textLengthLabel&&this.textLengthLabel.setProperty({innerText:t+"/"+this.maxLength})}})}(this),function(){"use strict";var t=caph.require("ui.base.Component"),e=caph.require("ui.base.component.Inputbox"),i={DEFAULT_MAXVALUE:9999,DEFAULT_MINVALUE:0,DEFAULT_VALUE:0,DEFAULT_INCREMENT:1,INCREASE:"increase",DECREASE:"decrease"};$class({$namespace:"caph.ui.base.component.Spinner",$extends:t,$constructor:function(t){this.$super(t)},_initialize:function(){this.$super(),this.setARIA({title:"spinner",role:"spinner"}),this.focusable(!1),this._option.maxValue=i.DEFAULT_MAXVALUE,this._option.minValue=i.DEFAULT_MINVALUE,this._option.isCycle=!0,this._option.increment=i.DEFAULT_INCREMENT,this._option.value=i.DEFAULT_VALUE,this._upIcon=new t,this._upIconAlign=new t,this._upIconDiv=new t,this._innerText=new e({align:"center",dim:"true"}),this._innerText.setReadOnly(),this._downIcon=new t,this._downIconAlign=new t,this._downIconDiv=new t,this._upIcon.addChild(this._upIconAlign),this._upIconAlign.addChild(this._upIconDiv),this._downIcon.addChild(this._downIconAlign),this._downIconAlign.addChild(this._downIconDiv),this.addChild(this._innerText),this.addChild(this._upIcon),this.addChild(this._downIcon),this.addClass("caph-spinner"),this._upIcon.addClass("arrow-box").addClass("up"),this._upIconAlign.addClass("arrow-align"),this._upIconDiv.addClass("arrow-up"),this._downIcon.addClass("arrow-box").addClass("down"),this._downIconAlign.addClass("arrow-align"),this._downIconDiv.addClass("arrow-down"),this._innerText.inputbox.addClass("input"),this._addEvents()},setOption:function(t){this.$super(t),t&&caph.extend(this._option,t),this.setValue(this._option.value)},setValue:function(t){return this._option.maxValue>=t&&t>=this._option.minValue?(this._innerText.setValue(t),this._value=t,this):void 0},getValue:function(){return this._value},setEnable:function(t){return this.$super(t),t===!0?this.removeClass("disable"):this.addClass("disable"),this},onkeydown:function(t){this.isEnable()&&(t.key().up?(this._incValue(),this._upArrowDisable?this._upIconDiv.addClass("disable"):this._upIconDiv.removeClass("disable"),t.stopPropagation()):t.key().down&&(this._decValue(),this._downArrowDisable?this._downIconDiv.addClass("disable"):this._downIconDiv.removeClass("disable"),t.stopPropagation()))},_arrowClick:function(t){this.isEnable()&&(t===i.INCREASE?(this._incValue(),this._upArrowDisable?this._upIcon.addClass("disable").addClass("mouse"):(this._changeClass(this._upIcon,"focus"),this._changeClass(this._upIcon,"direct")),this._changeClass(this._downIcon,"focus")):(this._decValue(),this._downArrowDisable?this._downIcon.addClass("disable").addClass("mouse"):(this._changeClass(this._downIcon,"focus"),this._changeClass(this._downIcon,"direct")),this._changeClass(this._upIcon,"focus")))},_arrowFocus:function(t){t===i.INCREASE?(this._upArrowDisable?(this._downIcon.addClass("focus"),this._upIcon.addClass("focus").addClass("direct").addClass("disable").addClass("mouse")):(this._changeClass(this._upIcon,"focus"),this._changeClass(this._upIcon,"direct"),this._changeClass(this._downIcon,"focus")),this._changeClass(this._upIconDiv,"focus")):(this._downArrowDisable?(this._upIcon.addClass("focus"),this._downIcon.addClass("focus").addClass("direct").addClass("disable").addClass("mouse")):(this._changeClass(this._downIcon,"focus"),this._changeClass(this._downIcon,"direct"),this._changeClass(this._upIcon,"focus")),this._changeClass(this._downIconDiv,"focus"))},_arrowBlur:function(t){t===i.INCREASE?(this._upArrowDisable&&this._changeClass(this._upIconDiv,"disable"),this._upIconDiv.removeClass("focus"),this._changeClass(this._upIcon,"normal"),this._changeClass(this._downIcon,"normal")):(this._downArrowDisable&&this._changeClass(this._downIconDiv,"disable"),this._downIconDiv.removeClass("focus"),this._changeClass(this._downIcon,"normal"),this._changeClass(this._upIcon,"normal"))},_changeClass:function(t,e){switch(e){case"normal":t.removeClass("direct"),t.removeClass("focus"),t.removeClass("disable").removeClass("mouse");break;case"direct":t.addClass("direct"),t.removeClass("disable").removeClass("mouse");break;case"focus":t.removeClass("direct"),t.addClass("focus"),t.removeClass("disable").removeClass("mouse");break;case"disable":t.removeClass("direct"),t.removeClass("focus"),t.addClass("disable")}},_incValue:function(){var t=!1;this._value=this._value+this._option.increment,this._downArrowDisable=!1,this._changeClass(this._downIcon,"normal"),this._changeClass(this._downIconDiv,"normal"),this._value>=this._option.maxValue&&!this._option.isCycle&&(this._upArrowDisable=!0),this._value>this._option.maxValue?this._option.isCycle?(this._value=this._option.minValue,t=!0):this._value=this._option.maxValue:t=!0,this.setValue(this._value),t&&this._fireUserEvent()},_decValue:function(){var t=!1;this._value=this._value-this._option.increment,this._upArrowDisable=!1,this._changeClass(this._upIcon,"normal"),this._changeClass(this._upIconDiv,"normal"),this._value<=this._option.minValue&&!this._option.isCycle&&(this._downArrowDisable=!0),this._value<this._option.minValue?this._option.isCycle?(this._value=this._option.maxValue,t=!0):this._value=this._option.minValue:t=!0,this.setValue(this._value),t&&this._fireUserEvent()},_fireUserEvent:function(){caph.isFunction(this._onvaluechanged)&&this._onvaluechanged.call(this)},_addEvents:function(){this._upIcon.focusable(!0),this._downIcon.focusable(!0),this._upIcon.on({focus:this._arrowFocus.bind(this,i.INCREASE),blur:this._arrowBlur.bind(this,i.INCREASE),click:this._arrowClick.bind(this,i.INCREASE)}),this._downIcon.on({focus:this._arrowFocus.bind(this,i.DECREASE),blur:this._arrowBlur.bind(this,i.DECREASE),click:this._arrowClick.bind(this,i.DECREASE)}),this._upIcon.keyEvent(!1),this._downIcon.keyEvent(!1)}})}(this),function(){"use strict";var t=caph.require("module.renderer.View"),e=caph.require("module.event.Manager");$class({$namespace:"caph.ui.base.component.Scrollbar",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t),this._createScrollbar()},$statics:{VERTICAL:"vertical",HORIZONTAL:"horizontal"},size:function(t){return caph.isBlank(t)?this.$super():(this._setSizeValueByDirection(t[0],t[1]),this.$super(t))},setSizeValue:function(t){return this.sizeValue=t,this._setCurrentSizeValueByDirection(),this._moveThumb(),this},setMaxThumbPosition:function(t){return this.maxThumbPosition=t,this._normalizeCurrentThumbPosition(),this._moveThumb(),this},getCurrentThumbPosition:function(){return this.currentThumbPosition},moveNext:function(){return this.currentThumbPosition===this.maxThumbPosition?!1:(this.currentThumbPosition+=this.step,this._moveThumb(),!0)},movePrev:function(){return 1===this.currentThumbPosition?!1:(this.currentThumbPosition-=this.step,this._moveThumb(),!0)},moveTo:function(t){this.currentThumbPosition=t;var e=this._normalizeCurrentThumbPosition();return this._moveThumb(),e},onmouseover:function(t){this.addClass("focus"),this._thumb.addClass("over"),t.source===this._thumb&&(this._thumb.addClass("focus"),this._thumb.update())},onmouseout:function(t){t.source===this._thumb&&(this._thumb.removeClass("focus"),this._thumb.update()),this.removeClass("focus"),this._thumb.removeClass("over"),this._thumb.removeClass("focus")},onmousedown:function(t){var e=t.source,i=t.mouse();e===this||e===this._wrapper?this._moveByMouseOffsetDirection(i):e===this._thumb&&(this._isMouseDown=!0,this._adjustment=this._getAdjustmentByDirection(i))},onchange:function(t){t.setSource(this),t.setDetail(this.currentThumbPosition)},onpostrender:function(){this._thumbWidth=1*this._thumb.getStyle("width").replace("px",""),this._thumbHeight=1*this._thumb.getStyle("height").replace("px",""),this._moveThumb()},show:function(){return this.visibility(!0),this},hide:function(){return this.visibility(!1),this},setOption:function(t){this.sizeValue=t.sizeValue||100,this.maxThumbPosition=t.maxThumbPosition||10,this.currentThumbPosition=t.currentThumbPosition||1,this.step=t.step||1,this.direction=t.direction||caph.ui.base.component.Scrollbar.VERTICAL,this.className=t.className||"caph-base-scrollbar",this.setARIA({role:"scrollbar",title:"scrollbar"}),this._setMethodByDirection(),this.$super(t)},_initialize:function(){this.$super(),this._thumb=null,this._thumbWidth=0,this._thumbHeight=0,this._wrapper=null,this._isMouseDown=!1,this._adjustment=0,this.focusable(!0),this.keyEvent(!1),this.requestPostRender(),caph.window.bind("mousemove",function(t){return this._isMouseDown?(this._moveByMousePositionDirection(t),t.preventDefault(),t.stopPropagation(),!1):void 0}.bind(this)),caph.window.bind("mouseup",function(){this._isMouseDown=!1,this._adjustment=0}.bind(this))},_setMethodByDirection:function(){var t=caph.capitalize(this.direction);this._setSizeValueByDirection=this["_setSizeValueBy"+t],this._setCurrentSizeValueByDirection=this["_setCurrentSizeValueBy"+t],this._createScrollbarByDirection=this["_createScrollbarBy"+t],this._moveByMouseDirection=this["_moveByMouse"+t],this._moveByMouseOffsetDirection=this["_moveByMouseOffset"+t],this._moveByMousePositionDirection=this["_moveByMousePosition"+t],this._moveThumbByDirection=this["_moveThumbBy"+t],this._getAdjustmentByDirection=this["_getAdjustmentBy"+t]},_createScrollbar:function(){this._thumb=this._createThumb(),this._createScrollbarByDirection(),this.addClass("caph-scrollbar"),this.addClass(this.className),this.addClass(this.direction)},_createThumb:function(){var e=new t;return e.removeClass("caph-view"),e.addClass("caph-scrollbar"),e.addClass(this.className),e.addClass("thumb"),e},_createScrollbarByVertical:function(){this._setCurrentSizeValueByDirection(),this.addChild(this._thumb)},_createScrollbarByHorizontal:function(){this._wrapper=new t,this._wrapper.removeClass("caph-view"),this._wrapper.addChild(this._thumb),this._setCurrentSizeValueByDirection(),this.addChild(this._wrapper)},_setSizeValueByVertical:function(t,e){this.sizeValue=e},_setSizeValueByHorizontal:function(t){this.sizeValue=t},_setCurrentSizeValueByVertical:function(){this.size([void 0,this.sizeValue])},_setCurrentSizeValueByHorizontal:function(){this.size([this.sizeValue,void 0])},_moveThumb:function(t){this._normalizeCurrentThumbPosition(),this._moveThumbByDirection(t)},_moveThumbByVertical:function(t){this._moveThumbPosition(this._thumbHeight,t,function(t){return[0,t,0]})},_moveThumbByHorizontal:function(t){this._moveThumbPosition(this._thumbWidth,t,function(t){return[t,0,0]})},_moveThumbPosition:function(t,e,i){caph.isBlank(e)&&(e=(this.currentThumbPosition-1)*this._getOffset(t)),this._thumb.position(i(e))},_normalizeCurrentThumbPosition:function(){return this.currentThumbPosition>this.maxThumbPosition?(this.currentThumbPosition=this.maxThumbPosition,!1):1>this.currentThumbPosition?(this.currentThumbPosition=1,!1):!0},_getOffset:function(t){return(this.sizeValue-t)/(this.maxThumbPosition-1)},_getOffsetByMouse:function(t,e){return Math.ceil(t/e*this.maxThumbPosition)},_moveByMouseOffsetVertical:function(t){this._moveByMouseVertical(t.offsetY)},_moveByMouseOffsetHorizontal:function(t){this._moveByMouseHorizontal(t.offsetX)},_getAdjustmentByVertical:function(t){return t.clientY-this._thumb.y()-this._thumbHeight/2},_getAdjustmentByHorizontal:function(t){return t.clientX-this._thumb.x()-this._thumbWidth/2},_moveByMousePositionVertical:function(t){this._moveByMouseVertical(t.clientY-this._adjustment)},_moveByMousePositionHorizontal:function(t){this._moveByMouseHorizontal(t.clientX-this._adjustment)},_moveByMouseVertical:function(t){this._moveByMouse(this._thumbHeight,t)},_moveByMouseHorizontal:function(t){this._moveByMouse(this._thumbWidth,t)},_moveByMouse:function(t,i){var n=this.sizeValue-t;i-=t/2,0>i?i=0:i>n&&(i=n);var s=this.currentThumbPosition;this.currentThumbPosition=this._getOffsetByMouse(i,n),this._moveThumb(i),s!==this.currentThumbPosition&&e.getInstance().sendTo(this,{type:"change"})}})}(this),function(){"use strict";function t(t,e){return{type:t,source:e.source,related:e.related,detail:e.detail,_event:e._event}}function e(t){var e=(t[0],t[1]),i=(t[2],t[3]);return function(t){var n=1-t,s=3*n,r=t*t,o=r*t,a=s*t*n,h=s*r;return a*e+h*i+o}}var i=caph.require("ui.base.Component"),n=caph.require("module.event.Manager"),s=caph.require("module.focus.Manager"),r=caph.require("module.renderer._VDomLookUpTable"),o="horizontal",a="vertical",h="prev",u="next",c=0,l=1,p=2500,d=.66,f=.8,_={xPosition:o,yPosition:a},m=$class({$constructor:function(t){this.parent=t.parent,this.direction=t.direction,this.row=t.row,this.column=t.column,this.gap=t.gap,this.itemSize=t.itemSize,this.itemCountPerPage=t.itemCountPerPage,this.items=[],this._addItemsByDirection=this["_add"+caph.capitalize(this.direction)+"Items"]},addItems:function(t,e){return this._addItemsByIndex(t,e,!1)},addItemsPerPage:function(t,e){return this._addItemsByIndex(t,e,!0)},getItems:function(){return this.items},_addItemsByIndex:function(t,e,i){return this.currentPageIndex=this._getCurrentPageIndex(e),i&&(e=this._getStartIndex()),this._addItemsByDirection(t,e),this},_addHorizontalItems:function(t,e){this._addItems(t,e,this.column,this.row,this._getHorizontalPosition,function(t,e,i,n){t.position(e,this._getVerticalPosition(n),t.z()),t.setProperty({"data-list-item-x-position":i,"data-list-item-y-position":n})})},_addVerticalItems:function(t,e){this._addItems(t,e,this.row,this.column,this._getVerticalPosition,function(t,e,i,n){t.position(this._getHorizontalPosition(n),e,t.z()),t.setProperty({"data-list-item-x-position":n,"data-list-item-y-position":i})})},_addItems:function(t,e,i,n,s,r){var o=t.length,a=e;i=Math.floor(i),n=Math.floor(n);for(var h=Math.floor(e/n),u=i*(this.currentPageIndex+1);u>h;h++)for(var c=s.call(this,h),l=a-h*n;n>l&&!(a>=o);l++){var p=this._getItem(t,a++);r.call(this,p,c,h,l),this.items.push(p)}},_getCurrentPageIndex:function(t){return Math.floor(t/this.itemCountPerPage)},_getStartIndex:function(){return 0>this.currentPageIndex?0:this.currentPageIndex*this.itemCountPerPage},_getHorizontalPosition:function(t){return(this.itemSize[0]+this._getHorizontalGap(t))*t},_getVerticalPosition:function(t){return(this.itemSize[1]+this._getVerticalGap(t))*t},_getHorizontalGap:function(t){return this._getGap(t,0)},_getVerticalGap:function(t){return this._getGap(t,1)},_getGap:function(t,e){return t>0?this.gap[e]:0},_getItem:function(e,i){var s=this.parent,r=s.decorateItem(e[i],i);if(!(r instanceof caph.ui.base.Component))throw Error('IllegalReturnTypeError: The "decorateItem" function must return an instance of "caph.ui.base.Component".');return r.size(this.itemSize),r.setProperty({"data-list-item-index":i}),r.getProperty("data-list-item-no-auto-focus")||r.focusable(!0),r.on({focus:function(e){n.getInstance().sendTo(s,t("focusitem",e))},blur:function(e){n.getInstance().sendTo(s,t("bluritem",e))},click:function(e){n.getInstance().sendTo(s,t("selectitem",e)),e.stopPropagation()},keydown:function(e){e.key().enter&&(n.getInstance().sendTo(s,t("selectitem",e)),e.stopPropagation())},keyup:function(){}}),r}});$class({$namespace:"caph.ui.base.component.List",$extends:caph.ui.base.Component,$constructor:function(t){this.$super(t);var e=caph.capitalize(this.direction);this._processKeyByDirection=this["_processKeyBy"+e],this._setScrollAmountByDirection=this["_setScrollAmountBy"+e],this._getCurrentItemIndexByDirection=this["_getCurrentItemIndexBy"+e],this._moveByDirection=this["_moveBy"+e],this._setPositionByDirection=this["_setPositionBy"+e],this._mouseAutoScrollByDirection=this["_mouseAutoScrollBy"+e],this._getMaxRowIndexByDirection=this["_getMaxRowIndexBy"+e],this._getMaxColumnIndexByDirection=this["_getMaxColumnIndexBy"+e],this._itemSize=this._getItemSize(this.size()),this._itemCountPerPage=this._getItemCountPerPage(),this._currentPageIndex=this._getCurrentPageIndex(),this._createElement(),this.addClass("caph-list-layout"),this._enableMouseAutoScroll()},$statics:{VERTICAL:"vertical",HORIZONTAL:"horizontal"},addItem:function(t){return this.items.push(t),this._dynamicPaging?this._createPageItems(1):(this._removeContainer(),this._createContainer(),this._createAllPageItems(),this._addContainer()),this},addItems:function(t){return this.items=this.items.concat(t),this._dynamicPaging?this._createPageItems(t.length):(this._removeContainer(),this._createContainer(),this._createAllPageItems(),this._addContainer()),this},getItemCount:function(){return this.items.length},getItemSize:function(){return this._itemSize},getMaxRowIndex:function(){return this._getMaxRowIndexByDirection()},getMaxColumnIndex:function(){return this._getMaxColumnIndexByDirection()},getCurrentItemIndex:function(){return this._getCurrentItemIndexByDirection()},getCurrentPositionItem:function(){var t,e=this.xPosition,i=this.yPosition;return this._getCurrentPage().getItems().forEach(function(n){return n.getProperty("data-list-item-x-position")===e&&n.getProperty("data-list-item-y-position")===i?(t=n,!1):void 0}),t},setCurrentPositionByItem:function(t){var e=t.getProperty("data-list-item-x-position"),i=t.getProperty("data-list-item-y-position");return caph.isBlank(e)||caph.isBlank(i)?this:this._setCurrentPosition(e,i)},setKeyLockDuration:function(t){return this._keyLockDuration=t,this},setMouseAutoScrollLockDuration:function(t){return this._mouseAutoScrollLockDuration=t,this},setMouseAutoScrollAreaSize:function(t){return this._mouseAutoScrollAreaSize=t,this},size:function(t){return caph.isBlank(t)?this.$super():(this.$super(t),this.update(),this.container&&this._recreateElement(),this)},moveToX:function(t){return this._moveTo("xPosition",t,this.getMaxColumnIndex(),this._leftCallback,this._rightCallback)},moveToY:function(t){return this._moveTo("yPosition",t,this.getMaxRowIndex(),this._upCallback,this._downCallback)},moveTo:function(t,e){return this.moveToX(t),this.moveToY(e),this},onkeydown:function(t){return this._keyLock?(t.stopPropagation(),void 0):(this._keyDownStartTime||(this._keyDownStartTime=performance.now()),this._keyLock=!0,this._processKeyByDirection(t.key())||this._setPositionByDirection(),setTimeout(function(){this._keyLock=!1}.bind(this),this._keyLockDuration),void 0)},onkeyup:function(t){var e=this._getDurationReductionRatio(),i=1;if(this._keyDownStartTime=null,this._keyLock&&f>e){for(var n=e;1>n;n+=.2)setTimeout(this._stopKeyScroll.bind(this,n,t.detail),this._keyLockDuration*i++);setTimeout(this._stopKeyScroll.bind(this,1,t.detail),this._keyLockDuration*i)}},onfocusitem:function(t){for(var e=t.source;e&&caph.isBlank(e.getProperty("data-list-item-index"));)e=e.getParent();e&&this.setCurrentPositionByItem(e),t.detail={x:this.xPosition,y:this.yPosition}},onbluritem:function(t){t.source||t.related||t.setRelated(this.getCurrentPositionItem())},onselectitem:function(t){t.detail=this.getCurrentPositionItem()},onprevpage:function(t){t.detail={current:this.getCurrentItemIndex()+1,totalCount:this.getItemCount()}},onnextpage:function(t){t.detail={current:this.getCurrentItemIndex()+1,totalCount:this.getItemCount()}},onautoscroll:function(t){t.detail={x:this.xPosition,y:this.yPosition}},setOption:function(t){if(!caph.isFunction(t.decorateItem))throw Error('IllegalArgumentError: The "decorateItem" option is missing.');this.decorateItem=t.decorateItem.bind(this),this.direction=t.direction||o,this.row=t.row||1,this.column=t.column||1,this.gap=t.gap||[5,5],this.ease=t.ease||"ease-out",this.duration=t.duration||500,this._initialEase=this.ease,this._initialDuration=this.duration,this._accelerationCubicBezier=[.3373,0,0,1],this._accelerate=e(this._accelerationCubicBezier),this.items=t.items||[],this.setARIA({role:"gridcell",title:"gridcell"}),this.$super(t)},_initialize:function(){this.$super(),this.pages=[],this._dynamicPaging=!0,this._pageManipulationThreshold=2,this.xPosition=0,this.yPosition=0,this._scrollThreshold=0,this._scrollAmount=0,this._scrollAdjustment=.15,this._mouseAutoScrollStartTime=null,this._mouseAutoScrollIntervalHandle=null,this._mouseAutoScrollCallback=null,this._mouseAutoScrollLockDuration=100,this._mouseAutoScrollAreaSize=20,this._keyLock=!1,this._keyLockDuration=100,this._keyDownStartTime=null},_enableMouseAutoScroll:function(){caph.window.bind("mousemove",function(t){for(var e=r.getInstance().getVDom(t.target);e&&e!==this;)e=e.getParent();e?this._mouseAutoScrollByDirection(t):this._stopMouseAutoScroll()}.bind(this))},_getItemSize:function(t){return t=t||[0,0],[this._getSize(t[c],this.gap[c],this.column),this._getSize(t[l],this.gap[l],this.row)]},_getSize:function(t,e,i){return Math.floor(t/i-e)},_getItemCountPerPage:function(){return Math.floor(this.row)*Math.floor(this.column)},_createElement:function(){this._createContainer(),this._setTransition(),this._dynamicPaging?this._createInitialPageItems():this._createAllPageItems(),this._addContainer()},_recreateElement:function(){this._removeContainer(),this._itemSize=this._getItemSize(this.size()),this._createContainer(),this._dynamicPaging?this._createInitialPageItems():this._createAllPageItems(),this.duration=0,this._addContainer(),this._moveByDirection(0),this.duration=this._initialDuration},_createContainer:function(){this.container=new i({position:[0,0,0]}),this.container.addClass("caph-list-layout-container")},_removeContainer:function(){this.pages=[],this.container.destroy(),this.update()},_addContainer:function(){this.addChild(this.container)},_createAllPageItems:function(){for(var t=0,e=this.getItemCount();e>t;t+=this._itemCountPerPage)this._addInitialPage(t);
this.pages.forEach(function(t){this.container.addChild(t.getItems())}.bind(this))},_createInitialPageItems:function(){var t=this.getCurrentItemIndex(),e=t-this._itemCountPerPage,i=t+this._itemCountPerPage;e>-1&&this._addInitialPage(e),this._addInitialPage(t),this.getItemCount()>i&&this._addInitialPage(i),this.pages.forEach(function(t){this.container.addChild(t.getItems())}.bind(this))},_addInitialPage:function(t){var e=this._createNewPage().addItemsPerPage(this.items,t);e.getItems().length>0&&this.pages.push(e)},_createPageItems:function(t){var e=this.getItemCount(),i=this._createNewPage().addItems(this.items,e-t),n=t-i.getItems().length,s=e-n;1>this.pages.length?(this._addNewPage(i),this._addNewPageOfRemainItems(n,s)):this._addPageToSameIndexPage(i,function(t){i.currentPageIndex<this._currentPageIndex+this._pageManipulationThreshold&&(t?this._addNewPageOfRemainItems(n,s):this._addNewPage(i))})},_addNewPage:function(t){this.pages.push(t),this.container.addChild(t.getItems())},_addPageToSameIndexPage:function(t,e){var i=t.getItems(),n=!1;this.pages.forEach(function(e){if(e.currentPageIndex===t.currentPageIndex){for(var s=e.getItems(),r=0,o=i.length;o>r;r++){if(!(s.length<e.itemCountPerPage)){t.currentPageIndex++;break}var a=i.shift();s.push(a),this.container.addChild(a)}return n=!0,!1}}.bind(this)),e.call(this,n)},_addNewPageOfRemainItems:function(t,e){if(t>0){var i=this._createNewPage().addItems(this.items,e);this.pages.push(i),this.container.addChild(i.getItems())}},_getCurrentItemIndexByHorizontal:function(){return this.xPosition*Math.floor(this.row)+this.yPosition},_getCurrentItemIndexByVertical:function(){return this.xPosition+this.yPosition*Math.floor(this.column)},_createNewPage:function(){return new m({parent:this,direction:this.direction,row:this.row,column:this.column,gap:this.gap,itemSize:this._itemSize,itemCountPerPage:this._itemCountPerPage})},_getCurrentPageIndex:function(){return Math.floor(this.getCurrentItemIndex()/this._itemCountPerPage)},_getCurrentPage:function(){var t,e=this._getCurrentPageIndex();return this.pages.forEach(function(i){return i.currentPageIndex===e?(t=i,!1):void 0}),t},_getMaxPageIndex:function(){return Math.floor((this.getItemCount()-1)/this._itemCountPerPage)},_getMaxRowIndexByHorizontal:function(){return Math.floor(this.row)-1},_getMaxRowIndexByVertical:function(){return Math.floor((this.getItemCount()-1)/Math.floor(this.column))},_getMaxColumnIndexByHorizontal:function(){return Math.floor((this.getItemCount()-1)/Math.floor(this.row))},_getMaxColumnIndexByVertical:function(){return Math.floor(this.column)-1},_setHorizontalScrollAmount:function(t){this._setScrollAmount(this.xPosition,t,this._itemSize[c]+this.gap[c],this.column)},_setVerticalScrollAmount:function(t){this._setScrollAmount(this.yPosition,t,this._itemSize[l]+this.gap[l],this.row)},_setScrollAmount:function(t,e,i,n){var s=Math.floor(n),r=n-s,o=s-1,a=i*(r>=this._scrollAdjustment?this._scrollAdjustment:.5*r);0>e?0===this._scrollThreshold?this._scrollAmount=-1*i*t+a:(this._scrollThreshold+=e,this._scrollThreshold=0>this._scrollThreshold?0:this._scrollThreshold):e>0?this._scrollThreshold===o?this._scrollAmount=-1*i*(t-o)+a:(this._scrollThreshold+=e,this._scrollThreshold=this._scrollThreshold>o?o:this._scrollThreshold):this._scrollAmount=-1*i*(t-this._scrollThreshold)+a,this._scrollAmount>0&&(this._scrollAmount=0)},_processKeyByHorizontal:function(t){return this._processKey({key:t,maxRowIndex:Math.floor(this.row)-1,maxColumnIndex:this.getMaxColumnIndex(),leftCallback:this._leftCallback,rightCallback:this._rightCallback})},_processKeyByVertical:function(t){return this._processKey({key:t,maxRowIndex:this.getMaxRowIndex(),maxColumnIndex:Math.floor(this.column)-1,upCallback:this._upCallback,downCallback:this._downCallback})},_processKey:function(t){var e,i=t.key,n=!1;return i.up?this.yPosition>0&&(e=this.yPosition--,n=!0,0===this.yPosition&&(this._keyDownStartTime=null),t.upCallback&&t.upCallback.call(this,this.yPosition-e)):i.down?this.yPosition<t.maxRowIndex&&(e=this.yPosition++,n=!0,this.yPosition===t.maxRowIndex&&(this._keyDownStartTime=null),t.downCallback&&t.downCallback.call(this,this.yPosition-e)):i.left?this.xPosition>0&&(e=this.xPosition--,n=!0,0===this.xPosition&&(this._keyDownStartTime=null),t.leftCallback&&t.leftCallback.call(this,this.xPosition-e)):i.right&&this.xPosition<t.maxColumnIndex&&(e=this.xPosition++,n=!0,this.xPosition===t.maxColumnIndex&&(this._keyDownStartTime=null),t.rightCallback&&t.rightCallback.call(this,this.xPosition-e)),n},_stopKeyScroll:function(t,e){this._keyLock=!1,this.duration=this._initialDuration*t,this.ease="ease-out",n.getInstance().sendTo(s.getInstance(),{type:"keydown",detail:e}),this._keyDownStartTime=null,this.duration=this._initialDuration,this.ease=this._initialEase},_setScrollAmountByHorizontal:function(t){this._setHorizontalScrollAmount(t)},_setScrollAmountByVertical:function(t,e){this._setVerticalScrollAmount(e)},_addItems:function(t){var e,i=this._createNewPage(),n=this.getCurrentItemIndex();t===h?(e=this.pages[0],i.addItemsPerPage(this.items,n-this._itemCountPerPage),i.currentPageIndex>=0&&e.currentPageIndex!==i.currentPageIndex&&(this.pages.unshift(i),this.container.addChild(i.getItems()))):t===u&&(e=this.pages[this.pages.length-1],i.addItemsPerPage(this.items,n+this._itemCountPerPage),i.currentPageIndex<=this._getMaxPageIndex()&&e.currentPageIndex!==i.currentPageIndex&&(this.pages.push(i),this.container.addChild(i.getItems()))),this.container.update()},_removePage:function(t){var e,i,n=[];if(t===h)for(i=this._currentPageIndex+this._pageManipulationThreshold;e=this.pages.pop();)e.currentPageIndex>i?this._removeItems(e):n.unshift(e);else if(t===u)for(i=this._currentPageIndex-this._pageManipulationThreshold;e=this.pages.shift();)i>e.currentPageIndex?this._removeItems(e):n.push(e);this.pages=n,this.container.update()},_removeItems:function(t){t.getItems().forEach(function(t){t.destroy()}.bind(this))},_leftCallback:function(t){this._move(h,t,this._moveByHorizontal)},_rightCallback:function(t){this._move(u,t,this._moveByHorizontal)},_upCallback:function(t){this._move(h,t,this._moveByVertical)},_downCallback:function(t){this._move(u,t,this._moveByVertical)},_moveByHorizontal:function(t){this._setHorizontalScrollAmount(t),this._setTransition(),this._setPositionByDirection()},_moveByVertical:function(t){this._setVerticalScrollAmount(t),this._setTransition(),this._setPositionByDirection()},_setTransition:function(){var t=this.duration,e=this.ease,i=this._getDurationReductionRatio();f>i&&(t*=i,e="linear"),this.container.setStyle({transition:"transform "+t+"ms "+e,webkitTransition:"-webkit-transform "+t+"ms "+e})},_getDurationReductionRatio:function(){var t=this._keyDownStartTime||this._mouseAutoScrollStartTime;return t?1-d*this._accelerate(Math.min(performance.now()-t,p)/p):1},_setPositionByHorizontal:function(){this.container.x(this._scrollAmount)},_setPositionByVertical:function(){this.container.y(this._scrollAmount)},_setCurrentPosition:function(t,e){if(0>t||t>this.getMaxColumnIndex()||0>e||e>this.getMaxRowIndex())return this;var i=this.xPosition,n=this.yPosition;return this._setScrollAmountByDirection((this.xPosition=t)-i,(this.yPosition=e)-n),this._setCurrentPageIndex(),this},_setCurrentPageIndex:function(t){var e=this._getCurrentPageIndex();e!==this._currentPageIndex&&(t=t||(e>this._currentPageIndex?u:h),this._currentPageIndex=e,this._dynamicPaging&&(this._addItems(t),this._removePage(t)),n.getInstance().sendTo(this,{type:t+"page"}))},_move:function(t,e,i){this._setCurrentPageIndex(t),i.call(this,e)},_moveTo:function(t,e,i,n,s){if(0>e||e>i)return this;if(this.direction!==_[t])return this[t]=e,this;var r=this[t],o=this._currentPageIndex,a=(this[t]=e)-r,h=this._getCurrentPageIndex();if(Math.abs(h-o)<this._pageManipulationThreshold)for(var u=0,c=Math.abs(a);c>u;u++)0>a?n.call(this,-1):s.call(this,1);else this._recreateElement();return this._currentPageIndex=h,this},_getXYByHorizontal:function(t){return{x:Math.floor(t/this.row),y:t%this.row}},_getXYByVertical:function(t){return{x:Math.floor(t/this.column),y:t%this.column}},_mouseAutoScrollByHorizontal:function(t){var e=t.clientX,i=t.clientY;this._startMouseAutoScroll({isWithinArea:function(t){return i>t.top&&t.top+t.height>i},isMoveToPrev:function(t){return e>=t.left-this._mouseAutoScrollAreaSize&&t.left+this._mouseAutoScrollAreaSize>=e},moveToPrev:function(){if(this.xPosition>0){var t=this.xPosition-1;0===t&&(this._mouseAutoScrollStartTime=null),this.moveToX(t),n.getInstance().sendTo(this,{type:"autoscroll"})}else 0===this.xPosition&&(this.xPosition=1,this.moveToX(0))},isMoveToNext:function(t){return e>=t.left+t.width-this._mouseAutoScrollAreaSize&&t.left+t.width+this._mouseAutoScrollAreaSize>=e},moveToNext:function(){var t=this.getMaxColumnIndex();if(t>this.xPosition){var e=this.xPosition+1;e===t&&(this._mouseAutoScrollStartTime=null),this.moveToX(e),n.getInstance().sendTo(this,{type:"autoscroll"})}else this.xPosition===t&&(this.xPosition=t-1,this.moveToX(t))}})},_mouseAutoScrollByVertical:function(t){var e=t.clientX,i=t.clientY;this._startMouseAutoScroll({isWithinArea:function(t){return e>t.left&&t.left+t.width>e},isMoveToPrev:function(t){return i>=t.top-this._mouseAutoScrollAreaSize&&t.top+this._mouseAutoScrollAreaSize>=i},moveToPrev:function(){if(this.yPosition>0){var t=this.yPosition-1;0===t&&(this._mouseAutoScrollStartTime=null),this.moveToY(t),n.getInstance().sendTo(this,{type:"autoscroll"})}else 0===this.yPosition&&(this.yPosition=1,this.moveToY(0))},isMoveToNext:function(t){return i>=t.top+t.height-this._mouseAutoScrollAreaSize&&t.top+t.height+this._mouseAutoScrollAreaSize>=i},moveToNext:function(){var t=this.getMaxRowIndex();if(t>this.yPosition){var e=this.yPosition+1;e===t&&(this._mouseAutoScrollStartTime=null),this.moveToY(e),n.getInstance().sendTo(this,{type:"autoscroll"})}else this.yPosition===t&&(this.yPosition=t-1,this.moveToY(t))}})},_startMouseAutoScroll:function(t){var e,i,n=this.offset(),s=this.size(),r={left:n[0],top:n[1],width:s[0],height:s[1]};t.isWithinArea.call(this,r)?(e=t.isMoveToPrev.call(this,r),i=t.isMoveToNext.call(this,r),this._mouseAutoScrollIntervalHandle?e||i||this._stopMouseAutoScroll():e?this._doMouseAutoScroll(t.moveToPrev):i&&this._doMouseAutoScroll(t.moveToNext)):this._stopMouseAutoScroll()},_doMouseAutoScroll:function(t){this._mouseAutoScrollStartTime=performance.now(),this._mouseAutoScrollCallback=t,this._mouseAutoScrollIntervalHandle=setInterval(t.bind(this),this._mouseAutoScrollLockDuration)},_stopMouseAutoScroll:function(){var t=this.duration,e=this._initialDuration/5;if(this._mouseAutoScrollStartTime=null,this._mouseAutoScrollIntervalHandle&&(clearInterval(this._mouseAutoScrollIntervalHandle),this._mouseAutoScrollIntervalHandle=null,this._mouseAutoScrollCallback)){for(this.ease="ease-out";this._initialDuration>t;)this.duration=t,this._mouseAutoScrollCallback.call(this),t+=e;this.duration=this._initialDuration,this._mouseAutoScrollCallback.call(this),this.ease=this._initialEase}this._mouseAutoScrollCallback=null}})}(this),function(){"use strict";var t=caph.require("ui.base.Component"),e=caph.require("module.event.Manager"),i=caph.require("ui.base.component.Label");$class({$namespace:"caph.ui.base.component.ListText",$extends:t,$constructor:function(t){this.$super(t),this._create(t)},$statics:{DEFAULT:"default",SELECTBOX:"selectbox",CHECKBOX:"checkbox",RADIOBUTTON:"radiobutton"},setOption:function(t){this.setARIA({title:"listtext",role:"listtext"}),this.type=t.type||"default",this.CheckboxCreator=t.themeCheckbox||caph.require("ui.base.component.Checkbox"),this.RadiobuttonCreator=t.themeRadiobutton||caph.require("ui.base.component.RadioButton"),this.className=t.className,this.wrapperClassName=t.wrapperClassName,this.defaultClassName=t.defaultClassName,this.group=t.group,this.text=t.text||"",this.checked=!1,this.hasSelected=!0,this.$super(t)},onfocus:function(t){t.stopPropagation(),this.wrappee&&e.getInstance().sendTo(this.wrappee,{bubbles:!1,detail:t.detail,type:t.type,source:this.wrappee}),this.addClass("focus")},onblur:function(t){t.stopPropagation(),this.wrappee&&e.getInstance().sendTo(this.wrappee,{bubbles:!1,detail:t.detail,type:t.type,source:this.wrappee}),this.removeClass("focus")},onkeydown:function(t){var e=t.key();e.enter&&(t.stopPropagation(),this._selectListtext(t))},onclick:function(t){t.stopPropagation(),this._selectListtext(t)},onpostrender:function(){var t=this.size();if(this.type===caph.ui.base.component.ListText.DEFAULT)this.label.size(t);else{var e=1*this.wrapper.getStyle("width").replace("px",""),i=1*this.wrapper.getStyle("padding-right").replace("px",""),n=1*this.wrapper.getStyle("padding-left").replace("px","");this.label.size([t[0]-e-n-i,t[1]])}},setEnable:function(t){return this.$super(t),t?(this.removeClass("dim"),this.wrappee&&this.wrappee.setEnable(t)):(this.addClass("dim"),this.wrappee&&this.wrappee.setEnable(t)),this},setChecked:function(t){return this.checked=t,this.wrappee&&this.wrappee.setChecked(t),this.hasSelected&&(t?this.addClass("selected"):this.removeClass("selected")),this},setTextSize:function(t){return this.label.setTextSize(t),this},getLabel:function(){return this.label},setText:function(t){this.label.setText(t)},getText:function(){return this.label.getText()},setAlign:function(t){this.label.setAlign({horizontal:t,vertical:"left"})},_initialize:function(){this.$super(),this.focusable(!0),this.requestPostRender()},_create:function(){this.label=new i({text:this.text}),this.label.removeClass("caph-view"),this.type!==caph.ui.base.component.ListText.DEFAULT?this["_create"+caph.capitalize(this.type)]():(this.label.addTextClass(this.defaultClassName),this.label.setTextStyle({boxSizing:"border-box"}),this.label.setAlign({horizontal:"left",vertical:"left"})),this.addChild(this.label),this.addClass(this.className),this.addClass("normal")},_createCheckbox:function(){this._createWrapper(function(){return this.hasSelected=!1,new this.CheckboxCreator({checked:!1,hasBox:!0})})},_createRadiobutton:function(){this._createWrapper(function(){return this.hasSelected=!1,new this.RadiobuttonCreator({checked:!1,group:this.group})})},_createSelectbox:function(){this._createWrapper(function(){return new this.CheckboxCreator({checked:!1,hasBox:!1})})},_createWrapper:function(e){this.wrapper=new t({tag:"div"}),this.wrapper.removeClass("caph-view"),this.wrappee=e.call(this),this.wrappee.removeClass("caph-view"),this.wrappee.focusable(!1),this.wrapper.addChild(this.wrappee),this.wrapper.addClass(this.wrapperClassName),this.wrapper.focusable(!1),this.addChild(this.wrapper),this.label.setAlign({horizontal:"left",vertical:"left"})},_selectListtext:function(t){this.hasSelected&&(this.checked?this.removeClass("selected"):this.addClass("selected")),this.checked=!this.checked,this.wrappee&&e.getInstance().sendTo(this.wrappee,{bubbles:!1,detail:t.detail,type:t.type,source:this.wrappee}),e.getInstance().sendTo(this,{type:"selected",detail:this.label.getText()})}})}(this),function(){"use strict";var t=caph.require("ui.base.Component"),e=caph.require("ui.base.component.ListText"),i=caph.require("module.event.Manager"),n=caph.require("module.focus.Manager");$class({$namespace:"caph.ui.base.component.ListMenu",$extends:t,$constructor:function(t){this.$super(t),this._create()},setOption:function(t){this.type=t.type||e.DEFAULT,this.group=t.group,this.width=t.width||300,caph.isArray(t.items)&&(this.items=t.items),t.selectedIndex<this.items.length&&(this.selectedIndex=t.selectedIndex),this._ListText=t._ListText||e,this.$super(t)},size:function(t){return caph.isBlank(t)?this.$super():(this.width=t[0],this.$super(t))},addItem:function(t){return this._destruct(),this.items=this.items.concat(t),this._create(),this},getSelectedItem:function(){return this.items[this.selectedIndex]},show:function(){return this._create(),caph.isBlank(this.selectedIndex)?setTimeout(function(){this.visibility(!0),n.getInstance().focus(this._items[0])}.bind(this),0):setTimeout(function(){this.visibility(!0),n.getInstance().focus(this._items[this.selectedIndex])}.bind(this),0),this},hide:function(){return this.visibility(!1),this._destruct(),this},onselected:function(t){this.selectedIndex=t.detail.index},onpostrender:function(){var t=0;this._upArrow&&(t=this._setYPosition(this._upArrow,t)),this._items.forEach(function(e){e&&(t=this._setYPosition(e,t),e.size([this.width]),e.z(0))},this),this._downArrow&&(t=this._setYPosition(this._downArrow,t)),this.size([this.width,t])},_setYPosition:function(t,e){return t.y(e),e+t.size()[1]},_initialize:function(){this.$super(),this._scrollCount=6,this._currentIndex=0,this._items=[],this.requestPostRender()},_create:function(){if(!(this._items.length>0)){var t=0,e=this.selectedIndex-(this._scrollCount-1);e>0&&(t+=e),this._createListText(t),this._createArrow(),this._upArrow&&this.addChild(this._upArrow),this._addListText(),this._downArrow&&this.addChild(this._downArrow)}},_createListText:function(t){var e=t+this._scrollCount;for(e>this.items.length&&(e=this.items.length);e>t;)this._items[t]=this._getListText(t),t++},_getListText:function(t){var e=this;return new this._ListText({type:this.type,group:this.group,text:this.items[t],size:[this.width],on:{selected:function(n){e._items.forEach(function(t){t&&t.setChecked(!1)}),this.setChecked(!0),i.getInstance().sendTo(e,{source:this,type:"selected",detail:{index:t,item:this.getText()}}),n.stopPropagation()},focus:function(i){i.stopPropagation(),e._currentIndex=t},keydown:function(t){var i=t.key();i.up?(t.stopPropagation(),e._moveUp()):i.down&&(t.stopPropagation(),e._moveDown())}}}).addClass("caph-list-menu-item").setChecked(t===this.selectedIndex)},_addListText:function(){this._items.forEach(function(t){t&&this.addChild(t)},this)},_createArrow:function(){var t=this;this.items.length>this._scrollCount&&(this._upArrow||(this._upArrow=this._getArrow("up",function(){t._moveUp()})),this._downArrow||(this._downArrow=this._getArrow("down",function(){t._moveDown()})))},_getArrow:function(e,i){return new t({size:[this.width],on:{focus:function(){this.addClass("focus")},blur:function(){this.removeClass("focus")},click:i}}).addClass("caph-list-menu-arrow").addClass(e).focusable(!0).keyEvent(!1)},_moveUp:function(){var t=this._currentIndex-1;return 0>t?(this._rotateItem(this.items.length-this._scrollCount,this.items.length-1),void 0):(this._moveItem(t,t+this._scrollCount),void 0)},_moveDown:function(){var t=this._currentIndex+1;return t>this.items.length-1?(this._rotateItem(0,0),void 0):(this._moveItem(t,t-this._scrollCount),void 0)},_rotateItem:function(t,e){this._removeItems(),this._createListText(0>t?0:t),this._addListText(),setTimeout(function(){n.getInstance().focus(this._items[e])}.bind(this),0)},_moveItem:function(t,e){var i=this._items[t];i||(i=this._getListText(t),e>-1&&(this._items[e].destroy(),this._items[e]=null),this.addChild(this._items[t]=i)),setTimeout(function(){n.getInstance().focus(i)},0)},_destruct:function(){this._removeItems(),this._items=[]},_removeItems:function(){this._items.forEach(function(t,e,i){t&&t.destroy(),i[e]=null})}})}(this),function(t){"use strict";var e,i=caph.require("module.renderer.RenderEngine"),n=caph.require("module.event.Manager"),s=caph.require("module.focus.Manager"),r=caph.require("ui.base.component.Surface"),o=caph.require("ui.base.Scene"),a=caph.require("ui.base.scene.Manager");$class({$namespace:"caph.AppBase",$extends:i,$constructor:function(){var t,i=this.$super();return void 0!==e?e:(caph.isArray(i)&&(t=i[0],this._renderer=t._renderer,this._isRunning=t._isRunning,this._option=t._isRunning,i[0]=this),this.surface=null,this.sceneManager=null,this.eventManager=null,this.focusManager=null,this.sceneList=[],void 0)},setup:function(t){caph.extend(this._option,t)},_create:function(){this.$super(),this.surface=new r({size:[t.innerWidth,t.innerHeight]}),this.eventManager=n.getInstance(),caph.extend(this._option,{renderer:{root:this.surface}})},_initialize:function(){this.$super(),this._initFocusManager(this.surface),this._initSceneManager(),this._option.userCallback&&"function"==typeof this._option.userCallback.initialize&&this._option.userCallback.initialize(this.surface),this._option.renderer&&this._option.renderer.root.mount(this._option.renderer.mount)},_initFocusManager:function(t){this.focusManager=s.getInstance(),this.focusManager.setRootNode(t)},_initSceneManager:function(){if(this.sceneList.length>0){this.surface._setSceneManager(new a(this.surface)),this.sceneManager=this.surface._getSceneManager();for(var t;t=this.sceneList.shift();)this.sceneManager.add(t.name,t.scene);this.sceneManager.setMainScene(this._option.sceneID)}},_addScene:function(t,e){var i=e;"object"==typeof e&&(i=$class({$extends:o,oncreate:e.oncreate})),this.sceneList.push({name:t,scene:i})},$statics:{getInstance:function(){return void 0===e&&(e=new caph.AppBase),e}}})}(this),function(t){"use strict";var e=caph.require("AppBase"),i=new e,n=null;$class({$namespace:"caph.app",$constructor:function(){return null!==n?n:(n=this,void 0)},initialize:function(t){var e={userCallback:{initialize:t}};return i.setup(e),this},addScene:function(t,e){return i._addScene.apply(i,[t,e]),this},run:function(t){t=t||{},caph.extend(t,{renderer:{mount:t.mount}}),i.run(t)},$statics:{getInstance:function(){return null===n&&(n=new caph.app),n}}}),t.caph.app=caph.app.getInstance()}(this);